{
  "version": 3,
  "sources": ["../../../node_modules/vscode-languageclient/node_modules/semver/semver.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-jsonrpc/lib/is.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-jsonrpc/lib/messages.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-jsonrpc/lib/events.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-jsonrpc/lib/messageReader.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-jsonrpc/lib/messageWriter.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-jsonrpc/lib/cancellation.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-jsonrpc/lib/linkedMap.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-jsonrpc/lib/pipeSupport.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-jsonrpc/lib/socketSupport.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-jsonrpc/lib/main.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-languageserver-types/lib/umd/main.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-languageserver-protocol/lib/utils/is.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-languageserver-protocol/lib/protocol.js", "../../../node_modules/vscode-languageclient/node_modules/vscode-languageserver-protocol/lib/main.js", "../../../node_modules/vscode-languageclient/lib/utils/is.js", "../../../node_modules/vscode-languageclient/lib/protocolCompletionItem.js", "../../../node_modules/vscode-languageclient/lib/protocolCodeLens.js", "../../../node_modules/vscode-languageclient/lib/protocolDocumentLink.js", "../../../node_modules/vscode-languageclient/lib/codeConverter.js", "../../../node_modules/vscode-languageclient/lib/protocolConverter.js", "../../../node_modules/vscode-languageclient/lib/utils/async.js", "../../../node_modules/vscode-languageclient/lib/utils/uuid.js", "../../../node_modules/vscode-languageclient/lib/client.js", "../../../node_modules/vscode-languageclient/lib/colorProvider.js", "../../../node_modules/vscode-languageclient/lib/configuration.js", "../../../node_modules/vscode-languageclient/lib/implementation.js", "../../../node_modules/vscode-languageclient/lib/typeDefinition.js", "../../../node_modules/vscode-languageclient/lib/workspaceFolders.js", "../../../node_modules/vscode-languageclient/lib/foldingRange.js", "../../../node_modules/vscode-languageclient/lib/declaration.js", "../../../node_modules/vscode-languageclient/lib/utils/processes.js", "../../../node_modules/vscode-languageclient/lib/main.js", "../src/extension.ts", "../src/apis/statusBar.ts"],
  "sourcesContent": ["exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nEmitter._noop = function () { };\r\nexports.Emitter = Emitter;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader recevied error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't recevied the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer recevied error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this._emitter = undefined;\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        this.cancel();\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n", "\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    ;\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            console.log(\"inspect\");\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n", "(function (factory) {\r\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n        var v = factory(require, exports);\r\n        if (v !== undefined) module.exports = v;\r\n    }\r\n    else if (typeof define === \"function\" && define.amd) {\r\n        define([\"require\", \"exports\"], factory);\r\n    }\r\n})(function (require, exports) {\r\n    /* --------------------------------------------------------------------------------------------\r\n     * Copyright (c) Microsoft Corporation. All rights reserved.\r\n     * Licensed under the MIT License. See License.txt in the project root for license information.\r\n     * ------------------------------------------------------------------------------------------ */\r\n    'use strict';\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    /**\r\n     * The Position namespace provides helper functions to work with\r\n     * [Position](#Position) literals.\r\n     */\r\n    var Position;\r\n    (function (Position) {\r\n        /**\r\n         * Creates a new Position literal from the given line and character.\r\n         * @param line The position's line.\r\n         * @param character The position's character.\r\n         */\r\n        function create(line, character) {\r\n            return { line: line, character: character };\r\n        }\r\n        Position.create = create;\r\n        /**\r\n         * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n        }\r\n        Position.is = is;\r\n    })(Position = exports.Position || (exports.Position = {}));\r\n    /**\r\n     * The Range namespace provides helper functions to work with\r\n     * [Range](#Range) literals.\r\n     */\r\n    var Range;\r\n    (function (Range) {\r\n        function create(one, two, three, four) {\r\n            if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n                return { start: Position.create(one, two), end: Position.create(three, four) };\r\n            }\r\n            else if (Position.is(one) && Position.is(two)) {\r\n                return { start: one, end: two };\r\n            }\r\n            else {\r\n                throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n            }\r\n        }\r\n        Range.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n        }\r\n        Range.is = is;\r\n    })(Range = exports.Range || (exports.Range = {}));\r\n    /**\r\n     * The Location namespace provides helper functions to work with\r\n     * [Location](#Location) literals.\r\n     */\r\n    var Location;\r\n    (function (Location) {\r\n        /**\r\n         * Creates a Location literal.\r\n         * @param uri The location's uri.\r\n         * @param range The location's range.\r\n         */\r\n        function create(uri, range) {\r\n            return { uri: uri, range: range };\r\n        }\r\n        Location.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n        }\r\n        Location.is = is;\r\n    })(Location = exports.Location || (exports.Location = {}));\r\n    /**\r\n     * The LocationLink namespace provides helper functions to work with\r\n     * [LocationLink](#LocationLink) literals.\r\n     */\r\n    var LocationLink;\r\n    (function (LocationLink) {\r\n        /**\r\n         * Creates a LocationLink literal.\r\n         * @param targetUri The definition's uri.\r\n         * @param targetRange The full range of the definition.\r\n         * @param targetSelectionRange The span of the symbol definition at the target.\r\n         * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n         */\r\n        function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n            return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n        }\r\n        LocationLink.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n                && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n                && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n        }\r\n        LocationLink.is = is;\r\n    })(LocationLink = exports.LocationLink || (exports.LocationLink = {}));\r\n    /**\r\n     * The Color namespace provides helper functions to work with\r\n     * [Color](#Color) literals.\r\n     */\r\n    var Color;\r\n    (function (Color) {\r\n        /**\r\n         * Creates a new Color literal.\r\n         */\r\n        function create(red, green, blue, alpha) {\r\n            return {\r\n                red: red,\r\n                green: green,\r\n                blue: blue,\r\n                alpha: alpha,\r\n            };\r\n        }\r\n        Color.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.number(candidate.red)\r\n                && Is.number(candidate.green)\r\n                && Is.number(candidate.blue)\r\n                && Is.number(candidate.alpha);\r\n        }\r\n        Color.is = is;\r\n    })(Color = exports.Color || (exports.Color = {}));\r\n    /**\r\n     * The ColorInformation namespace provides helper functions to work with\r\n     * [ColorInformation](#ColorInformation) literals.\r\n     */\r\n    var ColorInformation;\r\n    (function (ColorInformation) {\r\n        /**\r\n         * Creates a new ColorInformation literal.\r\n         */\r\n        function create(range, color) {\r\n            return {\r\n                range: range,\r\n                color: color,\r\n            };\r\n        }\r\n        ColorInformation.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Range.is(candidate.range) && Color.is(candidate.color);\r\n        }\r\n        ColorInformation.is = is;\r\n    })(ColorInformation = exports.ColorInformation || (exports.ColorInformation = {}));\r\n    /**\r\n     * The Color namespace provides helper functions to work with\r\n     * [ColorPresentation](#ColorPresentation) literals.\r\n     */\r\n    var ColorPresentation;\r\n    (function (ColorPresentation) {\r\n        /**\r\n         * Creates a new ColorInformation literal.\r\n         */\r\n        function create(label, textEdit, additionalTextEdits) {\r\n            return {\r\n                label: label,\r\n                textEdit: textEdit,\r\n                additionalTextEdits: additionalTextEdits,\r\n            };\r\n        }\r\n        ColorPresentation.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.string(candidate.label)\r\n                && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n                && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n        }\r\n        ColorPresentation.is = is;\r\n    })(ColorPresentation = exports.ColorPresentation || (exports.ColorPresentation = {}));\r\n    /**\r\n     * Enum of known range kinds\r\n     */\r\n    var FoldingRangeKind;\r\n    (function (FoldingRangeKind) {\r\n        /**\r\n         * Folding range for a comment\r\n         */\r\n        FoldingRangeKind[\"Comment\"] = \"comment\";\r\n        /**\r\n         * Folding range for a imports or includes\r\n         */\r\n        FoldingRangeKind[\"Imports\"] = \"imports\";\r\n        /**\r\n         * Folding range for a region (e.g. `#region`)\r\n         */\r\n        FoldingRangeKind[\"Region\"] = \"region\";\r\n    })(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n    /**\r\n     * The folding range namespace provides helper functions to work with\r\n     * [FoldingRange](#FoldingRange) literals.\r\n     */\r\n    var FoldingRange;\r\n    (function (FoldingRange) {\r\n        /**\r\n         * Creates a new FoldingRange literal.\r\n         */\r\n        function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n            var result = {\r\n                startLine: startLine,\r\n                endLine: endLine\r\n            };\r\n            if (Is.defined(startCharacter)) {\r\n                result.startCharacter = startCharacter;\r\n            }\r\n            if (Is.defined(endCharacter)) {\r\n                result.endCharacter = endCharacter;\r\n            }\r\n            if (Is.defined(kind)) {\r\n                result.kind = kind;\r\n            }\r\n            return result;\r\n        }\r\n        FoldingRange.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n                && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n                && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n                && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n        }\r\n        FoldingRange.is = is;\r\n    })(FoldingRange = exports.FoldingRange || (exports.FoldingRange = {}));\r\n    /**\r\n     * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n     * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n     */\r\n    var DiagnosticRelatedInformation;\r\n    (function (DiagnosticRelatedInformation) {\r\n        /**\r\n         * Creates a new DiagnosticRelatedInformation literal.\r\n         */\r\n        function create(location, message) {\r\n            return {\r\n                location: location,\r\n                message: message\r\n            };\r\n        }\r\n        DiagnosticRelatedInformation.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n        }\r\n        DiagnosticRelatedInformation.is = is;\r\n    })(DiagnosticRelatedInformation = exports.DiagnosticRelatedInformation || (exports.DiagnosticRelatedInformation = {}));\r\n    /**\r\n     * The diagnostic's severity.\r\n     */\r\n    var DiagnosticSeverity;\r\n    (function (DiagnosticSeverity) {\r\n        /**\r\n         * Reports an error.\r\n         */\r\n        DiagnosticSeverity.Error = 1;\r\n        /**\r\n         * Reports a warning.\r\n         */\r\n        DiagnosticSeverity.Warning = 2;\r\n        /**\r\n         * Reports an information.\r\n         */\r\n        DiagnosticSeverity.Information = 3;\r\n        /**\r\n         * Reports a hint.\r\n         */\r\n        DiagnosticSeverity.Hint = 4;\r\n    })(DiagnosticSeverity = exports.DiagnosticSeverity || (exports.DiagnosticSeverity = {}));\r\n    /**\r\n     * The Diagnostic namespace provides helper functions to work with\r\n     * [Diagnostic](#Diagnostic) literals.\r\n     */\r\n    var Diagnostic;\r\n    (function (Diagnostic) {\r\n        /**\r\n         * Creates a new Diagnostic literal.\r\n         */\r\n        function create(range, message, severity, code, source, relatedInformation) {\r\n            var result = { range: range, message: message };\r\n            if (Is.defined(severity)) {\r\n                result.severity = severity;\r\n            }\r\n            if (Is.defined(code)) {\r\n                result.code = code;\r\n            }\r\n            if (Is.defined(source)) {\r\n                result.source = source;\r\n            }\r\n            if (Is.defined(relatedInformation)) {\r\n                result.relatedInformation = relatedInformation;\r\n            }\r\n            return result;\r\n        }\r\n        Diagnostic.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate)\r\n                && Range.is(candidate.range)\r\n                && Is.string(candidate.message)\r\n                && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n                && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n                && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n                && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n        }\r\n        Diagnostic.is = is;\r\n    })(Diagnostic = exports.Diagnostic || (exports.Diagnostic = {}));\r\n    /**\r\n     * The Command namespace provides helper functions to work with\r\n     * [Command](#Command) literals.\r\n     */\r\n    var Command;\r\n    (function (Command) {\r\n        /**\r\n         * Creates a new Command literal.\r\n         */\r\n        function create(title, command) {\r\n            var args = [];\r\n            for (var _i = 2; _i < arguments.length; _i++) {\r\n                args[_i - 2] = arguments[_i];\r\n            }\r\n            var result = { title: title, command: command };\r\n            if (Is.defined(args) && args.length > 0) {\r\n                result.arguments = args;\r\n            }\r\n            return result;\r\n        }\r\n        Command.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n        }\r\n        Command.is = is;\r\n    })(Command = exports.Command || (exports.Command = {}));\r\n    /**\r\n     * The TextEdit namespace provides helper function to create replace,\r\n     * insert and delete edits more easily.\r\n     */\r\n    var TextEdit;\r\n    (function (TextEdit) {\r\n        /**\r\n         * Creates a replace text edit.\r\n         * @param range The range of text to be replaced.\r\n         * @param newText The new text.\r\n         */\r\n        function replace(range, newText) {\r\n            return { range: range, newText: newText };\r\n        }\r\n        TextEdit.replace = replace;\r\n        /**\r\n         * Creates a insert text edit.\r\n         * @param position The position to insert the text at.\r\n         * @param newText The text to be inserted.\r\n         */\r\n        function insert(position, newText) {\r\n            return { range: { start: position, end: position }, newText: newText };\r\n        }\r\n        TextEdit.insert = insert;\r\n        /**\r\n         * Creates a delete text edit.\r\n         * @param range The range of text to be deleted.\r\n         */\r\n        function del(range) {\r\n            return { range: range, newText: '' };\r\n        }\r\n        TextEdit.del = del;\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.objectLiteral(candidate)\r\n                && Is.string(candidate.newText)\r\n                && Range.is(candidate.range);\r\n        }\r\n        TextEdit.is = is;\r\n    })(TextEdit = exports.TextEdit || (exports.TextEdit = {}));\r\n    /**\r\n     * The TextDocumentEdit namespace provides helper function to create\r\n     * an edit that manipulates a text document.\r\n     */\r\n    var TextDocumentEdit;\r\n    (function (TextDocumentEdit) {\r\n        /**\r\n         * Creates a new `TextDocumentEdit`\r\n         */\r\n        function create(textDocument, edits) {\r\n            return { textDocument: textDocument, edits: edits };\r\n        }\r\n        TextDocumentEdit.create = create;\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate)\r\n                && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n                && Array.isArray(candidate.edits);\r\n        }\r\n        TextDocumentEdit.is = is;\r\n    })(TextDocumentEdit = exports.TextDocumentEdit || (exports.TextDocumentEdit = {}));\r\n    var CreateFile;\r\n    (function (CreateFile) {\r\n        function create(uri, options) {\r\n            var result = {\r\n                kind: 'create',\r\n                uri: uri\r\n            };\r\n            if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n                result.options = options;\r\n            }\r\n            return result;\r\n        }\r\n        CreateFile.create = create;\r\n        function is(value) {\r\n            var candidate = value;\r\n            return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n                (candidate.options === void 0 ||\r\n                    ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n        }\r\n        CreateFile.is = is;\r\n    })(CreateFile = exports.CreateFile || (exports.CreateFile = {}));\r\n    var RenameFile;\r\n    (function (RenameFile) {\r\n        function create(oldUri, newUri, options) {\r\n            var result = {\r\n                kind: 'rename',\r\n                oldUri: oldUri,\r\n                newUri: newUri\r\n            };\r\n            if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n                result.options = options;\r\n            }\r\n            return result;\r\n        }\r\n        RenameFile.create = create;\r\n        function is(value) {\r\n            var candidate = value;\r\n            return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n                (candidate.options === void 0 ||\r\n                    ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n        }\r\n        RenameFile.is = is;\r\n    })(RenameFile = exports.RenameFile || (exports.RenameFile = {}));\r\n    var DeleteFile;\r\n    (function (DeleteFile) {\r\n        function create(uri, options) {\r\n            var result = {\r\n                kind: 'delete',\r\n                uri: uri\r\n            };\r\n            if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n                result.options = options;\r\n            }\r\n            return result;\r\n        }\r\n        DeleteFile.create = create;\r\n        function is(value) {\r\n            var candidate = value;\r\n            return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n                (candidate.options === void 0 ||\r\n                    ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n        }\r\n        DeleteFile.is = is;\r\n    })(DeleteFile = exports.DeleteFile || (exports.DeleteFile = {}));\r\n    var WorkspaceEdit;\r\n    (function (WorkspaceEdit) {\r\n        function is(value) {\r\n            var candidate = value;\r\n            return candidate &&\r\n                (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n                (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                    if (Is.string(change.kind)) {\r\n                        return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                    }\r\n                    else {\r\n                        return TextDocumentEdit.is(change);\r\n                    }\r\n                }));\r\n        }\r\n        WorkspaceEdit.is = is;\r\n    })(WorkspaceEdit = exports.WorkspaceEdit || (exports.WorkspaceEdit = {}));\r\n    var TextEditChangeImpl = /** @class */ (function () {\r\n        function TextEditChangeImpl(edits) {\r\n            this.edits = edits;\r\n        }\r\n        TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n            this.edits.push(TextEdit.insert(position, newText));\r\n        };\r\n        TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n            this.edits.push(TextEdit.replace(range, newText));\r\n        };\r\n        TextEditChangeImpl.prototype.delete = function (range) {\r\n            this.edits.push(TextEdit.del(range));\r\n        };\r\n        TextEditChangeImpl.prototype.add = function (edit) {\r\n            this.edits.push(edit);\r\n        };\r\n        TextEditChangeImpl.prototype.all = function () {\r\n            return this.edits;\r\n        };\r\n        TextEditChangeImpl.prototype.clear = function () {\r\n            this.edits.splice(0, this.edits.length);\r\n        };\r\n        return TextEditChangeImpl;\r\n    }());\r\n    /**\r\n     * A workspace change helps constructing changes to a workspace.\r\n     */\r\n    var WorkspaceChange = /** @class */ (function () {\r\n        function WorkspaceChange(workspaceEdit) {\r\n            var _this = this;\r\n            this._textEditChanges = Object.create(null);\r\n            if (workspaceEdit) {\r\n                this._workspaceEdit = workspaceEdit;\r\n                if (workspaceEdit.documentChanges) {\r\n                    workspaceEdit.documentChanges.forEach(function (change) {\r\n                        if (TextDocumentEdit.is(change)) {\r\n                            var textEditChange = new TextEditChangeImpl(change.edits);\r\n                            _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                        }\r\n                    });\r\n                }\r\n                else if (workspaceEdit.changes) {\r\n                    Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                        var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                        _this._textEditChanges[key] = textEditChange;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n            /**\r\n             * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n             * use to be returned from a workspace edit operation like rename.\r\n             */\r\n            get: function () {\r\n                return this._workspaceEdit;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n            if (VersionedTextDocumentIdentifier.is(key)) {\r\n                if (!this._workspaceEdit) {\r\n                    this._workspaceEdit = {\r\n                        documentChanges: []\r\n                    };\r\n                }\r\n                if (!this._workspaceEdit.documentChanges) {\r\n                    throw new Error('Workspace edit is not configured for document changes.');\r\n                }\r\n                var textDocument = key;\r\n                var result = this._textEditChanges[textDocument.uri];\r\n                if (!result) {\r\n                    var edits = [];\r\n                    var textDocumentEdit = {\r\n                        textDocument: textDocument,\r\n                        edits: edits\r\n                    };\r\n                    this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                    result = new TextEditChangeImpl(edits);\r\n                    this._textEditChanges[textDocument.uri] = result;\r\n                }\r\n                return result;\r\n            }\r\n            else {\r\n                if (!this._workspaceEdit) {\r\n                    this._workspaceEdit = {\r\n                        changes: Object.create(null)\r\n                    };\r\n                }\r\n                if (!this._workspaceEdit.changes) {\r\n                    throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n                }\r\n                var result = this._textEditChanges[key];\r\n                if (!result) {\r\n                    var edits = [];\r\n                    this._workspaceEdit.changes[key] = edits;\r\n                    result = new TextEditChangeImpl(edits);\r\n                    this._textEditChanges[key] = result;\r\n                }\r\n                return result;\r\n            }\r\n        };\r\n        WorkspaceChange.prototype.createFile = function (uri, options) {\r\n            this.checkDocumentChanges();\r\n            this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n        };\r\n        WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n            this.checkDocumentChanges();\r\n            this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n        };\r\n        WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n            this.checkDocumentChanges();\r\n            this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n        };\r\n        WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n            if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n        };\r\n        return WorkspaceChange;\r\n    }());\r\n    exports.WorkspaceChange = WorkspaceChange;\r\n    /**\r\n     * The TextDocumentIdentifier namespace provides helper functions to work with\r\n     * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n     */\r\n    var TextDocumentIdentifier;\r\n    (function (TextDocumentIdentifier) {\r\n        /**\r\n         * Creates a new TextDocumentIdentifier literal.\r\n         * @param uri The document's uri.\r\n         */\r\n        function create(uri) {\r\n            return { uri: uri };\r\n        }\r\n        TextDocumentIdentifier.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.string(candidate.uri);\r\n        }\r\n        TextDocumentIdentifier.is = is;\r\n    })(TextDocumentIdentifier = exports.TextDocumentIdentifier || (exports.TextDocumentIdentifier = {}));\r\n    /**\r\n     * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n     * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n     */\r\n    var VersionedTextDocumentIdentifier;\r\n    (function (VersionedTextDocumentIdentifier) {\r\n        /**\r\n         * Creates a new VersionedTextDocumentIdentifier literal.\r\n         * @param uri The document's uri.\r\n         * @param uri The document's text.\r\n         */\r\n        function create(uri, version) {\r\n            return { uri: uri, version: version };\r\n        }\r\n        VersionedTextDocumentIdentifier.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n        }\r\n        VersionedTextDocumentIdentifier.is = is;\r\n    })(VersionedTextDocumentIdentifier = exports.VersionedTextDocumentIdentifier || (exports.VersionedTextDocumentIdentifier = {}));\r\n    /**\r\n     * The TextDocumentItem namespace provides helper functions to work with\r\n     * [TextDocumentItem](#TextDocumentItem) literals.\r\n     */\r\n    var TextDocumentItem;\r\n    (function (TextDocumentItem) {\r\n        /**\r\n         * Creates a new TextDocumentItem literal.\r\n         * @param uri The document's uri.\r\n         * @param languageId The document's language identifier.\r\n         * @param version The document's version number.\r\n         * @param text The document's text.\r\n         */\r\n        function create(uri, languageId, version, text) {\r\n            return { uri: uri, languageId: languageId, version: version, text: text };\r\n        }\r\n        TextDocumentItem.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n        }\r\n        TextDocumentItem.is = is;\r\n    })(TextDocumentItem = exports.TextDocumentItem || (exports.TextDocumentItem = {}));\r\n    /**\r\n     * Describes the content type that a client supports in various\r\n     * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n     *\r\n     * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n     * are reserved for internal usage.\r\n     */\r\n    var MarkupKind;\r\n    (function (MarkupKind) {\r\n        /**\r\n         * Plain text is supported as a content format\r\n         */\r\n        MarkupKind.PlainText = 'plaintext';\r\n        /**\r\n         * Markdown is supported as a content format\r\n         */\r\n        MarkupKind.Markdown = 'markdown';\r\n    })(MarkupKind = exports.MarkupKind || (exports.MarkupKind = {}));\r\n    (function (MarkupKind) {\r\n        /**\r\n         * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n        }\r\n        MarkupKind.is = is;\r\n    })(MarkupKind = exports.MarkupKind || (exports.MarkupKind = {}));\r\n    var MarkupContent;\r\n    (function (MarkupContent) {\r\n        /**\r\n         * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n        }\r\n        MarkupContent.is = is;\r\n    })(MarkupContent = exports.MarkupContent || (exports.MarkupContent = {}));\r\n    /**\r\n     * The kind of a completion entry.\r\n     */\r\n    var CompletionItemKind;\r\n    (function (CompletionItemKind) {\r\n        CompletionItemKind.Text = 1;\r\n        CompletionItemKind.Method = 2;\r\n        CompletionItemKind.Function = 3;\r\n        CompletionItemKind.Constructor = 4;\r\n        CompletionItemKind.Field = 5;\r\n        CompletionItemKind.Variable = 6;\r\n        CompletionItemKind.Class = 7;\r\n        CompletionItemKind.Interface = 8;\r\n        CompletionItemKind.Module = 9;\r\n        CompletionItemKind.Property = 10;\r\n        CompletionItemKind.Unit = 11;\r\n        CompletionItemKind.Value = 12;\r\n        CompletionItemKind.Enum = 13;\r\n        CompletionItemKind.Keyword = 14;\r\n        CompletionItemKind.Snippet = 15;\r\n        CompletionItemKind.Color = 16;\r\n        CompletionItemKind.File = 17;\r\n        CompletionItemKind.Reference = 18;\r\n        CompletionItemKind.Folder = 19;\r\n        CompletionItemKind.EnumMember = 20;\r\n        CompletionItemKind.Constant = 21;\r\n        CompletionItemKind.Struct = 22;\r\n        CompletionItemKind.Event = 23;\r\n        CompletionItemKind.Operator = 24;\r\n        CompletionItemKind.TypeParameter = 25;\r\n    })(CompletionItemKind = exports.CompletionItemKind || (exports.CompletionItemKind = {}));\r\n    /**\r\n     * Defines whether the insert text in a completion item should be interpreted as\r\n     * plain text or a snippet.\r\n     */\r\n    var InsertTextFormat;\r\n    (function (InsertTextFormat) {\r\n        /**\r\n         * The primary text to be inserted is treated as a plain string.\r\n         */\r\n        InsertTextFormat.PlainText = 1;\r\n        /**\r\n         * The primary text to be inserted is treated as a snippet.\r\n         *\r\n         * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n         * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n         * the end of the snippet. Placeholders with equal identifiers are linked,\r\n         * that is typing in one will update others too.\r\n         *\r\n         * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n         */\r\n        InsertTextFormat.Snippet = 2;\r\n    })(InsertTextFormat = exports.InsertTextFormat || (exports.InsertTextFormat = {}));\r\n    /**\r\n     * The CompletionItem namespace provides functions to deal with\r\n     * completion items.\r\n     */\r\n    var CompletionItem;\r\n    (function (CompletionItem) {\r\n        /**\r\n         * Create a completion item and seed it with a label.\r\n         * @param label The completion item's label\r\n         */\r\n        function create(label) {\r\n            return { label: label };\r\n        }\r\n        CompletionItem.create = create;\r\n    })(CompletionItem = exports.CompletionItem || (exports.CompletionItem = {}));\r\n    /**\r\n     * The CompletionList namespace provides functions to deal with\r\n     * completion lists.\r\n     */\r\n    var CompletionList;\r\n    (function (CompletionList) {\r\n        /**\r\n         * Creates a new completion list.\r\n         *\r\n         * @param items The completion items.\r\n         * @param isIncomplete The list is not complete.\r\n         */\r\n        function create(items, isIncomplete) {\r\n            return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n        }\r\n        CompletionList.create = create;\r\n    })(CompletionList = exports.CompletionList || (exports.CompletionList = {}));\r\n    var MarkedString;\r\n    (function (MarkedString) {\r\n        /**\r\n         * Creates a marked string from plain text.\r\n         *\r\n         * @param plainText The plain text.\r\n         */\r\n        function fromPlainText(plainText) {\r\n            return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n        }\r\n        MarkedString.fromPlainText = fromPlainText;\r\n        /**\r\n         * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n        }\r\n        MarkedString.is = is;\r\n    })(MarkedString = exports.MarkedString || (exports.MarkedString = {}));\r\n    var Hover;\r\n    (function (Hover) {\r\n        /**\r\n         * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n                MarkedString.is(candidate.contents) ||\r\n                Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n        }\r\n        Hover.is = is;\r\n    })(Hover = exports.Hover || (exports.Hover = {}));\r\n    /**\r\n     * The ParameterInformation namespace provides helper functions to work with\r\n     * [ParameterInformation](#ParameterInformation) literals.\r\n     */\r\n    var ParameterInformation;\r\n    (function (ParameterInformation) {\r\n        /**\r\n         * Creates a new parameter information literal.\r\n         *\r\n         * @param label A label string.\r\n         * @param documentation A doc string.\r\n         */\r\n        function create(label, documentation) {\r\n            return documentation ? { label: label, documentation: documentation } : { label: label };\r\n        }\r\n        ParameterInformation.create = create;\r\n        ;\r\n    })(ParameterInformation = exports.ParameterInformation || (exports.ParameterInformation = {}));\r\n    /**\r\n     * The SignatureInformation namespace provides helper functions to work with\r\n     * [SignatureInformation](#SignatureInformation) literals.\r\n     */\r\n    var SignatureInformation;\r\n    (function (SignatureInformation) {\r\n        function create(label, documentation) {\r\n            var parameters = [];\r\n            for (var _i = 2; _i < arguments.length; _i++) {\r\n                parameters[_i - 2] = arguments[_i];\r\n            }\r\n            var result = { label: label };\r\n            if (Is.defined(documentation)) {\r\n                result.documentation = documentation;\r\n            }\r\n            if (Is.defined(parameters)) {\r\n                result.parameters = parameters;\r\n            }\r\n            else {\r\n                result.parameters = [];\r\n            }\r\n            return result;\r\n        }\r\n        SignatureInformation.create = create;\r\n    })(SignatureInformation = exports.SignatureInformation || (exports.SignatureInformation = {}));\r\n    /**\r\n     * A document highlight kind.\r\n     */\r\n    var DocumentHighlightKind;\r\n    (function (DocumentHighlightKind) {\r\n        /**\r\n         * A textual occurrence.\r\n         */\r\n        DocumentHighlightKind.Text = 1;\r\n        /**\r\n         * Read-access of a symbol, like reading a variable.\r\n         */\r\n        DocumentHighlightKind.Read = 2;\r\n        /**\r\n         * Write-access of a symbol, like writing to a variable.\r\n         */\r\n        DocumentHighlightKind.Write = 3;\r\n    })(DocumentHighlightKind = exports.DocumentHighlightKind || (exports.DocumentHighlightKind = {}));\r\n    /**\r\n     * DocumentHighlight namespace to provide helper functions to work with\r\n     * [DocumentHighlight](#DocumentHighlight) literals.\r\n     */\r\n    var DocumentHighlight;\r\n    (function (DocumentHighlight) {\r\n        /**\r\n         * Create a DocumentHighlight object.\r\n         * @param range The range the highlight applies to.\r\n         */\r\n        function create(range, kind) {\r\n            var result = { range: range };\r\n            if (Is.number(kind)) {\r\n                result.kind = kind;\r\n            }\r\n            return result;\r\n        }\r\n        DocumentHighlight.create = create;\r\n    })(DocumentHighlight = exports.DocumentHighlight || (exports.DocumentHighlight = {}));\r\n    /**\r\n     * A symbol kind.\r\n     */\r\n    var SymbolKind;\r\n    (function (SymbolKind) {\r\n        SymbolKind.File = 1;\r\n        SymbolKind.Module = 2;\r\n        SymbolKind.Namespace = 3;\r\n        SymbolKind.Package = 4;\r\n        SymbolKind.Class = 5;\r\n        SymbolKind.Method = 6;\r\n        SymbolKind.Property = 7;\r\n        SymbolKind.Field = 8;\r\n        SymbolKind.Constructor = 9;\r\n        SymbolKind.Enum = 10;\r\n        SymbolKind.Interface = 11;\r\n        SymbolKind.Function = 12;\r\n        SymbolKind.Variable = 13;\r\n        SymbolKind.Constant = 14;\r\n        SymbolKind.String = 15;\r\n        SymbolKind.Number = 16;\r\n        SymbolKind.Boolean = 17;\r\n        SymbolKind.Array = 18;\r\n        SymbolKind.Object = 19;\r\n        SymbolKind.Key = 20;\r\n        SymbolKind.Null = 21;\r\n        SymbolKind.EnumMember = 22;\r\n        SymbolKind.Struct = 23;\r\n        SymbolKind.Event = 24;\r\n        SymbolKind.Operator = 25;\r\n        SymbolKind.TypeParameter = 26;\r\n    })(SymbolKind = exports.SymbolKind || (exports.SymbolKind = {}));\r\n    var SymbolInformation;\r\n    (function (SymbolInformation) {\r\n        /**\r\n         * Creates a new symbol information literal.\r\n         *\r\n         * @param name The name of the symbol.\r\n         * @param kind The kind of the symbol.\r\n         * @param range The range of the location of the symbol.\r\n         * @param uri The resource of the location of symbol, defaults to the current document.\r\n         * @param containerName The name of the symbol containing the symbol.\r\n         */\r\n        function create(name, kind, range, uri, containerName) {\r\n            var result = {\r\n                name: name,\r\n                kind: kind,\r\n                location: { uri: uri, range: range }\r\n            };\r\n            if (containerName) {\r\n                result.containerName = containerName;\r\n            }\r\n            return result;\r\n        }\r\n        SymbolInformation.create = create;\r\n    })(SymbolInformation = exports.SymbolInformation || (exports.SymbolInformation = {}));\r\n    /**\r\n     * Represents programming constructs like variables, classes, interfaces etc.\r\n     * that appear in a document. Document symbols can be hierarchical and they\r\n     * have two ranges: one that encloses its definition and one that points to\r\n     * its most interesting range, e.g. the range of an identifier.\r\n     */\r\n    var DocumentSymbol = /** @class */ (function () {\r\n        function DocumentSymbol() {\r\n        }\r\n        return DocumentSymbol;\r\n    }());\r\n    exports.DocumentSymbol = DocumentSymbol;\r\n    (function (DocumentSymbol) {\r\n        /**\r\n         * Creates a new symbol information literal.\r\n         *\r\n         * @param name The name of the symbol.\r\n         * @param detail The detail of the symbol.\r\n         * @param kind The kind of the symbol.\r\n         * @param range The range of the symbol.\r\n         * @param selectionRange The selectionRange of the symbol.\r\n         * @param children Children of the symbol.\r\n         */\r\n        function create(name, detail, kind, range, selectionRange, children) {\r\n            var result = {\r\n                name: name,\r\n                detail: detail,\r\n                kind: kind,\r\n                range: range,\r\n                selectionRange: selectionRange\r\n            };\r\n            if (children !== void 0) {\r\n                result.children = children;\r\n            }\r\n            return result;\r\n        }\r\n        DocumentSymbol.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return candidate &&\r\n                Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n                Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n                (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n                (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n                (candidate.children === void 0 || Array.isArray(candidate.children));\r\n        }\r\n        DocumentSymbol.is = is;\r\n    })(DocumentSymbol = exports.DocumentSymbol || (exports.DocumentSymbol = {}));\r\n    exports.DocumentSymbol = DocumentSymbol;\r\n    /**\r\n     * A set of predefined code action kinds\r\n     */\r\n    var CodeActionKind;\r\n    (function (CodeActionKind) {\r\n        /**\r\n         * Base kind for quickfix actions: 'quickfix'\r\n         */\r\n        CodeActionKind.QuickFix = 'quickfix';\r\n        /**\r\n         * Base kind for refactoring actions: 'refactor'\r\n         */\r\n        CodeActionKind.Refactor = 'refactor';\r\n        /**\r\n         * Base kind for refactoring extraction actions: 'refactor.extract'\r\n         *\r\n         * Example extract actions:\r\n         *\r\n         * - Extract method\r\n         * - Extract function\r\n         * - Extract variable\r\n         * - Extract interface from class\r\n         * - ...\r\n         */\r\n        CodeActionKind.RefactorExtract = 'refactor.extract';\r\n        /**\r\n         * Base kind for refactoring inline actions: 'refactor.inline'\r\n         *\r\n         * Example inline actions:\r\n         *\r\n         * - Inline function\r\n         * - Inline variable\r\n         * - Inline constant\r\n         * - ...\r\n         */\r\n        CodeActionKind.RefactorInline = 'refactor.inline';\r\n        /**\r\n         * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n         *\r\n         * Example rewrite actions:\r\n         *\r\n         * - Convert JavaScript function to class\r\n         * - Add or remove parameter\r\n         * - Encapsulate field\r\n         * - Make method static\r\n         * - Move method to base class\r\n         * - ...\r\n         */\r\n        CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n        /**\r\n         * Base kind for source actions: `source`\r\n         *\r\n         * Source code actions apply to the entire file.\r\n         */\r\n        CodeActionKind.Source = 'source';\r\n        /**\r\n         * Base kind for an organize imports source action: `source.organizeImports`\r\n         */\r\n        CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    })(CodeActionKind = exports.CodeActionKind || (exports.CodeActionKind = {}));\r\n    /**\r\n     * The CodeActionContext namespace provides helper functions to work with\r\n     * [CodeActionContext](#CodeActionContext) literals.\r\n     */\r\n    var CodeActionContext;\r\n    (function (CodeActionContext) {\r\n        /**\r\n         * Creates a new CodeActionContext literal.\r\n         */\r\n        function create(diagnostics, only) {\r\n            var result = { diagnostics: diagnostics };\r\n            if (only !== void 0 && only !== null) {\r\n                result.only = only;\r\n            }\r\n            return result;\r\n        }\r\n        CodeActionContext.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n        }\r\n        CodeActionContext.is = is;\r\n    })(CodeActionContext = exports.CodeActionContext || (exports.CodeActionContext = {}));\r\n    var CodeAction;\r\n    (function (CodeAction) {\r\n        function create(title, commandOrEdit, kind) {\r\n            var result = { title: title };\r\n            if (Command.is(commandOrEdit)) {\r\n                result.command = commandOrEdit;\r\n            }\r\n            else {\r\n                result.edit = commandOrEdit;\r\n            }\r\n            if (kind !== void null) {\r\n                result.kind = kind;\r\n            }\r\n            return result;\r\n        }\r\n        CodeAction.create = create;\r\n        function is(value) {\r\n            var candidate = value;\r\n            return candidate && Is.string(candidate.title) &&\r\n                (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n                (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n                (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n                (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n                (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n        }\r\n        CodeAction.is = is;\r\n    })(CodeAction = exports.CodeAction || (exports.CodeAction = {}));\r\n    /**\r\n     * The CodeLens namespace provides helper functions to work with\r\n     * [CodeLens](#CodeLens) literals.\r\n     */\r\n    var CodeLens;\r\n    (function (CodeLens) {\r\n        /**\r\n         * Creates a new CodeLens literal.\r\n         */\r\n        function create(range, data) {\r\n            var result = { range: range };\r\n            if (Is.defined(data))\r\n                result.data = data;\r\n            return result;\r\n        }\r\n        CodeLens.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n        }\r\n        CodeLens.is = is;\r\n    })(CodeLens = exports.CodeLens || (exports.CodeLens = {}));\r\n    /**\r\n     * The FormattingOptions namespace provides helper functions to work with\r\n     * [FormattingOptions](#FormattingOptions) literals.\r\n     */\r\n    var FormattingOptions;\r\n    (function (FormattingOptions) {\r\n        /**\r\n         * Creates a new FormattingOptions literal.\r\n         */\r\n        function create(tabSize, insertSpaces) {\r\n            return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n        }\r\n        FormattingOptions.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n        }\r\n        FormattingOptions.is = is;\r\n    })(FormattingOptions = exports.FormattingOptions || (exports.FormattingOptions = {}));\r\n    /**\r\n     * A document link is a range in a text document that links to an internal or external resource, like another\r\n     * text document or a web site.\r\n     */\r\n    var DocumentLink = /** @class */ (function () {\r\n        function DocumentLink() {\r\n        }\r\n        return DocumentLink;\r\n    }());\r\n    exports.DocumentLink = DocumentLink;\r\n    /**\r\n     * The DocumentLink namespace provides helper functions to work with\r\n     * [DocumentLink](#DocumentLink) literals.\r\n     */\r\n    (function (DocumentLink) {\r\n        /**\r\n         * Creates a new DocumentLink literal.\r\n         */\r\n        function create(range, target, data) {\r\n            return { range: range, target: target, data: data };\r\n        }\r\n        DocumentLink.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n        }\r\n        DocumentLink.is = is;\r\n    })(DocumentLink = exports.DocumentLink || (exports.DocumentLink = {}));\r\n    exports.DocumentLink = DocumentLink;\r\n    exports.EOL = ['\\n', '\\r\\n', '\\r'];\r\n    var TextDocument;\r\n    (function (TextDocument) {\r\n        /**\r\n         * Creates a new ITextDocument literal from the given uri and content.\r\n         * @param uri The document's uri.\r\n         * @param languageId  The document's language Id.\r\n         * @param content The document's content.\r\n         */\r\n        function create(uri, languageId, version, content) {\r\n            return new FullTextDocument(uri, languageId, version, content);\r\n        }\r\n        TextDocument.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n                && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n        }\r\n        TextDocument.is = is;\r\n        function applyEdits(document, edits) {\r\n            var text = document.getText();\r\n            var sortedEdits = mergeSort(edits, function (a, b) {\r\n                var diff = a.range.start.line - b.range.start.line;\r\n                if (diff === 0) {\r\n                    return a.range.start.character - b.range.start.character;\r\n                }\r\n                return diff;\r\n            });\r\n            var lastModifiedOffset = text.length;\r\n            for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n                var e = sortedEdits[i];\r\n                var startOffset = document.offsetAt(e.range.start);\r\n                var endOffset = document.offsetAt(e.range.end);\r\n                if (endOffset <= lastModifiedOffset) {\r\n                    text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n                }\r\n                else {\r\n                    throw new Error('Overlapping edit');\r\n                }\r\n                lastModifiedOffset = startOffset;\r\n            }\r\n            return text;\r\n        }\r\n        TextDocument.applyEdits = applyEdits;\r\n        function mergeSort(data, compare) {\r\n            if (data.length <= 1) {\r\n                // sorted\r\n                return data;\r\n            }\r\n            var p = (data.length / 2) | 0;\r\n            var left = data.slice(0, p);\r\n            var right = data.slice(p);\r\n            mergeSort(left, compare);\r\n            mergeSort(right, compare);\r\n            var leftIdx = 0;\r\n            var rightIdx = 0;\r\n            var i = 0;\r\n            while (leftIdx < left.length && rightIdx < right.length) {\r\n                var ret = compare(left[leftIdx], right[rightIdx]);\r\n                if (ret <= 0) {\r\n                    // smaller_equal -> take left to preserve order\r\n                    data[i++] = left[leftIdx++];\r\n                }\r\n                else {\r\n                    // greater -> take right\r\n                    data[i++] = right[rightIdx++];\r\n                }\r\n            }\r\n            while (leftIdx < left.length) {\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            while (rightIdx < right.length) {\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n            return data;\r\n        }\r\n    })(TextDocument = exports.TextDocument || (exports.TextDocument = {}));\r\n    /**\r\n     * Represents reasons why a text document is saved.\r\n     */\r\n    var TextDocumentSaveReason;\r\n    (function (TextDocumentSaveReason) {\r\n        /**\r\n         * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n         * or by an API call.\r\n         */\r\n        TextDocumentSaveReason.Manual = 1;\r\n        /**\r\n         * Automatic after a delay.\r\n         */\r\n        TextDocumentSaveReason.AfterDelay = 2;\r\n        /**\r\n         * When the editor lost focus.\r\n         */\r\n        TextDocumentSaveReason.FocusOut = 3;\r\n    })(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n    var FullTextDocument = /** @class */ (function () {\r\n        function FullTextDocument(uri, languageId, version, content) {\r\n            this._uri = uri;\r\n            this._languageId = languageId;\r\n            this._version = version;\r\n            this._content = content;\r\n            this._lineOffsets = null;\r\n        }\r\n        Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n            get: function () {\r\n                return this._uri;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n            get: function () {\r\n                return this._languageId;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n            get: function () {\r\n                return this._version;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        FullTextDocument.prototype.getText = function (range) {\r\n            if (range) {\r\n                var start = this.offsetAt(range.start);\r\n                var end = this.offsetAt(range.end);\r\n                return this._content.substring(start, end);\r\n            }\r\n            return this._content;\r\n        };\r\n        FullTextDocument.prototype.update = function (event, version) {\r\n            this._content = event.text;\r\n            this._version = version;\r\n            this._lineOffsets = null;\r\n        };\r\n        FullTextDocument.prototype.getLineOffsets = function () {\r\n            if (this._lineOffsets === null) {\r\n                var lineOffsets = [];\r\n                var text = this._content;\r\n                var isLineStart = true;\r\n                for (var i = 0; i < text.length; i++) {\r\n                    if (isLineStart) {\r\n                        lineOffsets.push(i);\r\n                        isLineStart = false;\r\n                    }\r\n                    var ch = text.charAt(i);\r\n                    isLineStart = (ch === '\\r' || ch === '\\n');\r\n                    if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                        i++;\r\n                    }\r\n                }\r\n                if (isLineStart && text.length > 0) {\r\n                    lineOffsets.push(text.length);\r\n                }\r\n                this._lineOffsets = lineOffsets;\r\n            }\r\n            return this._lineOffsets;\r\n        };\r\n        FullTextDocument.prototype.positionAt = function (offset) {\r\n            offset = Math.max(Math.min(offset, this._content.length), 0);\r\n            var lineOffsets = this.getLineOffsets();\r\n            var low = 0, high = lineOffsets.length;\r\n            if (high === 0) {\r\n                return Position.create(0, offset);\r\n            }\r\n            while (low < high) {\r\n                var mid = Math.floor((low + high) / 2);\r\n                if (lineOffsets[mid] > offset) {\r\n                    high = mid;\r\n                }\r\n                else {\r\n                    low = mid + 1;\r\n                }\r\n            }\r\n            // low is the least x for which the line offset is larger than the current offset\r\n            // or array.length if no line offset is larger than the current offset\r\n            var line = low - 1;\r\n            return Position.create(line, offset - lineOffsets[line]);\r\n        };\r\n        FullTextDocument.prototype.offsetAt = function (position) {\r\n            var lineOffsets = this.getLineOffsets();\r\n            if (position.line >= lineOffsets.length) {\r\n                return this._content.length;\r\n            }\r\n            else if (position.line < 0) {\r\n                return 0;\r\n            }\r\n            var lineOffset = lineOffsets[position.line];\r\n            var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n            return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n        };\r\n        Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n            get: function () {\r\n                return this.getLineOffsets().length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return FullTextDocument;\r\n    }());\r\n    var Is;\r\n    (function (Is) {\r\n        var toString = Object.prototype.toString;\r\n        function defined(value) {\r\n            return typeof value !== 'undefined';\r\n        }\r\n        Is.defined = defined;\r\n        function undefined(value) {\r\n            return typeof value === 'undefined';\r\n        }\r\n        Is.undefined = undefined;\r\n        function boolean(value) {\r\n            return value === true || value === false;\r\n        }\r\n        Is.boolean = boolean;\r\n        function string(value) {\r\n            return toString.call(value) === '[object String]';\r\n        }\r\n        Is.string = string;\r\n        function number(value) {\r\n            return toString.call(value) === '[object Number]';\r\n        }\r\n        Is.number = number;\r\n        function func(value) {\r\n            return toString.call(value) === '[object Function]';\r\n        }\r\n        Is.func = func;\r\n        function objectLiteral(value) {\r\n            // Strictly speaking class instances pass this check as well. Since the LSP\r\n            // doesn't use classes we ignore this for now. If we do we need to add something\r\n            // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n            return value !== null && typeof value === 'object';\r\n        }\r\n        Is.objectLiteral = objectLiteral;\r\n        function typedArray(value, check) {\r\n            return Array.isArray(value) && value.every(check);\r\n        }\r\n        Is.typedArray = typedArray;\r\n    })(Is || (Is = {}));\r\n});\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/implementation');\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/typeDefinition');\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new vscode_jsonrpc_1.RequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new vscode_jsonrpc_1.RequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentColor');\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n", "\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/foldingRange');\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/declaration');\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guaruntee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new vscode_jsonrpc_1.RequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new vscode_jsonrpc_1.NotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new vscode_jsonrpc_1.RequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new vscode_jsonrpc_1.NotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n//---- Configuration notification ----\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new vscode_jsonrpc_1.RequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new vscode_jsonrpc_1.NotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didOpen');\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didChange');\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didClose');\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didSave');\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/willSave');\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/willSaveWaitUntil');\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n//---- File eventing ----\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n//---- Diagnostic notification ----\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/completion');\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.type = new vscode_jsonrpc_1.RequestType('completionItem/resolve');\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n//---- Hover Support -------------------------------\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/hover');\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/signatureHelp');\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n//---- Goto Definition -------------------------------------\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/definition');\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/references');\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n//---- Document Highlight ----------------------------------\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentHighlight');\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n//---- Document Symbol Provider ---------------------------\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentSymbol');\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n//---- Workspace Symbol Provider ---------------------------\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.type = new vscode_jsonrpc_1.RequestType('workspace/symbol');\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeAction');\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeLens');\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new vscode_jsonrpc_1.RequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/formatting');\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rangeFormatting');\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/onTypeFormatting');\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rename');\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/prepareRename');\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentLink');\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new vscode_jsonrpc_1.RequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new vscode_jsonrpc_1.RequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new vscode_jsonrpc_1.RequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === void 0) {\r\n            return undefined;\r\n        }\r\n        else if (value === null) {\r\n            return null;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asRange(value) {\r\n        if (value === void 0 || value === null) {\r\n            return value;\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === void 0 || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== void 0) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== void 0) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text && range) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === void 0 || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === void 0 || context === null) {\r\n            return context;\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), Is.string(context.only) ? [context.only] : undefined);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n            ;\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === void 0 || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        ;\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        ;\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== void 0) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        ;\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === void 0 || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== void 0 && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set('', code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === void 0 || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== void 0) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return void 0;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) != 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) != 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.completionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.completionProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        let client = this._client;\r\n        let provideCompletionItems = (document, position, context, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCompletionItem = (item, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                return Promise.resolve(item);\r\n            });\r\n        };\r\n        let middleware = this._client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCompletionItemProvider(options.documentSelector, {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.hoverProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideHover = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerHoverProvider(options.documentSelector, {\r\n            provideHover: (document, position, token) => {\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.signatureHelpProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.signatureHelpProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerSignatureHelp = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        return vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, {\r\n            provideSignatureHelp: (document, position, token) => {\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, token);\r\n            }\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.definitionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDefinitionProvider(options.documentSelector, {\r\n            provideDefinition: (document, position, token) => {\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.referencesProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerReferences = (document, position, options, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerReferenceProvider(options.documentSelector, {\r\n            provideReferences: (document, position, options, token) => {\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, providerReferences)\r\n                    : providerReferences(document, position, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentHighlightProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentHighlights = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, provideDocumentHighlights)\r\n                    : provideDocumentHighlights(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentSymbolProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentSymbols = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                if (data === null) {\r\n                    return undefined;\r\n                }\r\n                if (data.length === 0) {\r\n                    return [];\r\n                }\r\n                else {\r\n                    let element = data[0];\r\n                    if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                        return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                    }\r\n                    else {\r\n                        return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                    }\r\n                }\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, {\r\n            provideDocumentSymbols: (document, token) => {\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, provideDocumentSymbols)\r\n                    : provideDocumentSymbols(document, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: undefined\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        let client = this._client;\r\n        let provideWorkspaceSymbols = (query, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerWorkspaceSymbolProvider({\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    '',\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.codeActionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        let codeActionKinds = undefined;\r\n        if (!Is.boolean(capabilities.codeActionProvider)) {\r\n            codeActionKinds = capabilities.codeActionProvider.codeActionKinds;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: { documentSelector: documentSelector, codeActionKinds }\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeActions = (document, range, context, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                if (values === null) {\r\n                    return undefined;\r\n                }\r\n                let result = [];\r\n                for (let item of values) {\r\n                    if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                        result.push(client.protocol2CodeConverter.asCommand(item));\r\n                    }\r\n                    else {\r\n                        result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                    }\r\n                    ;\r\n                }\r\n                return result;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeActionsProvider(options.documentSelector, {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, provideCodeActions)\r\n                    : provideCodeActions(document, range, context, token);\r\n            }\r\n        }, options.codeActionKinds\r\n            ? { providedCodeActionKinds: client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n            : undefined);\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.codeLensProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.codeLensProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeLenses = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCodeLens = (codeLens, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                return codeLens;\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeLensProvider(options.documentSelector, {\r\n            provideCodeLenses: (document, token) => {\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentFormattingEdits = (document, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentRangeFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentOnTypeFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentOnTypeFormattingProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        let provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                ch: ch,\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        }, options.firstTriggerCharacter, ...moreTriggerCharacter);\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.renameProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        let options = Object.assign({}, { documentSelector: documentSelector });\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        else {\r\n            options.prepareProvider = capabilities.renameProvider.prepareProvider;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideRenameEdits = (document, position, newName, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                newName: newName\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let prepareRename = (document, position, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                    return client.protocol2CodeConverter.asRange(result);\r\n                }\r\n                else if (result && result.range) {\r\n                    return {\r\n                        range: client.protocol2CodeConverter.asRange(result.range),\r\n                        placeholder: result.placeholder\r\n                    };\r\n                }\r\n                return null;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerRenameProvider(options.documentSelector, {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentLink').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentLinkProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentLinkProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentLinks = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let resolveDocumentLink = (link, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, {\r\n            provideDocumentLinks: (document, token) => {\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        let client = this._client;\r\n        if (data.registerOptions.commands) {\r\n            let disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    let params = {\r\n                        command,\r\n                        arguments: args\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n                    });\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    warn(message, data) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    error(message, data) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    logTrace(message, data) {\r\n        this.outputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.outputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.outputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.outputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: \"retry\" }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp();\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel && this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        this._fileEvents.push(event);\r\n        this._fileEventDelayer.trigger(() => {\r\n            this.onReady().then(() => {\r\n                this.resolveConnection().then(connection => {\r\n                    if (this.isConnectionActive()) {\r\n                        connection.didChangeWatchedFiles({ changes: this._fileEvents });\r\n                    }\r\n                    this._fileEvents = [];\r\n                });\r\n            }, (error) => {\r\n                this.error(`Notify file events failed.`, error);\r\n            });\r\n        });\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware.handleDiagnostics;\r\n        if (middleware) {\r\n            middleware(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        ensure(ensure(result, 'textDocument'), 'publishDiagnostics').relatedInformation = true;\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            ;\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; });\r\n    }\r\n    ;\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.colorProvider) {\r\n            return;\r\n        }\r\n        const implCapabilities = capabilities.colorProvider;\r\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n        const selector = implCapabilities.documentSelector || documentSelector;\r\n        if (selector) {\r\n            this.register(this.messages, {\r\n                id,\r\n                registerOptions: Object.assign({}, { documentSelector: selector })\r\n            });\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideColorPresentations = (color, context, token) => {\r\n            const requestParams = {\r\n                color,\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                range: client.code2ProtocolConverter.asRange(context.range)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let provideDocumentColors = (document, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerColorProvider(options.documentSelector, {\r\n            provideColorPresentations: (color, context, token) => {\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        });\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index));\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.implementationProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.implementationProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const implCapabilities = capabilities.implementationProvider;\r\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n            const selector = implCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideImplementation = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerImplementationProvider(options.documentSelector, {\r\n            provideImplementation: (document, position, token) => {\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.typeDefinitionProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.typeDefinitionProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const implCapabilities = capabilities.typeDefinitionProvider;\r\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n            const selector = implCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideTypeDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                let params = {\r\n                    event: {\r\n                        added: event.added.map(folder => this.asProtocol(folder)),\r\n                        removed: event.removed.map(folder => this.asProtocol(folder))\r\n                    }\r\n                };\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.foldingRangeProvider) {\r\n            return;\r\n        }\r\n        const implCapabilities = capabilities.foldingRangeProvider;\r\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n        const selector = implCapabilities.documentSelector || documentSelector;\r\n        if (selector) {\r\n            this.register(this.messages, {\r\n                id,\r\n                registerOptions: Object.assign({}, { documentSelector: selector })\r\n            });\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideFoldingRanges = (document, _, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, {\r\n            provideFoldingRanges(document, context, token) {\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        });\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.declarationProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.declarationProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const declCapabilities = capabilities.declarationProvider;\r\n            const id = Is.string(declCapabilities.id) && declCapabilities.id.length > 0 ? declCapabilities.id : UUID.generateUuid();\r\n            const selector = declCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDeclaration = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDeclarationProvider(options.documentSelector, {\r\n            provideDeclaration: (document, position, token) => {\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst path_1 = require(\"path\");\r\nconst isWindows = (process.platform === 'win32');\r\nconst isMacintosh = (process.platform === 'darwin');\r\nconst isLinux = (process.platform === 'linux');\r\nfunction terminate(process, cwd) {\r\n    if (isWindows) {\r\n        try {\r\n            // This we run in Atom execFileSync is available.\r\n            // Ignore stderr since this is otherwise piped to parent.stderr\r\n            // which might be already closed.\r\n            let options = {\r\n                stdio: ['pipe', 'pipe', 'ignore']\r\n            };\r\n            if (cwd) {\r\n                options.cwd = cwd;\r\n            }\r\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else if (isLinux || isMacintosh) {\r\n        try {\r\n            var cmd = path_1.join(__dirname, 'terminateProcess.sh');\r\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\r\n            return result.error ? false : true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else {\r\n        process.kill('SIGKILL');\r\n        return true;\r\n    }\r\n}\r\nexports.terminate = terminate;\r\n", "/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst fs = require(\"fs\");\r\nconst SemVer = require(\"semver\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst colorProvider_1 = require(\"./colorProvider\");\r\nconst configuration_1 = require(\"./configuration\");\r\nconst implementation_1 = require(\"./implementation\");\r\nconst typeDefinition_1 = require(\"./typeDefinition\");\r\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\r\nconst foldingRange_1 = require(\"./foldingRange\");\r\nconst declaration_1 = require(\"./declaration\");\r\nconst Is = require(\"./utils/is\");\r\nconst processes_1 = require(\"./utils/processes\");\r\n__export(require(\"./client\"));\r\nconst REQUIRED_VSCODE_VERSION = '^1.30'; // do not change format, updated by `updateVSCode` script\r\nvar Executable;\r\n(function (Executable) {\r\n    function is(value) {\r\n        return Is.string(value.command);\r\n    }\r\n    Executable.is = is;\r\n})(Executable || (Executable = {}));\r\nvar TransportKind;\r\n(function (TransportKind) {\r\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\r\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\r\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\r\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\r\n})(TransportKind = exports.TransportKind || (exports.TransportKind = {}));\r\nvar Transport;\r\n(function (Transport) {\r\n    function isSocket(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\r\n    }\r\n    Transport.isSocket = isSocket;\r\n})(Transport || (Transport = {}));\r\nvar NodeModule;\r\n(function (NodeModule) {\r\n    function is(value) {\r\n        return Is.string(value.module);\r\n    }\r\n    NodeModule.is = is;\r\n})(NodeModule || (NodeModule = {}));\r\nvar StreamInfo;\r\n(function (StreamInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.writer !== void 0 && candidate.reader !== void 0;\r\n    }\r\n    StreamInfo.is = is;\r\n})(StreamInfo || (StreamInfo = {}));\r\nvar ChildProcessInfo;\r\n(function (ChildProcessInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.process !== void 0 && typeof candidate.detached === 'boolean';\r\n    }\r\n    ChildProcessInfo.is = is;\r\n})(ChildProcessInfo || (ChildProcessInfo = {}));\r\nclass LanguageClient extends client_1.BaseLanguageClient {\r\n    constructor(arg1, arg2, arg3, arg4, arg5) {\r\n        let id;\r\n        let name;\r\n        let serverOptions;\r\n        let clientOptions;\r\n        let forceDebug;\r\n        if (Is.string(arg2)) {\r\n            id = arg1;\r\n            name = arg2;\r\n            serverOptions = arg3;\r\n            clientOptions = arg4;\r\n            forceDebug = !!arg5;\r\n        }\r\n        else {\r\n            id = arg1.toLowerCase();\r\n            name = arg1;\r\n            serverOptions = arg2;\r\n            clientOptions = arg3;\r\n            forceDebug = arg4;\r\n        }\r\n        if (forceDebug === void 0) {\r\n            forceDebug = false;\r\n        }\r\n        super(id, name, clientOptions);\r\n        this._serverOptions = serverOptions;\r\n        this._forceDebug = forceDebug;\r\n        try {\r\n            this.checkVersion();\r\n        }\r\n        catch (error) {\r\n            if (Is.string(error.message)) {\r\n                this.outputChannel.appendLine(error.message);\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n    checkVersion() {\r\n        let codeVersion = SemVer.parse(vscode_1.version);\r\n        if (!codeVersion) {\r\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\r\n        }\r\n        // Remove the insider pre-release since we stay API compatible.\r\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\r\n            codeVersion.prerelease = [];\r\n        }\r\n        if (!SemVer.satisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\r\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\r\n        }\r\n    }\r\n    stop() {\r\n        return super.stop().then(() => {\r\n            if (this._serverProcess) {\r\n                let toCheck = this._serverProcess;\r\n                this._serverProcess = undefined;\r\n                if (this._isDetached === void 0 || !this._isDetached) {\r\n                    this.checkProcessDied(toCheck);\r\n                }\r\n                this._isDetached = undefined;\r\n            }\r\n        });\r\n    }\r\n    checkProcessDied(childProcess) {\r\n        if (!childProcess) {\r\n            return;\r\n        }\r\n        setTimeout(() => {\r\n            // Test if the process is still alive. Throws an exception if not\r\n            try {\r\n                process.kill(childProcess.pid, 0);\r\n                processes_1.terminate(childProcess);\r\n            }\r\n            catch (error) {\r\n                // All is fine.\r\n            }\r\n        }, 2000);\r\n    }\r\n    handleConnectionClosed() {\r\n        this._serverProcess = undefined;\r\n        super.handleConnectionClosed();\r\n    }\r\n    createMessageTransports(encoding) {\r\n        function getEnvironment(env) {\r\n            if (!env) {\r\n                return process.env;\r\n            }\r\n            let result = Object.create(null);\r\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\r\n            Object.keys(env).forEach(key => result[key] = env[key]);\r\n            return result;\r\n        }\r\n        function startedInDebugMode() {\r\n            let args = process.execArgv;\r\n            if (args) {\r\n                return args.some((arg) => /^--debug=?/.test(arg) || /^--debug-brk=?/.test(arg) || /^--inspect=?/.test(arg) || /^--inspect-brk=?/.test(arg));\r\n            }\r\n            ;\r\n            return false;\r\n        }\r\n        let server = this._serverOptions;\r\n        // We got a function.\r\n        if (Is.func(server)) {\r\n            return server().then((result) => {\r\n                if (client_1.MessageTransports.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return result;\r\n                }\r\n                else if (StreamInfo.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(result.reader), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer) };\r\n                }\r\n                else {\r\n                    let cp;\r\n                    if (ChildProcessInfo.is(result)) {\r\n                        cp = result.process;\r\n                        this._isDetached = result.detached;\r\n                    }\r\n                    else {\r\n                        cp = result;\r\n                        this._isDetached = false;\r\n                    }\r\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin) };\r\n                }\r\n            });\r\n        }\r\n        let json;\r\n        let runDebug = server;\r\n        if (runDebug.run || runDebug.debug) {\r\n            // We are under debugging. So use debug as well.\r\n            if (typeof v8debug === 'object' || this._forceDebug || startedInDebugMode()) {\r\n                json = runDebug.debug;\r\n            }\r\n            else {\r\n                json = runDebug.run;\r\n            }\r\n        }\r\n        else {\r\n            json = server;\r\n        }\r\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\r\n            if (NodeModule.is(json) && json.module) {\r\n                let node = json;\r\n                let transport = node.transport || TransportKind.stdio;\r\n                if (node.runtime) {\r\n                    let args = [];\r\n                    let options = node.options || Object.create(null);\r\n                    if (options.execArgv) {\r\n                        options.execArgv.forEach(element => args.push(element));\r\n                    }\r\n                    args.push(node.module);\r\n                    if (node.args) {\r\n                        node.args.forEach(element => args.push(element));\r\n                    }\r\n                    let execOptions = Object.create(null);\r\n                    execOptions.cwd = serverWorkingDir;\r\n                    execOptions.env = getEnvironment(options.env);\r\n                    let pipeName = undefined;\r\n                    if (transport === TransportKind.ipc) {\r\n                        // exec options not correctly typed in lib\r\n                        execOptions.stdio = [null, null, null, 'ipc'];\r\n                        args.push('--node-ipc');\r\n                    }\r\n                    else if (transport === TransportKind.stdio) {\r\n                        args.push('--stdio');\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                        args.push(`--pipe=${pipeName}`);\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        args.push(`--socket=${transport.port}`);\r\n                    }\r\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                        let serverProcess = cp.spawn(node.runtime, args, execOptions);\r\n                        if (!serverProcess || !serverProcess.pid) {\r\n                            return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                        }\r\n                        this._serverProcess = serverProcess;\r\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                        if (transport === TransportKind.ipc) {\r\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess) });\r\n                        }\r\n                        else {\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n                        }\r\n                    }\r\n                    else if (transport == TransportKind.pipe) {\r\n                        return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    let pipeName = undefined;\r\n                    return new Promise((resolve, _reject) => {\r\n                        let args = node.args && node.args.slice() || [];\r\n                        if (transport === TransportKind.ipc) {\r\n                            args.push('--node-ipc');\r\n                        }\r\n                        else if (transport === TransportKind.stdio) {\r\n                            args.push('--stdio');\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                            args.push(`--pipe=${pipeName}`);\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            args.push(`--socket=${transport.port}`);\r\n                        }\r\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                        let options = node.options || Object.create(null);\r\n                        options.execArgv = options.execArgv || [];\r\n                        options.cwd = serverWorkingDir;\r\n                        options.silent = true;\r\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                            let sp = cp.fork(node.module, args || [], options);\r\n                            this._serverProcess = sp;\r\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            if (transport === TransportKind.ipc) {\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess) });\r\n                            }\r\n                            else {\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin) });\r\n                            }\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (Executable.is(json) && json.command) {\r\n                let command = json;\r\n                let args = command.args || [];\r\n                let options = Object.assign({}, command.options);\r\n                options.cwd = options.cwd || serverWorkingDir;\r\n                let serverProcess = cp.spawn(command.command, args, options);\r\n                if (!serverProcess || !serverProcess.pid) {\r\n                    return Promise.reject(`Launching server using command ${command.command} failed.`);\r\n                }\r\n                serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                this._serverProcess = serverProcess;\r\n                this._isDetached = !!options.detached;\r\n                return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n            }\r\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\r\n        });\r\n    }\r\n    registerProposedFeatures() {\r\n        this.registerFeatures(ProposedFeatures.createAll(this));\r\n    }\r\n    registerBuiltinFeatures() {\r\n        super.registerBuiltinFeatures();\r\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\r\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\r\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\r\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\r\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\r\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\r\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\r\n    }\r\n    _mainGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    _getServerWorkingDir(options) {\r\n        let cwd = options && options.cwd;\r\n        if (!cwd) {\r\n            cwd = this.clientOptions.workspaceFolder\r\n                ? this.clientOptions.workspaceFolder.uri.fsPath\r\n                : this._mainGetRootPath();\r\n        }\r\n        if (cwd) {\r\n            // make sure the folder exists otherwise creating the process will fail\r\n            return new Promise(s => {\r\n                fs.lstat(cwd, (err, stats) => {\r\n                    s(!err && stats.isDirectory() ? cwd : undefined);\r\n                });\r\n            });\r\n        }\r\n        return Promise.resolve(undefined);\r\n    }\r\n}\r\nexports.LanguageClient = LanguageClient;\r\nclass SettingMonitor {\r\n    constructor(_client, _setting) {\r\n        this._client = _client;\r\n        this._setting = _setting;\r\n        this._listeners = [];\r\n    }\r\n    start() {\r\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\r\n        this.onDidChangeConfiguration();\r\n        return new vscode_1.Disposable(() => {\r\n            if (this._client.needsStop()) {\r\n                this._client.stop();\r\n            }\r\n        });\r\n    }\r\n    onDidChangeConfiguration() {\r\n        let index = this._setting.indexOf('.');\r\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\r\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\r\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\r\n        if (enabled && this._client.needsStart()) {\r\n            this._client.start();\r\n        }\r\n        else if (!enabled && this._client.needsStop()) {\r\n            this._client.stop();\r\n        }\r\n    }\r\n}\r\nexports.SettingMonitor = SettingMonitor;\r\n// Exporting proposed protocol.\r\nvar ProposedFeatures;\r\n(function (ProposedFeatures) {\r\n    function createAll(_client) {\r\n        let result = [];\r\n        return result;\r\n    }\r\n    ProposedFeatures.createAll = createAll;\r\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\r\n", "import {\n  workspace,\n  ExtensionContext,\n  window,\n  commands,\n  OutputChannel,\n} from 'vscode';\n\nimport {\n  LanguageClient,\n  LanguageClientOptions,\n  ServerOptions,\n  TransportKind,\n  RevealOutputChannelOn,\n} from 'vscode-languageclient';\n\nimport * as path from 'path';\nimport { createStatusBar, initStatusBar } from './apis/statusBar';\n\nexport function activate(context: ExtensionContext) {\n  const outputChannel: OutputChannel = window.createOutputChannel(\n    'GraphQL Language Server',\n  );\n\n  const config = getConfig();\n  const { debug } = config;\n  if (debug) {\n    console.log('Extension \"vscode-graphql\" is now active!');\n  }\n\n  const serverPath = path.join('out', 'server', 'index.js');\n  const serverModule = context.asAbsolutePath(serverPath);\n\n  const debugOptions = {\n    execArgv: ['--nolazy', '--inspect=localhost:6009'],\n  };\n\n  const serverOptions: ServerOptions = {\n    run: {\n      module: serverModule,\n      transport: TransportKind.ipc,\n    },\n    debug: {\n      module: serverModule,\n      transport: TransportKind.ipc,\n      options: { ...(debug ? debugOptions : {}) },\n    },\n  };\n\n  const clientOptions: LanguageClientOptions = {\n    documentSelector: [\n      { scheme: 'file', language: 'graphql' },\n      { scheme: 'file', language: 'javascript' },\n      { scheme: 'file', language: 'javascriptreact' },\n      { scheme: 'file', language: 'typescript' },\n      { scheme: 'file', language: 'typescriptreact' },\n    ],\n    synchronize: {\n      // TODO: This should include any referenced graphql files inside the graphql-config\n      fileEvents: [\n        workspace.createFileSystemWatcher(\n          '/{graphql.config.*,.graphqlrc,.graphqlrc.*,package.json}',\n          false,\n          // Ignore change events for graphql config, we only care about create, delete and save events\n          // otherwise, the underlying language service is re-started on every key change.\n          // also, it makes sense that it should only re-load on file save, but we need to document that.\n          // TODO: perhaps we can intercept change events, and remind the user\n          // to save for the changes to take effect\n          true,\n        ),\n        // These ignore node_modules and .git by default\n        workspace.createFileSystemWatcher(\n          '**/{*.graphql,*.graphqls,*.gql,*.js,*.mjs,*.cjs,*.esm,*.es,*.es6,*.jsx,*.ts,*.tsx}',\n        ),\n      ],\n    },\n    outputChannel,\n    outputChannelName: 'GraphQL Language Server',\n    revealOutputChannelOn: RevealOutputChannelOn.Never,\n    initializationFailedHandler: err => {\n      outputChannel.appendLine('Initialization failed');\n      outputChannel.appendLine(err.message);\n      if (err.stack) {\n        outputChannel.appendLine(err.stack);\n      }\n      if (debug) {\n        outputChannel.show();\n      }\n      return false;\n    },\n  };\n\n  const client = new LanguageClient(\n    'vscode-graphql',\n    'GraphQL Language Server',\n    serverOptions,\n    clientOptions,\n    debug,\n  );\n\n  let clientLSPDisposable = client.start();\n  context.subscriptions.push(clientLSPDisposable);\n\n  const commandShowOutputChannel = commands.registerCommand(\n    'vscode-graphql.showOutputChannel',\n    () => outputChannel.show(),\n  );\n\n  context.subscriptions.push(commandShowOutputChannel);\n\n  const statusBarItem = createStatusBar();\n  context.subscriptions.push(statusBarItem);\n  client.onReady().then(() => {\n    initStatusBar(statusBarItem, client, window.activeTextEditor);\n  });\n\n  commands.registerCommand('vscode-graphql.restart', async () => {\n    outputChannel.appendLine(`Stopping GraphQL LSP`);\n    await client.stop();\n\n    clientLSPDisposable.dispose();\n\n    outputChannel.appendLine(`Restarting GraphQL LSP`);\n    clientLSPDisposable = client.start();\n    context.subscriptions.push(clientLSPDisposable);\n\n    outputChannel.appendLine(`GraphQL LSP restarted`);\n  });\n}\n\nexport function deactivate() {\n  console.log('Extension \"vscode-graphql\" has been de-activated!!');\n}\n\nfunction getConfig() {\n  return workspace.getConfiguration(\n    'vscode-graphql',\n    window.activeTextEditor ? window.activeTextEditor.document.uri : null,\n  );\n}\n", "import {\n  StatusBarAlignment,\n  StatusBarItem,\n  TextEditor,\n  window,\n  ThemeColor,\n  version,\n} from 'vscode';\nimport { LanguageClient, State } from 'vscode-languageclient';\n\nenum Status {\n  INIT = 1,\n  RUNNING = 2,\n  ERROR = 3,\n}\n\n// const statusBarText = 'GraphQL';\n\nconst oldStatusBarUIElements = {\n  [Status.INIT]: {\n    icon: 'sync',\n    tooltip: 'GraphQL language server is initializing',\n  },\n  [Status.RUNNING]: {\n    icon: 'plug',\n    tooltip: 'GraphQL language server is running',\n  },\n  [Status.ERROR]: {\n    icon: 'stop',\n    color: new ThemeColor('list.warningForeground'),\n    tooltip: 'GraphQL language server has stopped',\n  },\n};\n\n// Uses an API added in Feb 2022\nconst statusBarUIElements = {\n  [Status.INIT]: {\n    icon: 'graphql-loading',\n    tooltip: 'GraphQL language server is starting up, click to show logs',\n  },\n  [Status.RUNNING]: {\n    icon: 'graphql-logo',\n    tooltip: 'GraphQL language server is running, click to show logs',\n  },\n  [Status.ERROR]: {\n    icon: 'graphql-error',\n    color: new ThemeColor('list.warningForeground'),\n    tooltip: 'GraphQL language server has stopped, click to show logs',\n  },\n};\n\n// const statusBarItem = window.createStatusBarItem(StatusBarAlignment.Right, 0);\nlet extensionStatus: Status = Status.RUNNING;\nlet serverRunning = true; // TODO: See comment with client.onNotification(\"init\".....\n\nconst statusBarActivationLanguageIds = [\n  'graphql',\n  'javascript',\n  'javascriptreact',\n  'typescript',\n  'typescriptreact',\n];\n\nexport const createStatusBar = () => {\n  return window.createStatusBarItem(StatusBarAlignment.Right, 0);\n};\n\nexport function initStatusBar(\n  statusBarItem: StatusBarItem,\n  client: LanguageClient,\n  editor: TextEditor | undefined,\n) {\n  extensionStatus = Status.INIT;\n\n  // TODO: Make graphql-language-service-server throw relevant\n  // notifications. Currently, it does not throw \"init\" or \"exit\"\n  // and status bar is hard coded to all greens.\n\n  client.onNotification('init', _params => {\n    extensionStatus = Status.RUNNING;\n    serverRunning = true;\n    updateStatusBar(statusBarItem, editor);\n  });\n\n  client.onNotification('exit', _params => {\n    extensionStatus = Status.ERROR;\n    serverRunning = false;\n    updateStatusBar(statusBarItem, editor);\n  });\n\n  client.onDidChangeState(event => {\n    if (event.newState === State.Running) {\n      extensionStatus = Status.RUNNING;\n      serverRunning = true;\n    } else {\n      extensionStatus = Status.ERROR;\n      client.info('The graphql server has stopped running');\n      serverRunning = false;\n    }\n    updateStatusBar(statusBarItem, editor);\n  });\n\n  updateStatusBar(statusBarItem, editor);\n\n  window.onDidChangeActiveTextEditor((activeEditor: TextEditor | undefined) => {\n    // update the status if the server is running\n    updateStatusBar(statusBarItem, activeEditor);\n  });\n}\n\nfunction updateStatusBar(\n  statusBarItem: StatusBarItem,\n  editor: TextEditor | undefined,\n) {\n  extensionStatus = serverRunning ? Status.RUNNING : Status.ERROR;\n\n  // Support two different versions of the status bar UI,\n  // a modern version which uses the new API which lets us use the GraphQL logo and\n  // a legacy version which says 'graphql' in text.\n\n  const [major, minor] = version.split('.');\n  const userNewVersion =\n    Number(major) > 1 || (Number(major) === 1 && Number(minor) >= 65);\n  const statusBarUIElement = userNewVersion\n    ? statusBarUIElements\n    : oldStatusBarUIElements;\n  const message = userNewVersion ? '' : ' GraphQL';\n\n  const statusUI = statusBarUIElement[extensionStatus];\n  statusBarItem.text = `$(${statusUI.icon})${message}`;\n  statusBarItem.tooltip = statusUI.tooltip;\n  statusBarItem.command = 'vscode-graphql.showOutputChannel';\n  if ('color' in statusUI) {\n    statusBarItem.color = statusUI.color;\n  }\n\n  if (\n    editor &&\n    statusBarActivationLanguageIds.indexOf(editor.document.languageId) > -1\n  ) {\n    statusBarItem.show();\n  } else {\n    statusBarItem.hide();\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
