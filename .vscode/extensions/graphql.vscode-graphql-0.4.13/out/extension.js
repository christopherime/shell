var zo=Object.create;var ur=Object.defineProperty;var Uo=Object.getOwnPropertyDescriptor;var Go=Object.getOwnPropertyNames;var Bo=Object.getPrototypeOf,Qo=Object.prototype.hasOwnProperty;var Ai=r=>ur(r,"__esModule",{value:!0});var H=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Jo=(r,e)=>{Ai(r);for(var t in e)ur(r,t,{get:e[t],enumerable:!0})},Xo=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Go(e))!Qo.call(r,i)&&i!=="default"&&ur(r,i,{get:()=>e[i],enumerable:!(t=Uo(e,i))||t.enumerable});return r},Kt=r=>Xo(Ai(ur(r!=null?zo(Bo(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var rn=H((M,tn)=>{M=tn.exports=G;var Z;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Z=function(){var r=Array.prototype.slice.call(arguments,0);r.unshift("SEMVER"),console.log.apply(console,r)}:Z=function(){};M.SEMVER_SPEC_VERSION="2.0.0";var jr=256,lr=Number.MAX_SAFE_INTEGER||9007199254740991,Ar=16,re=M.re=[],D=M.src=[],z=0,xt=z++;D[xt]="0|[1-9]\\d*";var qt=z++;D[qt]="[0-9]+";var Wr=z++;D[Wr]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var Wi=z++;D[Wi]="("+D[xt]+")\\.("+D[xt]+")\\.("+D[xt]+")";var Hi=z++;D[Hi]="("+D[qt]+")\\.("+D[qt]+")\\.("+D[qt]+")";var Hr=z++;D[Hr]="(?:"+D[xt]+"|"+D[Wr]+")";var Kr=z++;D[Kr]="(?:"+D[qt]+"|"+D[Wr]+")";var $r=z++;D[$r]="(?:-("+D[Hr]+"(?:\\."+D[Hr]+")*))";var zr=z++;D[zr]="(?:-?("+D[Kr]+"(?:\\."+D[Kr]+")*))";var Ur=z++;D[Ur]="[0-9A-Za-z-]+";var $t=z++;D[$t]="(?:\\+("+D[Ur]+"(?:\\."+D[Ur]+")*))";var Gr=z++,Ki="v?"+D[Wi]+D[$r]+"?"+D[$t]+"?";D[Gr]="^"+Ki+"$";var Br="[v=\\s]*"+D[Hi]+D[zr]+"?"+D[$t]+"?",Qr=z++;D[Qr]="^"+Br+"$";var Pt=z++;D[Pt]="((?:<|>)?=?)";var dr=z++;D[dr]=D[qt]+"|x|X|\\*";var fr=z++;D[fr]=D[xt]+"|x|X|\\*";var pt=z++;D[pt]="[v=\\s]*("+D[fr]+")(?:\\.("+D[fr]+")(?:\\.("+D[fr]+")(?:"+D[$r]+")?"+D[$t]+"?)?)?";var kt=z++;D[kt]="[v=\\s]*("+D[dr]+")(?:\\.("+D[dr]+")(?:\\.("+D[dr]+")(?:"+D[zr]+")?"+D[$t]+"?)?)?";var $i=z++;D[$i]="^"+D[Pt]+"\\s*"+D[pt]+"$";var zi=z++;D[zi]="^"+D[Pt]+"\\s*"+D[kt]+"$";var Ui=z++;D[Ui]="(?:^|[^\\d])(\\d{1,"+Ar+"})(?:\\.(\\d{1,"+Ar+"}))?(?:\\.(\\d{1,"+Ar+"}))?(?:$|[^\\d])";var hr=z++;D[hr]="(?:~>?)";var pr=z++;D[pr]="(\\s*)"+D[hr]+"\\s+";re[pr]=new RegExp(D[pr],"g");var Vo="$1~",Gi=z++;D[Gi]="^"+D[hr]+D[pt]+"$";var Bi=z++;D[Bi]="^"+D[hr]+D[kt]+"$";var gr=z++;D[gr]="(?:\\^)";var mr=z++;D[mr]="(\\s*)"+D[gr]+"\\s+";re[mr]=new RegExp(D[mr],"g");var Yo="$1^",Qi=z++;D[Qi]="^"+D[gr]+D[pt]+"$";var Ji=z++;D[Ji]="^"+D[gr]+D[kt]+"$";var Jr=z++;D[Jr]="^"+D[Pt]+"\\s*("+Br+")$|^$";var Xr=z++;D[Xr]="^"+D[Pt]+"\\s*("+Ki+")$|^$";var zt=z++;D[zt]="(\\s*)"+D[Pt]+"\\s*("+Br+"|"+D[pt]+")";re[zt]=new RegExp(D[zt],"g");var Zo="$1$2$3",Xi=z++;D[Xi]="^\\s*("+D[pt]+")\\s+-\\s+("+D[pt]+")\\s*$";var Vi=z++;D[Vi]="^\\s*("+D[kt]+")\\s+-\\s+("+D[kt]+")\\s*$";var Yi=z++;D[Yi]="(<|>)?=?\\s*\\*";for(var gt=0;gt<z;gt++)Z(gt,D[gt]),re[gt]||(re[gt]=new RegExp(D[gt]));M.parse=mt;function mt(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof G)return r;if(typeof r!="string"||r.length>jr)return null;var t=e.loose?re[Qr]:re[Gr];if(!t.test(r))return null;try{return new G(r,e)}catch(i){return null}}M.valid=ea;function ea(r,e){var t=mt(r,e);return t?t.version:null}M.clean=ta;function ta(r,e){var t=mt(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null}M.SemVer=G;function G(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof G){if(r.loose===e.loose)return r;r=r.version}else if(typeof r!="string")throw new TypeError("Invalid Version: "+r);if(r.length>jr)throw new TypeError("version is longer than "+jr+" characters");if(!(this instanceof G))return new G(r,e);Z("SemVer",r,e),this.options=e,this.loose=!!e.loose;var t=r.trim().match(e.loose?re[Qr]:re[Gr]);if(!t)throw new TypeError("Invalid Version: "+r);if(this.raw=r,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>lr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>lr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>lr||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(function(i){if(/^[0-9]+$/.test(i)){var a=+i;if(a>=0&&a<lr)return a}return i}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};G.prototype.toString=function(){return this.version};G.prototype.compare=function(r){return Z("SemVer.compare",this.version,this.options,r),r instanceof G||(r=new G(r,this.options)),this.compareMain(r)||this.comparePre(r)};G.prototype.compareMain=function(r){return r instanceof G||(r=new G(r,this.options)),Ot(this.major,r.major)||Ot(this.minor,r.minor)||Ot(this.patch,r.patch)};G.prototype.comparePre=function(r){if(r instanceof G||(r=new G(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;var e=0;do{var t=this.prerelease[e],i=r.prerelease[e];if(Z("prerelease compare",e,t,i),t===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(t===void 0)return-1;if(t===i)continue;return Ot(t,i)}while(++e)};G.prototype.inc=function(r,e){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var t=this.prerelease.length;--t>=0;)typeof this.prerelease[t]=="number"&&(this.prerelease[t]++,t=-2);t===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+r)}return this.format(),this.raw=this.version,this};M.inc=ra;function ra(r,e,t,i){typeof t=="string"&&(i=t,t=void 0);try{return new G(r,t).inc(e,i).version}catch(a){return null}}M.diff=ia;function ia(r,e){if(Vr(r,e))return null;var t=mt(r),i=mt(e),a="";if(t.prerelease.length||i.prerelease.length){a="pre";var o="prerelease"}for(var u in t)if((u==="major"||u==="minor"||u==="patch")&&t[u]!==i[u])return a+u;return o}M.compareIdentifiers=Ot;var Zi=/^[0-9]+$/;function Ot(r,e){var t=Zi.test(r),i=Zi.test(e);return t&&i&&(r=+r,e=+e),r===e?0:t&&!i?-1:i&&!t?1:r<e?-1:1}M.rcompareIdentifiers=na;function na(r,e){return Ot(e,r)}M.major=sa;function sa(r,e){return new G(r,e).major}M.minor=oa;function oa(r,e){return new G(r,e).minor}M.patch=aa;function aa(r,e){return new G(r,e).patch}M.compare=et;function et(r,e,t){return new G(r,t).compare(new G(e,t))}M.compareLoose=ca;function ca(r,e){return et(r,e,!0)}M.rcompare=ua;function ua(r,e,t){return et(e,r,t)}M.sort=la;function la(r,e){return r.sort(function(t,i){return M.compare(t,i,e)})}M.rsort=da;function da(r,e){return r.sort(function(t,i){return M.rcompare(t,i,e)})}M.gt=Ut;function Ut(r,e,t){return et(r,e,t)>0}M.lt=vr;function vr(r,e,t){return et(r,e,t)<0}M.eq=Vr;function Vr(r,e,t){return et(r,e,t)===0}M.neq=en;function en(r,e,t){return et(r,e,t)!==0}M.gte=Yr;function Yr(r,e,t){return et(r,e,t)>=0}M.lte=Zr;function Zr(r,e,t){return et(r,e,t)<=0}M.cmp=yr;function yr(r,e,t,i){switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return Vr(r,t,i);case"!=":return en(r,t,i);case">":return Ut(r,t,i);case">=":return Yr(r,t,i);case"<":return vr(r,t,i);case"<=":return Zr(r,t,i);default:throw new TypeError("Invalid operator: "+e)}}M.Comparator=Ee;function Ee(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof Ee){if(r.loose===!!e.loose)return r;r=r.value}if(!(this instanceof Ee))return new Ee(r,e);Z("comparator",r,e),this.options=e,this.loose=!!e.loose,this.parse(r),this.semver===Gt?this.value="":this.value=this.operator+this.semver.version,Z("comp",this)}var Gt={};Ee.prototype.parse=function(r){var e=this.options.loose?re[Jr]:re[Xr],t=r.match(e);if(!t)throw new TypeError("Invalid comparator: "+r);this.operator=t[1],this.operator==="="&&(this.operator=""),t[2]?this.semver=new G(t[2],this.options.loose):this.semver=Gt};Ee.prototype.toString=function(){return this.value};Ee.prototype.test=function(r){return Z("Comparator.test",r,this.options.loose),this.semver===Gt?!0:(typeof r=="string"&&(r=new G(r,this.options)),yr(r,this.operator,this.semver,this.options))};Ee.prototype.intersects=function(r,e){if(!(r instanceof Ee))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var t;if(this.operator==="")return t=new ae(r.value,e),Cr(this.value,t,e);if(r.operator==="")return t=new ae(this.value,e),Cr(r.semver,t,e);var i=(this.operator===">="||this.operator===">")&&(r.operator===">="||r.operator===">"),a=(this.operator==="<="||this.operator==="<")&&(r.operator==="<="||r.operator==="<"),o=this.semver.version===r.semver.version,u=(this.operator===">="||this.operator==="<=")&&(r.operator===">="||r.operator==="<="),c=yr(this.semver,"<",r.semver,e)&&(this.operator===">="||this.operator===">")&&(r.operator==="<="||r.operator==="<"),d=yr(this.semver,">",r.semver,e)&&(this.operator==="<="||this.operator==="<")&&(r.operator===">="||r.operator===">");return i||a||o&&u||c||d};M.Range=ae;function ae(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof ae)return r.loose===!!e.loose&&r.includePrerelease===!!e.includePrerelease?r:new ae(r.raw,e);if(r instanceof Ee)return new ae(r.value,e);if(!(this instanceof ae))return new ae(r,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=r,this.set=r.split(/\s*\|\|\s*/).map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+r);this.format()}ae.prototype.format=function(){return this.range=this.set.map(function(r){return r.join(" ").trim()}).join("||").trim(),this.range};ae.prototype.toString=function(){return this.range};ae.prototype.parseRange=function(r){var e=this.options.loose;r=r.trim();var t=e?re[Vi]:re[Xi];r=r.replace(t,_a),Z("hyphen replace",r),r=r.replace(re[zt],Zo),Z("comparator trim",r,re[zt]),r=r.replace(re[pr],Vo),r=r.replace(re[mr],Yo),r=r.split(/\s+/).join(" ");var i=e?re[Jr]:re[Xr],a=r.split(" ").map(function(o){return ha(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter(function(o){return!!o.match(i)})),a=a.map(function(o){return new Ee(o,this.options)},this),a};ae.prototype.intersects=function(r,e){if(!(r instanceof ae))throw new TypeError("a Range is required");return this.set.some(function(t){return t.every(function(i){return r.set.some(function(a){return a.every(function(o){return i.intersects(o,e)})})})})};M.toComparators=fa;function fa(r,e){return new ae(r,e).set.map(function(t){return t.map(function(i){return i.value}).join(" ").trim().split(" ")})}function ha(r,e){return Z("comp",r,e),r=ma(r,e),Z("caret",r),r=pa(r,e),Z("tildes",r),r=ya(r,e),Z("xrange",r),r=Ra(r,e),Z("stars",r),r}function we(r){return!r||r.toLowerCase()==="x"||r==="*"}function pa(r,e){return r.trim().split(/\s+/).map(function(t){return ga(t,e)}).join(" ")}function ga(r,e){var t=e.loose?re[Bi]:re[Gi];return r.replace(t,function(i,a,o,u,c){Z("tilde",r,i,a,o,u,c);var d;return we(a)?d="":we(o)?d=">="+a+".0.0 <"+(+a+1)+".0.0":we(u)?d=">="+a+"."+o+".0 <"+a+"."+(+o+1)+".0":c?(Z("replaceTilde pr",c),d=">="+a+"."+o+"."+u+"-"+c+" <"+a+"."+(+o+1)+".0"):d=">="+a+"."+o+"."+u+" <"+a+"."+(+o+1)+".0",Z("tilde return",d),d})}function ma(r,e){return r.trim().split(/\s+/).map(function(t){return va(t,e)}).join(" ")}function va(r,e){Z("caret",r,e);var t=e.loose?re[Ji]:re[Qi];return r.replace(t,function(i,a,o,u,c){Z("caret",r,i,a,o,u,c);var d;return we(a)?d="":we(o)?d=">="+a+".0.0 <"+(+a+1)+".0.0":we(u)?a==="0"?d=">="+a+"."+o+".0 <"+a+"."+(+o+1)+".0":d=">="+a+"."+o+".0 <"+(+a+1)+".0.0":c?(Z("replaceCaret pr",c),a==="0"?o==="0"?d=">="+a+"."+o+"."+u+"-"+c+" <"+a+"."+o+"."+(+u+1):d=">="+a+"."+o+"."+u+"-"+c+" <"+a+"."+(+o+1)+".0":d=">="+a+"."+o+"."+u+"-"+c+" <"+(+a+1)+".0.0"):(Z("no pr"),a==="0"?o==="0"?d=">="+a+"."+o+"."+u+" <"+a+"."+o+"."+(+u+1):d=">="+a+"."+o+"."+u+" <"+a+"."+(+o+1)+".0":d=">="+a+"."+o+"."+u+" <"+(+a+1)+".0.0"),Z("caret return",d),d})}function ya(r,e){return Z("replaceXRanges",r,e),r.split(/\s+/).map(function(t){return Ca(t,e)}).join(" ")}function Ca(r,e){r=r.trim();var t=e.loose?re[zi]:re[$i];return r.replace(t,function(i,a,o,u,c,d){Z("xRange",r,i,a,o,u,c,d);var y=we(o),S=y||we(u),q=S||we(c),L=q;return a==="="&&L&&(a=""),y?a===">"||a==="<"?i="<0.0.0":i="*":a&&L?(S&&(u=0),c=0,a===">"?(a=">=",S?(o=+o+1,u=0,c=0):(u=+u+1,c=0)):a==="<="&&(a="<",S?o=+o+1:u=+u+1),i=a+o+"."+u+"."+c):S?i=">="+o+".0.0 <"+(+o+1)+".0.0":q&&(i=">="+o+"."+u+".0 <"+o+"."+(+u+1)+".0"),Z("xRange return",i),i})}function Ra(r,e){return Z("replaceStars",r,e),r.trim().replace(re[Yi],"")}function _a(r,e,t,i,a,o,u,c,d,y,S,q,L){return we(t)?e="":we(i)?e=">="+t+".0.0":we(a)?e=">="+t+"."+i+".0":e=">="+e,we(d)?c="":we(y)?c="<"+(+d+1)+".0.0":we(S)?c="<"+d+"."+(+y+1)+".0":q?c="<="+d+"."+y+"."+S+"-"+q:c="<="+c,(e+" "+c).trim()}ae.prototype.test=function(r){if(!r)return!1;typeof r=="string"&&(r=new G(r,this.options));for(var e=0;e<this.set.length;e++)if(wa(this.set[e],r,this.options))return!0;return!1};function wa(r,e,t){for(var i=0;i<r.length;i++)if(!r[i].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(i=0;i<r.length;i++)if(Z(r[i].semver),r[i].semver!==Gt&&r[i].semver.prerelease.length>0){var a=r[i].semver;if(a.major===e.major&&a.minor===e.minor&&a.patch===e.patch)return!0}return!1}return!0}M.satisfies=Cr;function Cr(r,e,t){try{e=new ae(e,t)}catch(i){return!1}return e.test(r)}M.maxSatisfying=Da;function Da(r,e,t){var i=null,a=null;try{var o=new ae(e,t)}catch(u){return null}return r.forEach(function(u){o.test(u)&&(!i||a.compare(u)===-1)&&(i=u,a=new G(i,t))}),i}M.minSatisfying=Sa;function Sa(r,e,t){var i=null,a=null;try{var o=new ae(e,t)}catch(u){return null}return r.forEach(function(u){o.test(u)&&(!i||a.compare(u)===1)&&(i=u,a=new G(i,t))}),i}M.minVersion=Ta;function Ta(r,e){r=new ae(r,e);var t=new G("0.0.0");if(r.test(t)||(t=new G("0.0.0-0"),r.test(t)))return t;t=null;for(var i=0;i<r.set.length;++i){var a=r.set[i];a.forEach(function(o){var u=new G(o.semver.version);switch(o.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!t||Ut(t,u))&&(t=u);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return t&&r.test(t)?t:null}M.validRange=ba;function ba(r,e){try{return new ae(r,e).range||"*"}catch(t){return null}}M.ltr=Ea;function Ea(r,e,t){return ei(r,e,"<",t)}M.gtr=xa;function xa(r,e,t){return ei(r,e,">",t)}M.outside=ei;function ei(r,e,t,i){r=new G(r,i),e=new ae(e,i);var a,o,u,c,d;switch(t){case">":a=Ut,o=Zr,u=vr,c=">",d=">=";break;case"<":a=vr,o=Yr,u=Ut,c="<",d="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Cr(r,e,i))return!1;for(var y=0;y<e.set.length;++y){var S=e.set[y],q=null,L=null;if(S.forEach(function(A){A.semver===Gt&&(A=new Ee(">=0.0.0")),q=q||A,L=L||A,a(A.semver,q.semver,i)?q=A:u(A.semver,L.semver,i)&&(L=A)}),q.operator===c||q.operator===d||(!L.operator||L.operator===c)&&o(r,L.semver))return!1;if(L.operator===d&&u(r,L.semver))return!1}return!0}M.prerelease=qa;function qa(r,e){var t=mt(r,e);return t&&t.prerelease.length?t.prerelease:null}M.intersects=Pa;function Pa(r,e,t){return r=new ae(r,t),e=new ae(e,t),r.intersects(e)}M.coerce=ka;function ka(r){if(r instanceof G)return r;if(typeof r!="string")return null;var e=r.match(re[Ui]);return e==null?null:mt(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var Ft=H(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});function Oa(r){return r===!0||r===!1}tt.boolean=Oa;function nn(r){return typeof r=="string"||r instanceof String}tt.string=nn;function Fa(r){return typeof r=="number"||r instanceof Number}tt.number=Fa;function Na(r){return r instanceof Error}tt.error=Na;function Ia(r){return typeof r=="function"}tt.func=Ia;function sn(r){return Array.isArray(r)}tt.array=sn;function La(r){return sn(r)&&r.every(e=>nn(e))}tt.stringArray=La});var qn=H(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var vt=Ft(),on;(function(r){r.ParseError=-32700,r.InvalidRequest=-32600,r.MethodNotFound=-32601,r.InvalidParams=-32602,r.InternalError=-32603,r.serverErrorStart=-32099,r.serverErrorEnd=-32e3,r.ServerNotInitialized=-32002,r.UnknownErrorCode=-32001,r.RequestCancelled=-32800,r.MessageWriteError=1,r.MessageReadError=2})(on=Y.ErrorCodes||(Y.ErrorCodes={}));var Rr=class extends Error{constructor(e,t,i){super(t);this.code=vt.number(e)?e:on.UnknownErrorCode,this.data=i,Object.setPrototypeOf(this,Rr.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};Y.ResponseError=Rr;var se=class{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}};Y.AbstractMessageType=se;var an=class extends se{constructor(e){super(e,0);this._=void 0}};Y.RequestType0=an;var cn=class extends se{constructor(e){super(e,1);this._=void 0}};Y.RequestType=cn;var un=class extends se{constructor(e){super(e,1);this._=void 0}};Y.RequestType1=un;var ln=class extends se{constructor(e){super(e,2);this._=void 0}};Y.RequestType2=ln;var dn=class extends se{constructor(e){super(e,3);this._=void 0}};Y.RequestType3=dn;var fn=class extends se{constructor(e){super(e,4);this._=void 0}};Y.RequestType4=fn;var hn=class extends se{constructor(e){super(e,5);this._=void 0}};Y.RequestType5=hn;var pn=class extends se{constructor(e){super(e,6);this._=void 0}};Y.RequestType6=pn;var gn=class extends se{constructor(e){super(e,7);this._=void 0}};Y.RequestType7=gn;var mn=class extends se{constructor(e){super(e,8);this._=void 0}};Y.RequestType8=mn;var vn=class extends se{constructor(e){super(e,9);this._=void 0}};Y.RequestType9=vn;var yn=class extends se{constructor(e){super(e,1);this._=void 0}};Y.NotificationType=yn;var Cn=class extends se{constructor(e){super(e,0);this._=void 0}};Y.NotificationType0=Cn;var Rn=class extends se{constructor(e){super(e,1);this._=void 0}};Y.NotificationType1=Rn;var _n=class extends se{constructor(e){super(e,2);this._=void 0}};Y.NotificationType2=_n;var wn=class extends se{constructor(e){super(e,3);this._=void 0}};Y.NotificationType3=wn;var Dn=class extends se{constructor(e){super(e,4);this._=void 0}};Y.NotificationType4=Dn;var Sn=class extends se{constructor(e){super(e,5);this._=void 0}};Y.NotificationType5=Sn;var Tn=class extends se{constructor(e){super(e,6);this._=void 0}};Y.NotificationType6=Tn;var bn=class extends se{constructor(e){super(e,7);this._=void 0}};Y.NotificationType7=bn;var En=class extends se{constructor(e){super(e,8);this._=void 0}};Y.NotificationType8=En;var xn=class extends se{constructor(e){super(e,9);this._=void 0}};Y.NotificationType9=xn;function Ma(r){let e=r;return e&&vt.string(e.method)&&(vt.string(e.id)||vt.number(e.id))}Y.isRequestMessage=Ma;function ja(r){let e=r;return e&&vt.string(e.method)&&r.id===void 0}Y.isNotificationMessage=ja;function Aa(r){let e=r;return e&&(e.result!==void 0||!!e.error)&&(vt.string(e.id)||vt.number(e.id)||e.id===null)}Y.isResponseMessage=Aa});var Qt=H(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});var Wa;(function(r){function e(t){return{dispose:t}}r.create=e})(Wa=yt.Disposable||(yt.Disposable={}));var Ha;(function(r){let e={dispose(){}};r.None=function(){return e}})(Ha=yt.Event||(yt.Event={}));var Pn=class{add(e,t=null,i){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(i)&&i.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!!this._callbacks){for(var i=!1,a=0,o=this._callbacks.length;a<o;a++)if(this._callbacks[a]===e)if(this._contexts[a]===t){this._callbacks.splice(a,1),this._contexts.splice(a,1);return}else i=!0;if(i)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],i=this._callbacks.slice(0),a=this._contexts.slice(0),o=0,u=i.length;o<u;o++)try{t.push(i[o].apply(a[o],e))}catch(c){console.error(c)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Bt=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,i)=>{this._callbacks||(this._callbacks=new Pn),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let a;return a={dispose:()=>{this._callbacks.remove(e,t),a.dispose=Bt._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(i)&&i.push(a),a}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Bt._noop=function(){};yt.Emitter=Bt});var wr=H(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var ti=Qt(),Nt=Ft(),ri=8192,kn=Buffer.from("\r","ascii")[0],On=Buffer.from(`
`,"ascii")[0],Ka=`\r
`,Fn=class{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(ri)}append(e){var t=e;if(typeof e=="string"){var i=e,a=Buffer.byteLength(i,this.encoding);t=Buffer.allocUnsafe(a),t.write(i,0,a,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var o=(Math.ceil((this.index+t.length)/ri)+1)*ri;this.index===0?(this.buffer=Buffer.allocUnsafe(o),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],o)}this.index+=t.length}tryReadHeaders(){let e,t=0;for(;t+3<this.index&&(this.buffer[t]!==kn||this.buffer[t+1]!==On||this.buffer[t+2]!==kn||this.buffer[t+3]!==On);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split(Ka).forEach(o=>{let u=o.indexOf(":");if(u===-1)throw new Error("Message header must separate key and value using :");let c=o.substr(0,u),d=o.substr(u+1).trim();e[c]=d});let a=t+4;return this.buffer=this.buffer.slice(a),this.index=this.index-a,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),i=e;return this.buffer.copy(this.buffer,0,i),this.index=this.index-i,t}get numberOfBytes(){return this.index}},$a;(function(r){function e(t){let i=t;return i&&Nt.func(i.listen)&&Nt.func(i.dispose)&&Nt.func(i.onError)&&Nt.func(i.onClose)&&Nt.func(i.onPartialMessage)}r.is=e})($a=ot.MessageReader||(ot.MessageReader={}));var _r=class{constructor(){this.errorEmitter=new ti.Emitter,this.closeEmitter=new ti.Emitter,this.partialMessageEmitter=new ti.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${Nt.string(e.message)?e.message:"unknown"}`)}};ot.AbstractMessageReader=_r;var ii=class extends _r{constructor(e,t="utf8"){super();this.readable=e,this.buffer=new Fn(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",t=>{this.onData(t)}),this.readable.on("error",t=>this.fireError(t)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let a=this.buffer.tryReadHeaders();if(!a)return;let o=a["Content-Length"];if(!o)throw new Error("Header must provide a Content-Length property.");let u=parseInt(o);if(isNaN(u))throw new Error("Content-Length value must be a number.");this.nextMessageLength=u}var t=this.buffer.tryReadContent(this.nextMessageLength);if(t===null){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var i=JSON.parse(t);this.callback(i)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};ot.StreamMessageReader=ii;var Nn=class extends _r{constructor(e){super();this.process=e;let t=this.process;t.on("error",i=>this.fireError(i)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};ot.IPCMessageReader=Nn;var In=class extends ii{constructor(e,t="utf-8"){super(e,t)}};ot.SocketMessageReader=In});var Sr=H(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});var Ln=Qt(),Jt=Ft(),Mn="Content-Length: ",Dr=`\r
`,za;(function(r){function e(t){let i=t;return i&&Jt.func(i.dispose)&&Jt.func(i.onClose)&&Jt.func(i.onError)&&Jt.func(i.write)}r.is=e})(za=at.MessageWriter||(at.MessageWriter={}));var Xt=class{constructor(){this.errorEmitter=new Ln.Emitter,this.closeEmitter=new Ln.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,i){this.errorEmitter.fire([this.asError(e),t,i])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${Jt.string(e.message)?e.message:"unknown"}`)}};at.AbstractMessageWriter=Xt;var jn=class extends Xt{constructor(e,t="utf8"){super();this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",i=>this.fireError(i)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),i=Buffer.byteLength(t,this.encoding),a=[Mn,i.toString(),Dr,Dr];try{this.writable.write(a.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(o){this.errorCount++,this.fireError(o,e,this.errorCount)}}};at.StreamMessageWriter=jn;var An=class extends Xt{constructor(e){super();this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",i=>this.fireError(i)),t.on("close",()=>this.fireClose)}write(e){!this.sending&&this.queue.length===0?this.doWriteMessage(e):this.queue.push(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};at.IPCMessageWriter=An;var Wn=class extends Xt{constructor(e,t="utf8"){super();this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",i=>this.fireError(i)),this.socket.on("close",()=>this.fireClose())}write(e){!this.sending&&this.queue.length===0?this.doWriteMessage(e):this.queue.push(e)}doWriteMessage(e){let t=JSON.stringify(e),i=Buffer.byteLength(t,this.encoding),a=[Mn,i.toString(),Dr,Dr];try{this.sending=!0,this.socket.write(a.join(""),"ascii",o=>{o&&this.handleError(o,e);try{this.socket.write(t,this.encoding,u=>{this.sending=!1,u?this.handleError(u,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(u){this.handleError(u,e)}})}catch(o){this.handleError(o,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}};at.SocketMessageWriter=Wn});var zn=H(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});var ni=Qt(),Ua=Ft(),Hn;(function(r){r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ni.Event.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ni.Event.None});function e(t){let i=t;return i&&(i===r.None||i===r.Cancelled||Ua.boolean(i.isCancellationRequested)&&!!i.onCancellationRequested)}r.is=e})(Hn=Vt.CancellationToken||(Vt.CancellationToken={}));var Ga=Object.freeze(function(r,e){let t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}}),Kn=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ga:(this._emitter||(this._emitter=new ni.Emitter),this._emitter.event)}},$n=class{get token(){return this._token||(this._token=new Kn),this._token}cancel(){this._token?this._token.cancel():this._token=Hn.Cancelled}dispose(){this.cancel()}};Vt.CancellationTokenSource=$n});var Gn=H(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});var We;(function(r){r.None=0,r.First=1,r.Last=2})(We=Yt.Touch||(Yt.Touch={}));var Un=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){let t=this._map.get(e);if(!!t)return t.value}set(e,t,i=We.None){let a=this._map.get(e);if(a)a.value=t,i!==We.None&&this.touch(a,i);else{switch(a={key:e,value:t,next:void 0,previous:void 0},i){case We.None:this.addItemLast(a);break;case We.First:this.addItemFirst(a);break;case We.Last:this.addItemLast(a);break;default:this.addItemLast(a);break}this._map.set(e,a),this._size++}}delete(e){let t=this._map.get(e);return t?(this._map.delete(e),this.removeItem(t),this._size--,!0):!1}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let i=this._head;for(;i;)t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),i=i.next}forEachReverse(e,t){let i=this._tail;for(;i;)t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),i=i.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{let t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==We.First&&t!==We.Last)){if(t===We.First){if(e===this._head)return;let i=e.next,a=e.previous;e===this._tail?(a.next=void 0,this._tail=a):(i.previous=a,a.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===We.Last){if(e===this._tail)return;let i=e.next,a=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=a,a.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}};Yt.LinkedMap=Un});var Xn=H(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});var Ba=require("path"),Qa=require("os"),Ja=require("crypto"),Bn=require("net"),Qn=wr(),Jn=Sr();function Xa(){let r=Ja.randomBytes(21).toString("hex");return process.platform==="win32"?`\\\\.\\pipe\\vscode-jsonrpc-${r}-sock`:Ba.join(Qa.tmpdir(),`vscode-${r}.sock`)}Zt.generateRandomPipeName=Xa;function Va(r,e="utf-8"){let t,i=new Promise((a,o)=>{t=a});return new Promise((a,o)=>{let u=Bn.createServer(c=>{u.close(),t([new Qn.SocketMessageReader(c,e),new Jn.SocketMessageWriter(c,e)])});u.on("error",o),u.listen(r,()=>{u.removeListener("error",o),a({onConnected:()=>i})})})}Zt.createClientPipeTransport=Va;function Ya(r,e="utf-8"){let t=Bn.createConnection(r);return[new Qn.SocketMessageReader(t,e),new Jn.SocketMessageWriter(t,e)]}Zt.createServerPipeTransport=Ya});var es=H(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});var Vn=require("net"),Yn=wr(),Zn=Sr();function Za(r,e="utf-8"){let t,i=new Promise((a,o)=>{t=a});return new Promise((a,o)=>{let u=Vn.createServer(c=>{u.close(),t([new Yn.SocketMessageReader(c,e),new Zn.SocketMessageWriter(c,e)])});u.on("error",o),u.listen(r,"127.0.0.1",()=>{u.removeListener("error",o),a({onConnected:()=>i})})})}Tr.createClientSocketTransport=Za;function ec(r,e="utf-8"){let t=Vn.createConnection(r,"127.0.0.1");return[new Yn.SocketMessageReader(t,e),new Zn.SocketMessageWriter(t,e)]}Tr.createServerSocketTransport=ec});var He=H(x=>{"use strict";function ts(r){for(var e in r)x.hasOwnProperty(e)||(x[e]=r[e])}Object.defineProperty(x,"__esModule",{value:!0});var ye=Ft(),N=qn();x.RequestType=N.RequestType;x.RequestType0=N.RequestType0;x.RequestType1=N.RequestType1;x.RequestType2=N.RequestType2;x.RequestType3=N.RequestType3;x.RequestType4=N.RequestType4;x.RequestType5=N.RequestType5;x.RequestType6=N.RequestType6;x.RequestType7=N.RequestType7;x.RequestType8=N.RequestType8;x.RequestType9=N.RequestType9;x.ResponseError=N.ResponseError;x.ErrorCodes=N.ErrorCodes;x.NotificationType=N.NotificationType;x.NotificationType0=N.NotificationType0;x.NotificationType1=N.NotificationType1;x.NotificationType2=N.NotificationType2;x.NotificationType3=N.NotificationType3;x.NotificationType4=N.NotificationType4;x.NotificationType5=N.NotificationType5;x.NotificationType6=N.NotificationType6;x.NotificationType7=N.NotificationType7;x.NotificationType8=N.NotificationType8;x.NotificationType9=N.NotificationType9;var er=wr();x.MessageReader=er.MessageReader;x.StreamMessageReader=er.StreamMessageReader;x.IPCMessageReader=er.IPCMessageReader;x.SocketMessageReader=er.SocketMessageReader;var tr=Sr();x.MessageWriter=tr.MessageWriter;x.StreamMessageWriter=tr.StreamMessageWriter;x.IPCMessageWriter=tr.IPCMessageWriter;x.SocketMessageWriter=tr.SocketMessageWriter;var Ct=Qt();x.Disposable=Ct.Disposable;x.Event=Ct.Event;x.Emitter=Ct.Emitter;var It=zn();x.CancellationTokenSource=It.CancellationTokenSource;x.CancellationToken=It.CancellationToken;var rs=Gn();ts(Xn());ts(es());var rr;(function(r){r.type=new N.NotificationType("$/cancelRequest")})(rr||(rr={}));x.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var de;(function(r){r[r.Off=0]="Off",r[r.Messages=1]="Messages",r[r.Verbose=2]="Verbose"})(de=x.Trace||(x.Trace={}));(function(r){function e(i){switch(i=i.toLowerCase(),i){case"off":return r.Off;case"messages":return r.Messages;case"verbose":return r.Verbose;default:return r.Off}}r.fromString=e;function t(i){switch(i){case r.Off:return"off";case r.Messages:return"messages";case r.Verbose:return"verbose";default:return"off"}}r.toString=t})(de=x.Trace||(x.Trace={}));var Ne;(function(r){r.Text="text",r.JSON="json"})(Ne=x.TraceFormat||(x.TraceFormat={}));(function(r){function e(t){return t=t.toLowerCase(),t==="json"?r.JSON:r.Text}r.fromString=e})(Ne=x.TraceFormat||(x.TraceFormat={}));var is;(function(r){r.type=new N.NotificationType("$/setTraceNotification")})(is=x.SetTraceNotification||(x.SetTraceNotification={}));var si;(function(r){r.type=new N.NotificationType("$/logTraceNotification")})(si=x.LogTraceNotification||(x.LogTraceNotification={}));var br;(function(r){r[r.Closed=1]="Closed",r[r.Disposed=2]="Disposed",r[r.AlreadyListening=3]="AlreadyListening"})(br=x.ConnectionErrors||(x.ConnectionErrors={}));var Rt=class extends Error{constructor(e,t){super(t);this.code=e,Object.setPrototypeOf(this,Rt.prototype)}};x.ConnectionError=Rt;var tc;(function(r){function e(t){let i=t;return i&&ye.func(i.cancelUndispatched)}r.is=e})(tc=x.ConnectionStrategy||(x.ConnectionStrategy={}));var Ie;(function(r){r[r.New=1]="New",r[r.Listening=2]="Listening",r[r.Closed=3]="Closed",r[r.Disposed=4]="Disposed"})(Ie||(Ie={}));function rc(r,e,t,i){let a=0,o=0,u=0,c="2.0",d,y=Object.create(null),S,q=Object.create(null),L,A=new rs.LinkedMap,j=Object.create(null),I=Object.create(null),E=de.Off,W=Ne.Text,V,ie=Ie.New,qe=new Ct.Emitter,Se=new Ct.Emitter,je=new Ct.Emitter,Be=new Ct.Emitter;function Pe(n){return"req-"+n.toString()}function ke(n){return n===null?"res-unknown-"+(++u).toString():"res-"+n.toString()}function Qe(){return"not-"+(++o).toString()}function Je(n,h){N.isRequestMessage(h)?n.set(Pe(h.id),h):N.isResponseMessage(h)?n.set(ke(h.id),h):n.set(Qe(),h)}function Xe(n){}function Ve(){return ie===Ie.Listening}function rt(){return ie===Ie.Closed}function De(){return ie===Ie.Disposed}function Oe(){(ie===Ie.New||ie===Ie.Listening)&&(ie=Ie.Closed,Se.fire(void 0))}function it(n){qe.fire([n,void 0,void 0])}function dt(n){qe.fire(n)}r.onClose(Oe),r.onError(it),e.onClose(Oe),e.onError(dt);function Ye(){L||A.size===0||(L=setImmediate(()=>{L=void 0,nt()}))}function nt(){if(A.size===0)return;let n=A.shift();try{N.isRequestMessage(n)?g(n):N.isNotificationMessage(n)?U(n):N.isResponseMessage(n)?b(n):ne(n)}finally{Ye()}}let ft=n=>{try{if(N.isNotificationMessage(n)&&n.method===rr.type.method){let h=Pe(n.params.id),C=A.get(h);if(N.isRequestMessage(C)){let s=i&&i.cancelUndispatched?i.cancelUndispatched(C,Xe):Xe(C);if(s&&(s.error!==void 0||s.result!==void 0)){A.delete(h),s.id=C.id,st(s,n.method,Date.now()),e.write(s);return}}}Je(A,n)}finally{Ye()}};function g(n){if(De())return;function h(Q,le,te){let ge={jsonrpc:c,id:n.id};Q instanceof N.ResponseError?ge.error=Q.toJson():ge.result=Q===void 0?null:Q,st(ge,le,te),e.write(ge)}function C(Q,le,te){let ge={jsonrpc:c,id:n.id,error:Q.toJson()};st(ge,le,te),e.write(ge)}function s(Q,le,te){Q===void 0&&(Q=null);let ge={jsonrpc:c,id:n.id,result:Q};st(ge,le,te),e.write(ge)}bt(n);let m=y[n.method],T,F;m&&(T=m.type,F=m.handler);let B=Date.now();if(F||d){let Q=new It.CancellationTokenSource,le=String(n.id);I[le]=Q;try{let te;n.params===void 0||T!==void 0&&T.numberOfParams===0?te=F?F(Q.token):d(n.method,Q.token):ye.array(n.params)&&(T===void 0||T.numberOfParams>1)?te=F?F(...n.params,Q.token):d(n.method,...n.params,Q.token):te=F?F(n.params,Q.token):d(n.method,n.params,Q.token);let ge=te;te?ge.then?ge.then(Ae=>{delete I[le],h(Ae,n.method,B)},Ae=>{delete I[le],Ae instanceof N.ResponseError?C(Ae,n.method,B):Ae&&ye.string(Ae.message)?C(new N.ResponseError(N.ErrorCodes.InternalError,`Request ${n.method} failed with message: ${Ae.message}`),n.method,B):C(new N.ResponseError(N.ErrorCodes.InternalError,`Request ${n.method} failed unexpectedly without providing any details.`),n.method,B)}):(delete I[le],h(te,n.method,B)):(delete I[le],s(te,n.method,B))}catch(te){delete I[le],te instanceof N.ResponseError?h(te,n.method,B):te&&ye.string(te.message)?C(new N.ResponseError(N.ErrorCodes.InternalError,`Request ${n.method} failed with message: ${te.message}`),n.method,B):C(new N.ResponseError(N.ErrorCodes.InternalError,`Request ${n.method} failed unexpectedly without providing any details.`),n.method,B)}}else C(new N.ResponseError(N.ErrorCodes.MethodNotFound,`Unhandled method ${n.method}`),n.method,B)}function b(n){if(!De())if(n.id===null)n.error?t.error(`Received response message without id: Error is: 
${JSON.stringify(n.error,void 0,4)}`):t.error("Received response message without id. No further error information provided.");else{let h=String(n.id),C=j[h];if(Et(n,C),C){delete j[h];try{if(n.error){let s=n.error;C.reject(new N.ResponseError(s.code,s.message,s.data))}else if(n.result!==void 0)C.resolve(n.result);else throw new Error("Should never happen.")}catch(s){s.message?t.error(`Response handler '${C.method}' failed with message: ${s.message}`):t.error(`Response handler '${C.method}' failed unexpectedly.`)}}}}function U(n){if(De())return;let h,C;if(n.method===rr.type.method)C=s=>{let m=s.id,T=I[String(m)];T&&T.cancel()};else{let s=q[n.method];s&&(C=s.handler,h=s.type)}if(C||S)try{ht(n),n.params===void 0||h!==void 0&&h.numberOfParams===0?C?C():S(n.method):ye.array(n.params)&&(h===void 0||h.numberOfParams>1)?C?C(...n.params):S(n.method,...n.params):C?C(n.params):S(n.method,n.params)}catch(s){s.message?t.error(`Notification handler '${n.method}' failed with message: ${s.message}`):t.error(`Notification handler '${n.method}' failed unexpectedly.`)}else je.fire(n)}function ne(n){if(!n){t.error("Received empty message.");return}t.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(n,null,4)}`);let h=n;if(ye.string(h.id)||ye.number(h.id)){let C=String(h.id),s=j[C];s&&s.reject(new Error("The received response has neither a result nor an error property."))}}function me(n){if(!(E===de.Off||!V))if(W===Ne.Text){let h;E===de.Verbose&&n.params&&(h=`Params: ${JSON.stringify(n.params,null,4)}

`),V.log(`Sending request '${n.method} - (${n.id})'.`,h)}else Fe("send-request",n)}function Ht(n){if(!(E===de.Off||!V))if(W===Ne.Text){let h;E===de.Verbose&&(n.params?h=`Params: ${JSON.stringify(n.params,null,4)}

`:h=`No parameters provided.

`),V.log(`Sending notification '${n.method}'.`,h)}else Fe("send-notification",n)}function st(n,h,C){if(!(E===de.Off||!V))if(W===Ne.Text){let s;E===de.Verbose&&(n.error&&n.error.data?s=`Error data: ${JSON.stringify(n.error.data,null,4)}

`:n.result?s=`Result: ${JSON.stringify(n.result,null,4)}

`:n.error===void 0&&(s=`No result returned.

`)),V.log(`Sending response '${h} - (${n.id})'. Processing request took ${Date.now()-C}ms`,s)}else Fe("send-response",n)}function bt(n){if(!(E===de.Off||!V))if(W===Ne.Text){let h;E===de.Verbose&&n.params&&(h=`Params: ${JSON.stringify(n.params,null,4)}

`),V.log(`Received request '${n.method} - (${n.id})'.`,h)}else Fe("receive-request",n)}function ht(n){if(!(E===de.Off||!V||n.method===si.type.method))if(W===Ne.Text){let h;E===de.Verbose&&(n.params?h=`Params: ${JSON.stringify(n.params,null,4)}

`:h=`No parameters provided.

`),V.log(`Received notification '${n.method}'.`,h)}else Fe("receive-notification",n)}function Et(n,h){if(!(E===de.Off||!V))if(W===Ne.Text){let C;if(E===de.Verbose&&(n.error&&n.error.data?C=`Error data: ${JSON.stringify(n.error.data,null,4)}

`:n.result?C=`Result: ${JSON.stringify(n.result,null,4)}

`:n.error===void 0&&(C=`No result returned.

`)),h){let s=n.error?` Request failed: ${n.error.message} (${n.error.code}).`:"";V.log(`Received response '${h.method} - (${n.id})' in ${Date.now()-h.timerStart}ms.${s}`,C)}else V.log(`Received response ${n.id} without active response promise.`,C)}else Fe("receive-response",n)}function Fe(n,h){if(!V||E===de.Off)return;let C={isLSPMessage:!0,type:n,message:h,timestamp:Date.now()};V.log(C)}function Ze(){if(rt())throw new Rt(br.Closed,"Connection is closed.");if(De())throw new Rt(br.Disposed,"Connection is disposed.")}function R(){if(Ve())throw new Rt(br.AlreadyListening,"Connection is already listening")}function l(){if(!Ve())throw new Error("Call listen() first.")}function v(n){return n===void 0?null:n}function _(n,h){let C,s=n.numberOfParams;switch(s){case 0:C=null;break;case 1:C=v(h[0]);break;default:C=[];for(let m=0;m<h.length&&m<s;m++)C.push(v(h[m]));if(h.length<s)for(let m=h.length;m<s;m++)C.push(null);break}return C}let p={sendNotification:(n,...h)=>{Ze();let C,s;if(ye.string(n))switch(C=n,h.length){case 0:s=null;break;case 1:s=h[0];break;default:s=h;break}else C=n.method,s=_(n,h);let m={jsonrpc:c,method:C,params:s};Ht(m),e.write(m)},onNotification:(n,h)=>{Ze(),ye.func(n)?S=n:h&&(ye.string(n)?q[n]={type:void 0,handler:h}:q[n.method]={type:n,handler:h})},sendRequest:(n,...h)=>{Ze(),l();let C,s,m;if(ye.string(n))switch(C=n,h.length){case 0:s=null;break;case 1:It.CancellationToken.is(h[0])?(s=null,m=h[0]):s=v(h[0]);break;default:let B=h.length-1;It.CancellationToken.is(h[B])?(m=h[B],h.length===2?s=v(h[0]):s=h.slice(0,B).map(Q=>v(Q))):s=h.map(Q=>v(Q));break}else{C=n.method,s=_(n,h);let B=n.numberOfParams;m=It.CancellationToken.is(h[B])?h[B]:void 0}let T=a++,F=new Promise((B,Q)=>{let le={jsonrpc:c,id:T,method:C,params:s},te={method:C,timerStart:Date.now(),resolve:B,reject:Q};me(le);try{e.write(le)}catch(ge){te.reject(new N.ResponseError(N.ErrorCodes.MessageWriteError,ge.message?ge.message:"Unknown reason")),te=null}te&&(j[String(T)]=te)});return m&&m.onCancellationRequested(()=>{p.sendNotification(rr.type,{id:T})}),F},onRequest:(n,h)=>{Ze(),ye.func(n)?d=n:h&&(ye.string(n)?y[n]={type:void 0,handler:h}:y[n.method]={type:n,handler:h})},trace:(n,h,C)=>{let s=!1,m=Ne.Text;C!==void 0&&(ye.boolean(C)?s=C:(s=C.sendNotification||!1,m=C.traceFormat||Ne.Text)),E=n,W=m,E===de.Off?V=void 0:V=h,s&&!rt()&&!De()&&p.sendNotification(is.type,{value:de.toString(n)})},onError:qe.event,onClose:Se.event,onUnhandledNotification:je.event,onDispose:Be.event,dispose:()=>{if(De())return;ie=Ie.Disposed,Be.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(j).forEach(h=>{j[h].reject(n)}),j=Object.create(null),I=Object.create(null),A=new rs.LinkedMap,ye.func(e.dispose)&&e.dispose(),ye.func(r.dispose)&&r.dispose()},listen:()=>{Ze(),R(),ie=Ie.Listening,r.listen(ft)},inspect:()=>{console.log("inspect")}};return p.onNotification(si.type,n=>{E===de.Off||!V||V.log(n.message,E===de.Verbose?n.verbose:void 0)}),p}function ic(r){return r.listen!==void 0&&r.read===void 0}function nc(r){return r.write!==void 0&&r.end===void 0}function sc(r,e,t,i){t||(t=x.NullLogger);let a=ic(r)?r:new er.StreamMessageReader(r),o=nc(e)?e:new tr.StreamMessageWriter(e);return rc(a,o,t,i)}x.createMessageConnection=sc});var ss=H((ns,Er)=>{(function(r){if(typeof Er=="object"&&typeof Er.exports=="object"){var e=r(require,ns);e!==void 0&&(Er.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],r)})(function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t;(function(l){function v(p,n){return{line:p,character:n}}l.create=v;function _(p){var n=p;return R.objectLiteral(n)&&R.number(n.line)&&R.number(n.character)}l.is=_})(t=e.Position||(e.Position={}));var i;(function(l){function v(p,n,h,C){if(R.number(p)&&R.number(n)&&R.number(h)&&R.number(C))return{start:t.create(p,n),end:t.create(h,C)};if(t.is(p)&&t.is(n))return{start:p,end:n};throw new Error("Range#create called with invalid arguments["+p+", "+n+", "+h+", "+C+"]")}l.create=v;function _(p){var n=p;return R.objectLiteral(n)&&t.is(n.start)&&t.is(n.end)}l.is=_})(i=e.Range||(e.Range={}));var a;(function(l){function v(p,n){return{uri:p,range:n}}l.create=v;function _(p){var n=p;return R.defined(n)&&i.is(n.range)&&(R.string(n.uri)||R.undefined(n.uri))}l.is=_})(a=e.Location||(e.Location={}));var o;(function(l){function v(p,n,h,C){return{targetUri:p,targetRange:n,targetSelectionRange:h,originSelectionRange:C}}l.create=v;function _(p){var n=p;return R.defined(n)&&i.is(n.targetRange)&&R.string(n.targetUri)&&(i.is(n.targetSelectionRange)||R.undefined(n.targetSelectionRange))&&(i.is(n.originSelectionRange)||R.undefined(n.originSelectionRange))}l.is=_})(o=e.LocationLink||(e.LocationLink={}));var u;(function(l){function v(p,n,h,C){return{red:p,green:n,blue:h,alpha:C}}l.create=v;function _(p){var n=p;return R.number(n.red)&&R.number(n.green)&&R.number(n.blue)&&R.number(n.alpha)}l.is=_})(u=e.Color||(e.Color={}));var c;(function(l){function v(p,n){return{range:p,color:n}}l.create=v;function _(p){var n=p;return i.is(n.range)&&u.is(n.color)}l.is=_})(c=e.ColorInformation||(e.ColorInformation={}));var d;(function(l){function v(p,n,h){return{label:p,textEdit:n,additionalTextEdits:h}}l.create=v;function _(p){var n=p;return R.string(n.label)&&(R.undefined(n.textEdit)||I.is(n))&&(R.undefined(n.additionalTextEdits)||R.typedArray(n.additionalTextEdits,I.is))}l.is=_})(d=e.ColorPresentation||(e.ColorPresentation={}));var y;(function(l){l.Comment="comment",l.Imports="imports",l.Region="region"})(y=e.FoldingRangeKind||(e.FoldingRangeKind={}));var S;(function(l){function v(p,n,h,C,s){var m={startLine:p,endLine:n};return R.defined(h)&&(m.startCharacter=h),R.defined(C)&&(m.endCharacter=C),R.defined(s)&&(m.kind=s),m}l.create=v;function _(p){var n=p;return R.number(n.startLine)&&R.number(n.startLine)&&(R.undefined(n.startCharacter)||R.number(n.startCharacter))&&(R.undefined(n.endCharacter)||R.number(n.endCharacter))&&(R.undefined(n.kind)||R.string(n.kind))}l.is=_})(S=e.FoldingRange||(e.FoldingRange={}));var q;(function(l){function v(p,n){return{location:p,message:n}}l.create=v;function _(p){var n=p;return R.defined(n)&&a.is(n.location)&&R.string(n.message)}l.is=_})(q=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var L;(function(l){l.Error=1,l.Warning=2,l.Information=3,l.Hint=4})(L=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var A;(function(l){function v(p,n,h,C,s,m){var T={range:p,message:n};return R.defined(h)&&(T.severity=h),R.defined(C)&&(T.code=C),R.defined(s)&&(T.source=s),R.defined(m)&&(T.relatedInformation=m),T}l.create=v;function _(p){var n=p;return R.defined(n)&&i.is(n.range)&&R.string(n.message)&&(R.number(n.severity)||R.undefined(n.severity))&&(R.number(n.code)||R.string(n.code)||R.undefined(n.code))&&(R.string(n.source)||R.undefined(n.source))&&(R.undefined(n.relatedInformation)||R.typedArray(n.relatedInformation,q.is))}l.is=_})(A=e.Diagnostic||(e.Diagnostic={}));var j;(function(l){function v(p,n){for(var h=[],C=2;C<arguments.length;C++)h[C-2]=arguments[C];var s={title:p,command:n};return R.defined(h)&&h.length>0&&(s.arguments=h),s}l.create=v;function _(p){var n=p;return R.defined(n)&&R.string(n.title)&&R.string(n.command)}l.is=_})(j=e.Command||(e.Command={}));var I;(function(l){function v(h,C){return{range:h,newText:C}}l.replace=v;function _(h,C){return{range:{start:h,end:h},newText:C}}l.insert=_;function p(h){return{range:h,newText:""}}l.del=p;function n(h){var C=h;return R.objectLiteral(C)&&R.string(C.newText)&&i.is(C.range)}l.is=n})(I=e.TextEdit||(e.TextEdit={}));var E;(function(l){function v(p,n){return{textDocument:p,edits:n}}l.create=v;function _(p){var n=p;return R.defined(n)&&Pe.is(n.textDocument)&&Array.isArray(n.edits)}l.is=_})(E=e.TextDocumentEdit||(e.TextDocumentEdit={}));var W;(function(l){function v(p,n){var h={kind:"create",uri:p};return n!==void 0&&(n.overwrite!==void 0||n.ignoreIfExists!==void 0)&&(h.options=n),h}l.create=v;function _(p){var n=p;return n&&n.kind==="create"&&R.string(n.uri)&&(n.options===void 0||(n.options.overwrite===void 0||R.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||R.boolean(n.options.ignoreIfExists)))}l.is=_})(W=e.CreateFile||(e.CreateFile={}));var V;(function(l){function v(p,n,h){var C={kind:"rename",oldUri:p,newUri:n};return h!==void 0&&(h.overwrite!==void 0||h.ignoreIfExists!==void 0)&&(C.options=h),C}l.create=v;function _(p){var n=p;return n&&n.kind==="rename"&&R.string(n.oldUri)&&R.string(n.newUri)&&(n.options===void 0||(n.options.overwrite===void 0||R.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||R.boolean(n.options.ignoreIfExists)))}l.is=_})(V=e.RenameFile||(e.RenameFile={}));var ie;(function(l){function v(p,n){var h={kind:"delete",uri:p};return n!==void 0&&(n.recursive!==void 0||n.ignoreIfNotExists!==void 0)&&(h.options=n),h}l.create=v;function _(p){var n=p;return n&&n.kind==="delete"&&R.string(n.uri)&&(n.options===void 0||(n.options.recursive===void 0||R.boolean(n.options.recursive))&&(n.options.ignoreIfNotExists===void 0||R.boolean(n.options.ignoreIfNotExists)))}l.is=_})(ie=e.DeleteFile||(e.DeleteFile={}));var qe;(function(l){function v(_){var p=_;return p&&(p.changes!==void 0||p.documentChanges!==void 0)&&(p.documentChanges===void 0||p.documentChanges.every(function(n){return R.string(n.kind)?W.is(n)||V.is(n)||ie.is(n):E.is(n)}))}l.is=v})(qe=e.WorkspaceEdit||(e.WorkspaceEdit={}));var Se=function(){function l(v){this.edits=v}return l.prototype.insert=function(v,_){this.edits.push(I.insert(v,_))},l.prototype.replace=function(v,_){this.edits.push(I.replace(v,_))},l.prototype.delete=function(v){this.edits.push(I.del(v))},l.prototype.add=function(v){this.edits.push(v)},l.prototype.all=function(){return this.edits},l.prototype.clear=function(){this.edits.splice(0,this.edits.length)},l}(),je=function(){function l(v){var _=this;this._textEditChanges=Object.create(null),v&&(this._workspaceEdit=v,v.documentChanges?v.documentChanges.forEach(function(p){if(E.is(p)){var n=new Se(p.edits);_._textEditChanges[p.textDocument.uri]=n}}):v.changes&&Object.keys(v.changes).forEach(function(p){var n=new Se(v.changes[p]);_._textEditChanges[p]=n}))}return Object.defineProperty(l.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),l.prototype.getTextEditChange=function(v){if(Pe.is(v)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var _=v,p=this._textEditChanges[_.uri];if(!p){var n=[],h={textDocument:_,edits:n};this._workspaceEdit.documentChanges.push(h),p=new Se(n),this._textEditChanges[_.uri]=p}return p}else{if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var p=this._textEditChanges[v];if(!p){var n=[];this._workspaceEdit.changes[v]=n,p=new Se(n),this._textEditChanges[v]=p}return p}},l.prototype.createFile=function(v,_){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(W.create(v,_))},l.prototype.renameFile=function(v,_,p){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(V.create(v,_,p))},l.prototype.deleteFile=function(v,_){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(ie.create(v,_))},l.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},l}();e.WorkspaceChange=je;var Be;(function(l){function v(p){return{uri:p}}l.create=v;function _(p){var n=p;return R.defined(n)&&R.string(n.uri)}l.is=_})(Be=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Pe;(function(l){function v(p,n){return{uri:p,version:n}}l.create=v;function _(p){var n=p;return R.defined(n)&&R.string(n.uri)&&(n.version===null||R.number(n.version))}l.is=_})(Pe=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var ke;(function(l){function v(p,n,h,C){return{uri:p,languageId:n,version:h,text:C}}l.create=v;function _(p){var n=p;return R.defined(n)&&R.string(n.uri)&&R.string(n.languageId)&&R.number(n.version)&&R.string(n.text)}l.is=_})(ke=e.TextDocumentItem||(e.TextDocumentItem={}));var Qe;(function(l){l.PlainText="plaintext",l.Markdown="markdown"})(Qe=e.MarkupKind||(e.MarkupKind={})),function(l){function v(_){var p=_;return p===l.PlainText||p===l.Markdown}l.is=v}(Qe=e.MarkupKind||(e.MarkupKind={}));var Je;(function(l){function v(_){var p=_;return R.objectLiteral(_)&&Qe.is(p.kind)&&R.string(p.value)}l.is=v})(Je=e.MarkupContent||(e.MarkupContent={}));var Xe;(function(l){l.Text=1,l.Method=2,l.Function=3,l.Constructor=4,l.Field=5,l.Variable=6,l.Class=7,l.Interface=8,l.Module=9,l.Property=10,l.Unit=11,l.Value=12,l.Enum=13,l.Keyword=14,l.Snippet=15,l.Color=16,l.File=17,l.Reference=18,l.Folder=19,l.EnumMember=20,l.Constant=21,l.Struct=22,l.Event=23,l.Operator=24,l.TypeParameter=25})(Xe=e.CompletionItemKind||(e.CompletionItemKind={}));var Ve;(function(l){l.PlainText=1,l.Snippet=2})(Ve=e.InsertTextFormat||(e.InsertTextFormat={}));var rt;(function(l){function v(_){return{label:_}}l.create=v})(rt=e.CompletionItem||(e.CompletionItem={}));var De;(function(l){function v(_,p){return{items:_||[],isIncomplete:!!p}}l.create=v})(De=e.CompletionList||(e.CompletionList={}));var Oe;(function(l){function v(p){return p.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}l.fromPlainText=v;function _(p){var n=p;return R.string(n)||R.objectLiteral(n)&&R.string(n.language)&&R.string(n.value)}l.is=_})(Oe=e.MarkedString||(e.MarkedString={}));var it;(function(l){function v(_){var p=_;return!!p&&R.objectLiteral(p)&&(Je.is(p.contents)||Oe.is(p.contents)||R.typedArray(p.contents,Oe.is))&&(_.range===void 0||i.is(_.range))}l.is=v})(it=e.Hover||(e.Hover={}));var dt;(function(l){function v(_,p){return p?{label:_,documentation:p}:{label:_}}l.create=v})(dt=e.ParameterInformation||(e.ParameterInformation={}));var Ye;(function(l){function v(_,p){for(var n=[],h=2;h<arguments.length;h++)n[h-2]=arguments[h];var C={label:_};return R.defined(p)&&(C.documentation=p),R.defined(n)?C.parameters=n:C.parameters=[],C}l.create=v})(Ye=e.SignatureInformation||(e.SignatureInformation={}));var nt;(function(l){l.Text=1,l.Read=2,l.Write=3})(nt=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var ft;(function(l){function v(_,p){var n={range:_};return R.number(p)&&(n.kind=p),n}l.create=v})(ft=e.DocumentHighlight||(e.DocumentHighlight={}));var g;(function(l){l.File=1,l.Module=2,l.Namespace=3,l.Package=4,l.Class=5,l.Method=6,l.Property=7,l.Field=8,l.Constructor=9,l.Enum=10,l.Interface=11,l.Function=12,l.Variable=13,l.Constant=14,l.String=15,l.Number=16,l.Boolean=17,l.Array=18,l.Object=19,l.Key=20,l.Null=21,l.EnumMember=22,l.Struct=23,l.Event=24,l.Operator=25,l.TypeParameter=26})(g=e.SymbolKind||(e.SymbolKind={}));var b;(function(l){function v(_,p,n,h,C){var s={name:_,kind:p,location:{uri:h,range:n}};return C&&(s.containerName=C),s}l.create=v})(b=e.SymbolInformation||(e.SymbolInformation={}));var U=function(){function l(){}return l}();e.DocumentSymbol=U,function(l){function v(p,n,h,C,s,m){var T={name:p,detail:n,kind:h,range:C,selectionRange:s};return m!==void 0&&(T.children=m),T}l.create=v;function _(p){var n=p;return n&&R.string(n.name)&&R.number(n.kind)&&i.is(n.range)&&i.is(n.selectionRange)&&(n.detail===void 0||R.string(n.detail))&&(n.deprecated===void 0||R.boolean(n.deprecated))&&(n.children===void 0||Array.isArray(n.children))}l.is=_}(U=e.DocumentSymbol||(e.DocumentSymbol={})),e.DocumentSymbol=U;var ne;(function(l){l.QuickFix="quickfix",l.Refactor="refactor",l.RefactorExtract="refactor.extract",l.RefactorInline="refactor.inline",l.RefactorRewrite="refactor.rewrite",l.Source="source",l.SourceOrganizeImports="source.organizeImports"})(ne=e.CodeActionKind||(e.CodeActionKind={}));var me;(function(l){function v(p,n){var h={diagnostics:p};return n!=null&&(h.only=n),h}l.create=v;function _(p){var n=p;return R.defined(n)&&R.typedArray(n.diagnostics,A.is)&&(n.only===void 0||R.typedArray(n.only,R.string))}l.is=_})(me=e.CodeActionContext||(e.CodeActionContext={}));var Ht;(function(l){function v(p,n,h){var C={title:p};return j.is(n)?C.command=n:C.edit=n,h!==void 0&&(C.kind=h),C}l.create=v;function _(p){var n=p;return n&&R.string(n.title)&&(n.diagnostics===void 0||R.typedArray(n.diagnostics,A.is))&&(n.kind===void 0||R.string(n.kind))&&(n.edit!==void 0||n.command!==void 0)&&(n.command===void 0||j.is(n.command))&&(n.edit===void 0||qe.is(n.edit))}l.is=_})(Ht=e.CodeAction||(e.CodeAction={}));var st;(function(l){function v(p,n){var h={range:p};return R.defined(n)&&(h.data=n),h}l.create=v;function _(p){var n=p;return R.defined(n)&&i.is(n.range)&&(R.undefined(n.command)||j.is(n.command))}l.is=_})(st=e.CodeLens||(e.CodeLens={}));var bt;(function(l){function v(p,n){return{tabSize:p,insertSpaces:n}}l.create=v;function _(p){var n=p;return R.defined(n)&&R.number(n.tabSize)&&R.boolean(n.insertSpaces)}l.is=_})(bt=e.FormattingOptions||(e.FormattingOptions={}));var ht=function(){function l(){}return l}();e.DocumentLink=ht,function(l){function v(p,n,h){return{range:p,target:n,data:h}}l.create=v;function _(p){var n=p;return R.defined(n)&&i.is(n.range)&&(R.undefined(n.target)||R.string(n.target))}l.is=_}(ht=e.DocumentLink||(e.DocumentLink={})),e.DocumentLink=ht,e.EOL=[`
`,`\r
`,"\r"];var Et;(function(l){function v(h,C,s,m){return new Ze(h,C,s,m)}l.create=v;function _(h){var C=h;return!!(R.defined(C)&&R.string(C.uri)&&(R.undefined(C.languageId)||R.string(C.languageId))&&R.number(C.lineCount)&&R.func(C.getText)&&R.func(C.positionAt)&&R.func(C.offsetAt))}l.is=_;function p(h,C){for(var s=h.getText(),m=n(C,function(te,ge){var Ae=te.range.start.line-ge.range.start.line;return Ae===0?te.range.start.character-ge.range.start.character:Ae}),T=s.length,F=m.length-1;F>=0;F--){var B=m[F],Q=h.offsetAt(B.range.start),le=h.offsetAt(B.range.end);if(le<=T)s=s.substring(0,Q)+B.newText+s.substring(le,s.length);else throw new Error("Overlapping edit");T=Q}return s}l.applyEdits=p;function n(h,C){if(h.length<=1)return h;var s=h.length/2|0,m=h.slice(0,s),T=h.slice(s);n(m,C),n(T,C);for(var F=0,B=0,Q=0;F<m.length&&B<T.length;){var le=C(m[F],T[B]);le<=0?h[Q++]=m[F++]:h[Q++]=T[B++]}for(;F<m.length;)h[Q++]=m[F++];for(;B<T.length;)h[Q++]=T[B++];return h}})(Et=e.TextDocument||(e.TextDocument={}));var Fe;(function(l){l.Manual=1,l.AfterDelay=2,l.FocusOut=3})(Fe=e.TextDocumentSaveReason||(e.TextDocumentSaveReason={}));var Ze=function(){function l(v,_,p,n){this._uri=v,this._languageId=_,this._version=p,this._content=n,this._lineOffsets=null}return Object.defineProperty(l.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),l.prototype.getText=function(v){if(v){var _=this.offsetAt(v.start),p=this.offsetAt(v.end);return this._content.substring(_,p)}return this._content},l.prototype.update=function(v,_){this._content=v.text,this._version=_,this._lineOffsets=null},l.prototype.getLineOffsets=function(){if(this._lineOffsets===null){for(var v=[],_=this._content,p=!0,n=0;n<_.length;n++){p&&(v.push(n),p=!1);var h=_.charAt(n);p=h==="\r"||h===`
`,h==="\r"&&n+1<_.length&&_.charAt(n+1)===`
`&&n++}p&&_.length>0&&v.push(_.length),this._lineOffsets=v}return this._lineOffsets},l.prototype.positionAt=function(v){v=Math.max(Math.min(v,this._content.length),0);var _=this.getLineOffsets(),p=0,n=_.length;if(n===0)return t.create(0,v);for(;p<n;){var h=Math.floor((p+n)/2);_[h]>v?n=h:p=h+1}var C=p-1;return t.create(C,v-_[C])},l.prototype.offsetAt=function(v){var _=this.getLineOffsets();if(v.line>=_.length)return this._content.length;if(v.line<0)return 0;var p=_[v.line],n=v.line+1<_.length?_[v.line+1]:this._content.length;return Math.max(Math.min(p+v.character,n),p)},Object.defineProperty(l.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),l}(),R;(function(l){var v=Object.prototype.toString;function _(F){return typeof F!="undefined"}l.defined=_;function p(F){return typeof F=="undefined"}l.undefined=p;function n(F){return F===!0||F===!1}l.boolean=n;function h(F){return v.call(F)==="[object String]"}l.string=h;function C(F){return v.call(F)==="[object Number]"}l.number=C;function s(F){return v.call(F)==="[object Function]"}l.func=s;function m(F){return F!==null&&typeof F=="object"}l.objectLiteral=m;function T(F,B){return Array.isArray(F)&&F.every(B)}l.typedArray=T})(R||(R={}))})});var us=H(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});function oc(r){return r===!0||r===!1}Le.boolean=oc;function os(r){return typeof r=="string"||r instanceof String}Le.string=os;function ac(r){return typeof r=="number"||r instanceof Number}Le.number=ac;function cc(r){return r instanceof Error}Le.error=cc;function as(r){return typeof r=="function"}Le.func=as;function cs(r){return Array.isArray(r)}Le.array=cs;function uc(r){return cs(r)&&r.every(e=>os(e))}Le.stringArray=uc;function lc(r,e){return Array.isArray(r)&&r.every(e)}Le.typedArray=lc;function dc(r){return r&&as(r.then)}Le.thenable=dc});var ls=H(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});var fc=He(),hc;(function(r){r.type=new fc.RequestType("textDocument/implementation")})(hc=xr.ImplementationRequest||(xr.ImplementationRequest={}))});var ds=H(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});var pc=He(),gc;(function(r){r.type=new pc.RequestType("textDocument/typeDefinition")})(gc=qr.TypeDefinitionRequest||(qr.TypeDefinitionRequest={}))});var hs=H(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});var fs=He(),mc;(function(r){r.type=new fs.RequestType0("workspace/workspaceFolders")})(mc=Lt.WorkspaceFoldersRequest||(Lt.WorkspaceFoldersRequest={}));var vc;(function(r){r.type=new fs.NotificationType("workspace/didChangeWorkspaceFolders")})(vc=Lt.DidChangeWorkspaceFoldersNotification||(Lt.DidChangeWorkspaceFoldersNotification={}))});var ps=H(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});var yc=He(),Cc;(function(r){r.type=new yc.RequestType("workspace/configuration")})(Cc=Pr.ConfigurationRequest||(Pr.ConfigurationRequest={}))});var ms=H(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});var gs=He(),Rc;(function(r){r.type=new gs.RequestType("textDocument/documentColor")})(Rc=Mt.DocumentColorRequest||(Mt.DocumentColorRequest={}));var _c;(function(r){r.type=new gs.RequestType("textDocument/colorPresentation")})(_c=Mt.ColorPresentationRequest||(Mt.ColorPresentationRequest={}))});var vs=H(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});var wc=He(),Dc;(function(r){r.Comment="comment",r.Imports="imports",r.Region="region"})(Dc=jt.FoldingRangeKind||(jt.FoldingRangeKind={}));var Sc;(function(r){r.type=new wc.RequestType("textDocument/foldingRange")})(Sc=jt.FoldingRangeRequest||(jt.FoldingRangeRequest={}))});var ys=H(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});var Tc=He(),bc;(function(r){r.type=new Tc.RequestType("textDocument/declaration")})(bc=kr.DeclarationRequest||(kr.DeclarationRequest={}))});var _s=H(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var oi=us(),K=He(),Ec=ls();w.ImplementationRequest=Ec.ImplementationRequest;var xc=ds();w.TypeDefinitionRequest=xc.TypeDefinitionRequest;var Cs=hs();w.WorkspaceFoldersRequest=Cs.WorkspaceFoldersRequest;w.DidChangeWorkspaceFoldersNotification=Cs.DidChangeWorkspaceFoldersNotification;var qc=ps();w.ConfigurationRequest=qc.ConfigurationRequest;var Rs=ms();w.DocumentColorRequest=Rs.DocumentColorRequest;w.ColorPresentationRequest=Rs.ColorPresentationRequest;var Pc=vs();w.FoldingRangeRequest=Pc.FoldingRangeRequest;var kc=ys();w.DeclarationRequest=kc.DeclarationRequest;var Oc;(function(r){function e(t){let i=t;return oi.string(i.language)||oi.string(i.scheme)||oi.string(i.pattern)}r.is=e})(Oc=w.DocumentFilter||(w.DocumentFilter={}));var Fc;(function(r){r.type=new K.RequestType("client/registerCapability")})(Fc=w.RegistrationRequest||(w.RegistrationRequest={}));var Nc;(function(r){r.type=new K.RequestType("client/unregisterCapability")})(Nc=w.UnregistrationRequest||(w.UnregistrationRequest={}));var Ic;(function(r){r.Create="create",r.Rename="rename",r.Delete="delete"})(Ic=w.ResourceOperationKind||(w.ResourceOperationKind={}));var Lc;(function(r){r.Abort="abort",r.Transactional="transactional",r.TextOnlyTransactional="textOnlyTransactional",r.Undo="undo"})(Lc=w.FailureHandlingKind||(w.FailureHandlingKind={}));var Mc;(function(r){r.None=0,r.Full=1,r.Incremental=2})(Mc=w.TextDocumentSyncKind||(w.TextDocumentSyncKind={}));var jc;(function(r){r.type=new K.RequestType("initialize")})(jc=w.InitializeRequest||(w.InitializeRequest={}));var Ac;(function(r){r.unknownProtocolVersion=1})(Ac=w.InitializeError||(w.InitializeError={}));var Wc;(function(r){r.type=new K.NotificationType("initialized")})(Wc=w.InitializedNotification||(w.InitializedNotification={}));var Hc;(function(r){r.type=new K.RequestType0("shutdown")})(Hc=w.ShutdownRequest||(w.ShutdownRequest={}));var Kc;(function(r){r.type=new K.NotificationType0("exit")})(Kc=w.ExitNotification||(w.ExitNotification={}));var $c;(function(r){r.type=new K.NotificationType("workspace/didChangeConfiguration")})($c=w.DidChangeConfigurationNotification||(w.DidChangeConfigurationNotification={}));var zc;(function(r){r.Error=1,r.Warning=2,r.Info=3,r.Log=4})(zc=w.MessageType||(w.MessageType={}));var Uc;(function(r){r.type=new K.NotificationType("window/showMessage")})(Uc=w.ShowMessageNotification||(w.ShowMessageNotification={}));var Gc;(function(r){r.type=new K.RequestType("window/showMessageRequest")})(Gc=w.ShowMessageRequest||(w.ShowMessageRequest={}));var Bc;(function(r){r.type=new K.NotificationType("window/logMessage")})(Bc=w.LogMessageNotification||(w.LogMessageNotification={}));var Qc;(function(r){r.type=new K.NotificationType("telemetry/event")})(Qc=w.TelemetryEventNotification||(w.TelemetryEventNotification={}));var Jc;(function(r){r.type=new K.NotificationType("textDocument/didOpen")})(Jc=w.DidOpenTextDocumentNotification||(w.DidOpenTextDocumentNotification={}));var Xc;(function(r){r.type=new K.NotificationType("textDocument/didChange")})(Xc=w.DidChangeTextDocumentNotification||(w.DidChangeTextDocumentNotification={}));var Vc;(function(r){r.type=new K.NotificationType("textDocument/didClose")})(Vc=w.DidCloseTextDocumentNotification||(w.DidCloseTextDocumentNotification={}));var Yc;(function(r){r.type=new K.NotificationType("textDocument/didSave")})(Yc=w.DidSaveTextDocumentNotification||(w.DidSaveTextDocumentNotification={}));var Zc;(function(r){r.type=new K.NotificationType("textDocument/willSave")})(Zc=w.WillSaveTextDocumentNotification||(w.WillSaveTextDocumentNotification={}));var eu;(function(r){r.type=new K.RequestType("textDocument/willSaveWaitUntil")})(eu=w.WillSaveTextDocumentWaitUntilRequest||(w.WillSaveTextDocumentWaitUntilRequest={}));var tu;(function(r){r.type=new K.NotificationType("workspace/didChangeWatchedFiles")})(tu=w.DidChangeWatchedFilesNotification||(w.DidChangeWatchedFilesNotification={}));var ru;(function(r){r.Created=1,r.Changed=2,r.Deleted=3})(ru=w.FileChangeType||(w.FileChangeType={}));var iu;(function(r){r.Create=1,r.Change=2,r.Delete=4})(iu=w.WatchKind||(w.WatchKind={}));var nu;(function(r){r.type=new K.NotificationType("textDocument/publishDiagnostics")})(nu=w.PublishDiagnosticsNotification||(w.PublishDiagnosticsNotification={}));var su;(function(r){r.Invoked=1,r.TriggerCharacter=2,r.TriggerForIncompleteCompletions=3})(su=w.CompletionTriggerKind||(w.CompletionTriggerKind={}));var ou;(function(r){r.type=new K.RequestType("textDocument/completion")})(ou=w.CompletionRequest||(w.CompletionRequest={}));var au;(function(r){r.type=new K.RequestType("completionItem/resolve")})(au=w.CompletionResolveRequest||(w.CompletionResolveRequest={}));var cu;(function(r){r.type=new K.RequestType("textDocument/hover")})(cu=w.HoverRequest||(w.HoverRequest={}));var uu;(function(r){r.type=new K.RequestType("textDocument/signatureHelp")})(uu=w.SignatureHelpRequest||(w.SignatureHelpRequest={}));var lu;(function(r){r.type=new K.RequestType("textDocument/definition")})(lu=w.DefinitionRequest||(w.DefinitionRequest={}));var du;(function(r){r.type=new K.RequestType("textDocument/references")})(du=w.ReferencesRequest||(w.ReferencesRequest={}));var fu;(function(r){r.type=new K.RequestType("textDocument/documentHighlight")})(fu=w.DocumentHighlightRequest||(w.DocumentHighlightRequest={}));var hu;(function(r){r.type=new K.RequestType("textDocument/documentSymbol")})(hu=w.DocumentSymbolRequest||(w.DocumentSymbolRequest={}));var pu;(function(r){r.type=new K.RequestType("workspace/symbol")})(pu=w.WorkspaceSymbolRequest||(w.WorkspaceSymbolRequest={}));var gu;(function(r){r.type=new K.RequestType("textDocument/codeAction")})(gu=w.CodeActionRequest||(w.CodeActionRequest={}));var mu;(function(r){r.type=new K.RequestType("textDocument/codeLens")})(mu=w.CodeLensRequest||(w.CodeLensRequest={}));var vu;(function(r){r.type=new K.RequestType("codeLens/resolve")})(vu=w.CodeLensResolveRequest||(w.CodeLensResolveRequest={}));var yu;(function(r){r.type=new K.RequestType("textDocument/formatting")})(yu=w.DocumentFormattingRequest||(w.DocumentFormattingRequest={}));var Cu;(function(r){r.type=new K.RequestType("textDocument/rangeFormatting")})(Cu=w.DocumentRangeFormattingRequest||(w.DocumentRangeFormattingRequest={}));var Ru;(function(r){r.type=new K.RequestType("textDocument/onTypeFormatting")})(Ru=w.DocumentOnTypeFormattingRequest||(w.DocumentOnTypeFormattingRequest={}));var _u;(function(r){r.type=new K.RequestType("textDocument/rename")})(_u=w.RenameRequest||(w.RenameRequest={}));var wu;(function(r){r.type=new K.RequestType("textDocument/prepareRename")})(wu=w.PrepareRenameRequest||(w.PrepareRenameRequest={}));var Du;(function(r){r.type=new K.RequestType("textDocument/documentLink")})(Du=w.DocumentLinkRequest||(w.DocumentLinkRequest={}));var Su;(function(r){r.type=new K.RequestType("documentLink/resolve")})(Su=w.DocumentLinkResolveRequest||(w.DocumentLinkResolveRequest={}));var Tu;(function(r){r.type=new K.RequestType("workspace/executeCommand")})(Tu=w.ExecuteCommandRequest||(w.ExecuteCommandRequest={}));var bu;(function(r){r.type=new K.RequestType("workspace/applyEdit")})(bu=w.ApplyWorkspaceEditRequest||(w.ApplyWorkspaceEditRequest={}))});var Te=H(J=>{"use strict";function ws(r){for(var e in r)J.hasOwnProperty(e)||(J[e]=r[e])}Object.defineProperty(J,"__esModule",{value:!0});var ee=He();J.ErrorCodes=ee.ErrorCodes;J.ResponseError=ee.ResponseError;J.CancellationToken=ee.CancellationToken;J.CancellationTokenSource=ee.CancellationTokenSource;J.Disposable=ee.Disposable;J.Event=ee.Event;J.Emitter=ee.Emitter;J.Trace=ee.Trace;J.TraceFormat=ee.TraceFormat;J.SetTraceNotification=ee.SetTraceNotification;J.LogTraceNotification=ee.LogTraceNotification;J.RequestType=ee.RequestType;J.RequestType0=ee.RequestType0;J.NotificationType=ee.NotificationType;J.NotificationType0=ee.NotificationType0;J.MessageReader=ee.MessageReader;J.MessageWriter=ee.MessageWriter;J.ConnectionStrategy=ee.ConnectionStrategy;J.StreamMessageReader=ee.StreamMessageReader;J.StreamMessageWriter=ee.StreamMessageWriter;J.IPCMessageReader=ee.IPCMessageReader;J.IPCMessageWriter=ee.IPCMessageWriter;J.createClientPipeTransport=ee.createClientPipeTransport;J.createServerPipeTransport=ee.createServerPipeTransport;J.generateRandomPipeName=ee.generateRandomPipeName;J.createClientSocketTransport=ee.createClientSocketTransport;J.createServerSocketTransport=ee.createServerSocketTransport;ws(ss());ws(_s());function Eu(r,e,t,i){return ee.createMessageConnection(r,e,t,i)}J.createProtocolConnection=Eu});var Ke=H(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});function xu(r){return r===!0||r===!1}Me.boolean=xu;function Ds(r){return typeof r=="string"||r instanceof String}Me.string=Ds;function qu(r){return typeof r=="number"||r instanceof Number}Me.number=qu;function Pu(r){return r instanceof Error}Me.error=Pu;function Ss(r){return typeof r=="function"}Me.func=Ss;function Ts(r){return Array.isArray(r)}Me.array=Ts;function ku(r){return Ts(r)&&r.every(e=>Ds(e))}Me.stringArray=ku;function Ou(r,e){return Array.isArray(r)&&r.every(e)}Me.typedArray=Ou;function Fu(r){return r&&Ss(r.then)}Me.thenable=Fu});var ci=H(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});var Nu=require("vscode"),bs=class extends Nu.CompletionItem{constructor(e){super(e)}};ai.default=bs});var li=H(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});var Iu=require("vscode"),Es=class extends Iu.CodeLens{constructor(e){super(e)}};ui.default=Es});var fi=H(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});var Lu=require("vscode"),xs=class extends Lu.DocumentLink{constructor(e,t){super(e,t)}};di.default=xs});var qs=H(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});var $e=require("vscode"),fe=Te(),ir=Ke(),Mu=ci(),ju=li(),Au=fi();function Wu(r){let t=r||(g=>g.toString());function i(g){return t(g)}function a(g){return{uri:t(g.uri)}}function o(g){return{uri:t(g.uri),version:g.version}}function u(g){return{textDocument:{uri:t(g.uri),languageId:g.languageId,version:g.version,text:g.getText()}}}function c(g){let b=g;return!!b.document&&!!b.contentChanges}function d(g){let b=g;return!!b.uri&&!!b.version}function y(g){if(d(g))return{textDocument:{uri:t(g.uri),version:g.version},contentChanges:[{text:g.getText()}]};if(c(g)){let b=g.document;return{textDocument:{uri:t(b.uri),version:b.version},contentChanges:g.contentChanges.map(ne=>{let me=ne.range;return{range:{start:{line:me.start.line,character:me.start.character},end:{line:me.end.line,character:me.end.character}},rangeLength:ne.rangeLength,text:ne.text}})}}else throw Error("Unsupported text document change parameter")}function S(g){return{textDocument:a(g)}}function q(g,b=!1){let U={textDocument:o(g)};return b&&(U.text=g.getText()),U}function L(g){switch(g){case $e.TextDocumentSaveReason.Manual:return fe.TextDocumentSaveReason.Manual;case $e.TextDocumentSaveReason.AfterDelay:return fe.TextDocumentSaveReason.AfterDelay;case $e.TextDocumentSaveReason.FocusOut:return fe.TextDocumentSaveReason.FocusOut}return fe.TextDocumentSaveReason.Manual}function A(g){return{textDocument:a(g.document),reason:L(g.reason)}}function j(g,b){return{textDocument:a(g),position:W(b)}}function I(g){switch(g){case $e.CompletionTriggerKind.TriggerCharacter:return fe.CompletionTriggerKind.TriggerCharacter;case $e.CompletionTriggerKind.TriggerForIncompleteCompletions:return fe.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return fe.CompletionTriggerKind.Invoked}}function E(g,b,U){return{textDocument:a(g),position:W(b),context:{triggerKind:I(U.triggerKind),triggerCharacter:U.triggerCharacter}}}function W(g){return{line:g.line,character:g.character}}function V(g){if(g!==void 0)return g===null?null:{line:g.line,character:g.character}}function ie(g){return g==null?g:{start:V(g.start),end:V(g.end)}}function qe(g){switch(g){case $e.DiagnosticSeverity.Error:return fe.DiagnosticSeverity.Error;case $e.DiagnosticSeverity.Warning:return fe.DiagnosticSeverity.Warning;case $e.DiagnosticSeverity.Information:return fe.DiagnosticSeverity.Information;case $e.DiagnosticSeverity.Hint:return fe.DiagnosticSeverity.Hint}}function Se(g){let b=fe.Diagnostic.create(ie(g.range),g.message);return ir.number(g.severity)&&(b.severity=qe(g.severity)),(ir.number(g.code)||ir.string(g.code))&&(b.code=g.code),g.source&&(b.source=g.source),b}function je(g){return g==null?g:g.map(Se)}function Be(g,b){switch(g){case"$string":return b;case fe.MarkupKind.PlainText:return{kind:g,value:b};case fe.MarkupKind.Markdown:return{kind:g,value:b.value};default:return`Unsupported Markup content received. Kind is: ${g}`}}function Pe(g,b){return b!==void 0?b:g+1}function ke(g){let b={label:g.label},U=g instanceof Mu.default?g:void 0;return g.detail&&(b.detail=g.detail),g.documentation&&(!U||U.documentationFormat==="$string"?b.documentation=g.documentation:b.documentation=Be(U.documentationFormat,g.documentation)),g.filterText&&(b.filterText=g.filterText),Qe(b,g),ir.number(g.kind)&&(b.kind=Pe(g.kind,U&&U.originalItemKind)),g.sortText&&(b.sortText=g.sortText),g.additionalTextEdits&&(b.additionalTextEdits=Xe(g.additionalTextEdits)),g.commitCharacters&&(b.commitCharacters=g.commitCharacters.slice()),g.command&&(b.command=De(g.command)),(g.preselect===!0||g.preselect===!1)&&(b.preselect=g.preselect),U&&(U.data!==void 0&&(b.data=U.data),(U.deprecated===!0||U.deprecated===!1)&&(b.deprecated=U.deprecated)),b}function Qe(g,b){let U=fe.InsertTextFormat.PlainText,ne,me;b.textEdit?(ne=b.textEdit.newText,me=ie(b.textEdit.range)):b.insertText instanceof $e.SnippetString?(U=fe.InsertTextFormat.Snippet,ne=b.insertText.value):ne=b.insertText,b.range&&(me=ie(b.range)),g.insertTextFormat=U,b.fromEdit&&ne&&me?g.textEdit={newText:ne,range:me}:g.insertText=ne}function Je(g){return{range:ie(g.range),newText:g.newText}}function Xe(g){return g==null?g:g.map(Je)}function Ve(g,b,U){return{textDocument:a(g),position:W(b),context:{includeDeclaration:U.includeDeclaration}}}function rt(g){return g==null?g:fe.CodeActionContext.create(je(g.diagnostics),ir.string(g.only)?[g.only]:void 0)}function De(g){let b=fe.Command.create(g.title,g.command);return g.arguments&&(b.arguments=g.arguments),b}function Oe(g){let b=fe.CodeLens.create(ie(g.range));return g.command&&(b.command=De(g.command)),g instanceof ju.default&&g.data&&(b.data=g.data),b}function it(g){return{tabSize:g.tabSize,insertSpaces:g.insertSpaces}}function dt(g){return{textDocument:a(g)}}function Ye(g){return{textDocument:a(g)}}function nt(g){let b=fe.DocumentLink.create(ie(g.range));g.target&&(b.target=i(g.target));let U=g instanceof Au.default?g:void 0;return U&&U.data&&(b.data=U.data),b}function ft(g){return{textDocument:a(g)}}return{asUri:i,asTextDocumentIdentifier:a,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:u,asChangeTextDocumentParams:y,asCloseTextDocumentParams:S,asSaveTextDocumentParams:q,asWillSaveTextDocumentParams:A,asTextDocumentPositionParams:j,asCompletionParams:E,asWorkerPosition:W,asRange:ie,asPosition:V,asDiagnosticSeverity:qe,asDiagnostic:Se,asDiagnostics:je,asCompletionItem:ke,asTextEdit:Je,asReferenceParams:Ve,asCodeActionContext:rt,asCommand:De,asCodeLens:Oe,asFormattingOptions:it,asDocumentSymbolParams:dt,asCodeLensParams:Ye,asDocumentLink:nt,asDocumentLinkParams:ft}}hi.createConverter=Wu});var Ps=H(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});var P=require("vscode"),X=Te(),be=Ke(),Hu=ci(),Ku=li(),$u=fi(),Or;(function(r){function e(t){let i=t;return i&&be.string(i.language)&&be.string(i.value)}r.is=e})(Or||(Or={}));function zu(r){let t=r||(s=>P.Uri.parse(s));function i(s){return t(s)}function a(s){return s.map(o)}function o(s){let m=new P.Diagnostic(y(s.range),s.message,S(s.severity));return(be.number(s.code)||be.string(s.code))&&(m.code=s.code),s.source&&(m.source=s.source),s.relatedInformation&&(m.relatedInformation=u(s.relatedInformation)),m}function u(s){return s.map(c)}function c(s){return new P.DiagnosticRelatedInformation(ke(s.location),s.message)}function d(s){if(!!s)return new P.Position(s.line,s.character)}function y(s){if(!!s)return new P.Range(d(s.start),d(s.end))}function S(s){if(s==null)return P.DiagnosticSeverity.Error;switch(s){case X.DiagnosticSeverity.Error:return P.DiagnosticSeverity.Error;case X.DiagnosticSeverity.Warning:return P.DiagnosticSeverity.Warning;case X.DiagnosticSeverity.Information:return P.DiagnosticSeverity.Information;case X.DiagnosticSeverity.Hint:return P.DiagnosticSeverity.Hint}return P.DiagnosticSeverity.Error}function q(s){if(be.string(s))return new P.MarkdownString(s);if(Or.is(s))return new P.MarkdownString().appendCodeblock(s.value,s.language);if(Array.isArray(s)){let m=[];for(let T of s){let F=new P.MarkdownString;Or.is(T)?F.appendCodeblock(T.value,T.language):F.appendMarkdown(T),m.push(F)}return m}else{let m;switch(s.kind){case X.MarkupKind.Markdown:return new P.MarkdownString(s.value);case X.MarkupKind.PlainText:return m=new P.MarkdownString,m.appendText(s.value),m;default:return m=new P.MarkdownString,m.appendText(`Unsupported Markup content received. Kind is: ${s.kind}`),m}}}function L(s){if(be.string(s))return s;switch(s.kind){case X.MarkupKind.Markdown:return new P.MarkdownString(s.value);case X.MarkupKind.PlainText:return s.value;default:return`Unsupported Markup content received. Kind is: ${s.kind}`}}function A(s){if(!!s)return new P.Hover(q(s.contents),y(s.range))}function j(s){if(!s)return;if(Array.isArray(s))return s.map(E);let m=s;return new P.CompletionList(m.items.map(E),m.isIncomplete)}function I(s){return X.CompletionItemKind.Text<=s&&s<=X.CompletionItemKind.TypeParameter?[s-1,void 0]:[P.CompletionItemKind.Text,s]}function E(s){let m=new Hu.default(s.label);s.detail&&(m.detail=s.detail),s.documentation&&(m.documentation=L(s.documentation),m.documentationFormat=be.string(s.documentation)?"$string":s.documentation.kind),s.filterText&&(m.filterText=s.filterText);let T=W(s);if(T&&(m.insertText=T.text,m.range=T.range,m.fromEdit=T.fromEdit),be.number(s.kind)){let[F,B]=I(s.kind);m.kind=F,B&&(m.originalItemKind=B)}return s.sortText&&(m.sortText=s.sortText),s.additionalTextEdits&&(m.additionalTextEdits=ie(s.additionalTextEdits)),be.stringArray(s.commitCharacters)&&(m.commitCharacters=s.commitCharacters.slice()),s.command&&(m.command=b(s.command)),(s.deprecated===!0||s.deprecated===!1)&&(m.deprecated=s.deprecated),(s.preselect===!0||s.preselect===!1)&&(m.preselect=s.preselect),s.data!==void 0&&(m.data=s.data),m}function W(s){return s.textEdit?s.insertTextFormat===X.InsertTextFormat.Snippet?{text:new P.SnippetString(s.textEdit.newText),range:y(s.textEdit.range),fromEdit:!0}:{text:s.textEdit.newText,range:y(s.textEdit.range),fromEdit:!0}:s.insertText?s.insertTextFormat===X.InsertTextFormat.Snippet?{text:new P.SnippetString(s.insertText),fromEdit:!1}:{text:s.insertText,fromEdit:!1}:void 0}function V(s){if(!!s)return new P.TextEdit(y(s.range),s.newText)}function ie(s){if(!!s)return s.map(V)}function qe(s){if(!s)return;let m=new P.SignatureHelp;return be.number(s.activeSignature)?m.activeSignature=s.activeSignature:m.activeSignature=0,be.number(s.activeParameter)?m.activeParameter=s.activeParameter:m.activeParameter=0,s.signatures&&(m.signatures=Se(s.signatures)),m}function Se(s){return s.map(je)}function je(s){let m=new P.SignatureInformation(s.label);return s.documentation&&(m.documentation=L(s.documentation)),s.parameters&&(m.parameters=Be(s.parameters)),m}function Be(s){return s.map(Pe)}function Pe(s){let m=new P.ParameterInformation(s.label);return s.documentation&&(m.documentation=L(s.documentation)),m}function ke(s){if(!!s)return new P.Location(t(s.uri),y(s.range))}function Qe(s){if(!!s)return Ve(s)}function Je(s){if(!!s)return Ve(s)}function Xe(s){if(!!s)return{targetUri:t(s.targetUri),targetRange:y(s.targetSelectionRange),originSelectionRange:y(s.originSelectionRange),targetSelectionRange:y(s.targetSelectionRange)}}function Ve(s){if(!!s)return be.array(s)?s.length===0?[]:X.LocationLink.is(s[0])?s.map(T=>Xe(T)):s.map(T=>ke(T)):X.LocationLink.is(s)?[Xe(s)]:ke(s)}function rt(s){if(!!s)return s.map(m=>ke(m))}function De(s){if(!!s)return s.map(Oe)}function Oe(s){let m=new P.DocumentHighlight(y(s.range));return be.number(s.kind)&&(m.kind=it(s.kind)),m}function it(s){switch(s){case X.DocumentHighlightKind.Text:return P.DocumentHighlightKind.Text;case X.DocumentHighlightKind.Read:return P.DocumentHighlightKind.Read;case X.DocumentHighlightKind.Write:return P.DocumentHighlightKind.Write}return P.DocumentHighlightKind.Text}function dt(s,m){if(!!s)return s.map(T=>nt(T,m))}function Ye(s){return s<=X.SymbolKind.TypeParameter?s-1:P.SymbolKind.Property}function nt(s,m){let T=new P.SymbolInformation(s.name,Ye(s.kind),y(s.location.range),s.location.uri?t(s.location.uri):m);return s.containerName&&(T.containerName=s.containerName),T}function ft(s){if(s!=null)return s.map(g)}function g(s){let m=new P.DocumentSymbol(s.name,s.detail||"",Ye(s.kind),y(s.range),y(s.selectionRange));if(s.children!==void 0&&s.children.length>0){let T=[];for(let F of s.children)T.push(g(F));m.children=T}return m}function b(s){let m={title:s.title,command:s.command};return s.arguments&&(m.arguments=s.arguments),m}function U(s){if(!!s)return s.map(b)}let ne=new Map;ne.set("",P.CodeActionKind.Empty),ne.set(X.CodeActionKind.QuickFix,P.CodeActionKind.QuickFix),ne.set(X.CodeActionKind.Refactor,P.CodeActionKind.Refactor),ne.set(X.CodeActionKind.RefactorExtract,P.CodeActionKind.RefactorExtract),ne.set(X.CodeActionKind.RefactorInline,P.CodeActionKind.RefactorInline),ne.set(X.CodeActionKind.RefactorRewrite,P.CodeActionKind.RefactorRewrite),ne.set(X.CodeActionKind.Source,P.CodeActionKind.Source),ne.set(X.CodeActionKind.SourceOrganizeImports,P.CodeActionKind.SourceOrganizeImports);function me(s){if(s==null)return;let m=ne.get(s);if(m)return m;let T=s.split(".");m=P.CodeActionKind.Empty;for(let F of T)m=m.append(F);return m}function Ht(s){if(s!=null)return s.map(m=>me(m))}function st(s){if(s==null)return;let m=new P.CodeAction(s.title);return s.kind!==void 0&&(m.kind=me(s.kind)),s.diagnostics&&(m.diagnostics=a(s.diagnostics)),s.edit&&(m.edit=Et(s.edit)),s.command&&(m.command=b(s.command)),m}function bt(s){if(!s)return;let m=new Ku.default(y(s.range));return s.command&&(m.command=b(s.command)),s.data!==void 0&&s.data!==null&&(m.data=s.data),m}function ht(s){if(!!s)return s.map(m=>bt(m))}function Et(s){if(!s)return;let m=new P.WorkspaceEdit;return s.documentChanges?s.documentChanges.forEach(T=>{X.CreateFile.is(T)?m.createFile(t(T.uri),T.options):X.RenameFile.is(T)?m.renameFile(t(T.oldUri),t(T.newUri),T.options):X.DeleteFile.is(T)?m.deleteFile(t(T.uri),T.options):X.TextDocumentEdit.is(T)?m.set(t(T.textDocument.uri),ie(T.edits)):console.error(`Unknown workspace edit change received:
${JSON.stringify(T,void 0,4)}`)}):s.changes&&Object.keys(s.changes).forEach(T=>{m.set(t(T),ie(s.changes[T]))}),m}function Fe(s){let m=y(s.range),T=s.target?i(s.target):void 0,F=new $u.default(m,T);return s.data!==void 0&&s.data!==null&&(F.data=s.data),F}function Ze(s){if(!!s)return s.map(Fe)}function R(s){return new P.Color(s.red,s.green,s.blue,s.alpha)}function l(s){return new P.ColorInformation(y(s.range),R(s.color))}function v(s){if(Array.isArray(s))return s.map(l)}function _(s){let m=new P.ColorPresentation(s.label);return m.additionalTextEdits=ie(s.additionalTextEdits),s.textEdit&&(m.textEdit=V(s.textEdit)),m}function p(s){if(Array.isArray(s))return s.map(_)}function n(s){if(s)switch(s){case X.FoldingRangeKind.Comment:return P.FoldingRangeKind.Comment;case X.FoldingRangeKind.Imports:return P.FoldingRangeKind.Imports;case X.FoldingRangeKind.Region:return P.FoldingRangeKind.Region}}function h(s){return new P.FoldingRange(s.startLine,s.endLine,n(s.kind))}function C(s){if(Array.isArray(s))return s.map(h)}return{asUri:i,asDiagnostics:a,asDiagnostic:o,asRange:y,asPosition:d,asDiagnosticSeverity:S,asHover:A,asCompletionResult:j,asCompletionItem:E,asTextEdit:V,asTextEdits:ie,asSignatureHelp:qe,asSignatureInformations:Se,asSignatureInformation:je,asParameterInformations:Be,asParameterInformation:Pe,asDeclarationResult:Qe,asDefinitionResult:Je,asLocation:ke,asReferences:rt,asDocumentHighlights:De,asDocumentHighlight:Oe,asDocumentHighlightKind:it,asSymbolInformations:dt,asSymbolInformation:nt,asDocumentSymbols:ft,asDocumentSymbol:g,asCommand:b,asCommands:U,asCodeAction:st,asCodeActionKind:me,asCodeActionKinds:Ht,asCodeLens:bt,asCodeLenses:ht,asWorkspaceEdit:Et,asDocumentLink:Fe,asDocumentLinks:Ze,asFoldingRangeKind:n,asFoldingRange:h,asFoldingRanges:C,asColor:R,asColorInformation:l,asColorInformations:v,asColorPresentation:_,asColorPresentations:p}}pi.createConverter=zu});var Os=H(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});var ks=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(i=>{this.onSuccess=i}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var i=this.task();return this.task=void 0,i})),(t>=0||this.timeout===void 0)&&(this.timeout=setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}};gi.Delayer=ks});var ct=H(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});var Fr=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},$=class extends Fr{constructor(){super([$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),"-",$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),"-","4",$._randomHex(),$._randomHex(),$._randomHex(),"-",$._oneOf($._timeHighBits),$._randomHex(),$._randomHex(),$._randomHex(),"-",$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex(),$._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return $._oneOf($._chars)}};$._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];$._timeHighBits=["8","9","a","b"];_t.empty=new Fr("00000000-0000-0000-0000-000000000000");function Fs(){return new $}_t.v4=Fs;var Uu=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ns(r){return Uu.test(r)}_t.isUUID=Ns;function Gu(r){if(!Ns(r))throw new Error("invalid uuid");return new Fr(r)}_t.parse=Gu;function Bu(){return Fs().asHex()}_t.generateUuid=Bu});var ut=H(Re=>{"use strict";function Qu(r){for(var e in r)Re.hasOwnProperty(e)||(Re[e]=r[e])}Object.defineProperty(Re,"__esModule",{value:!0});var k=require("vscode"),f=Te(),Ju=qs(),Xu=Ps(),ce=Ke(),Is=Os(),oe=ct();Qu(Te());var Ls=class{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}};function Vu(r,e,t,i){let a=new Ls,o=f.createProtocolConnection(r,e,a);return o.onError(c=>{t(c[0],c[1],c[2])}),o.onClose(i),{listen:()=>o.listen(),sendRequest:(c,...d)=>o.sendRequest(ce.string(c)?c:c.method,...d),onRequest:(c,d)=>o.onRequest(ce.string(c)?c:c.method,d),sendNotification:(c,d)=>o.sendNotification(ce.string(c)?c:c.method,d),onNotification:(c,d)=>o.onNotification(ce.string(c)?c:c.method,d),trace:(c,d,y)=>{let S={sendNotification:!1,traceFormat:f.TraceFormat.Text};y===void 0?o.trace(c,d,S):(ce.boolean(y),o.trace(c,d,y))},initialize:c=>o.sendRequest(f.InitializeRequest.type,c),shutdown:()=>o.sendRequest(f.ShutdownRequest.type,void 0),exit:()=>o.sendNotification(f.ExitNotification.type),onLogMessage:c=>o.onNotification(f.LogMessageNotification.type,c),onShowMessage:c=>o.onNotification(f.ShowMessageNotification.type,c),onTelemetry:c=>o.onNotification(f.TelemetryEventNotification.type,c),didChangeConfiguration:c=>o.sendNotification(f.DidChangeConfigurationNotification.type,c),didChangeWatchedFiles:c=>o.sendNotification(f.DidChangeWatchedFilesNotification.type,c),didOpenTextDocument:c=>o.sendNotification(f.DidOpenTextDocumentNotification.type,c),didChangeTextDocument:c=>o.sendNotification(f.DidChangeTextDocumentNotification.type,c),didCloseTextDocument:c=>o.sendNotification(f.DidCloseTextDocumentNotification.type,c),didSaveTextDocument:c=>o.sendNotification(f.DidSaveTextDocumentNotification.type,c),onDiagnostics:c=>o.onNotification(f.PublishDiagnosticsNotification.type,c),dispose:()=>o.dispose()}}var Nr;(function(r){r[r.Continue=1]="Continue",r[r.Shutdown=2]="Shutdown"})(Nr=Re.ErrorAction||(Re.ErrorAction={}));var wt;(function(r){r[r.DoNotRestart=1]="DoNotRestart",r[r.Restart=2]="Restart"})(wt=Re.CloseAction||(Re.CloseAction={}));var mi=class{constructor(e){this.name=e,this.restarts=[]}error(e,t,i){return i&&i<=3?Nr.Continue:Nr.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<5?wt.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(k.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),wt.DoNotRestart):(this.restarts.shift(),wt.Restart)}},nr;(function(r){r[r.Info=1]="Info",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Never=4]="Never"})(nr=Re.RevealOutputChannelOn||(Re.RevealOutputChannelOn={}));var Ir;(function(r){r[r.Stopped=1]="Stopped",r[r.Starting=3]="Starting",r[r.Running=2]="Running"})(Ir=Re.State||(Re.State={}));var ue;(function(r){r[r.Initial=0]="Initial",r[r.Starting=1]="Starting",r[r.StartFailed=2]="StartFailed",r[r.Running=3]="Running",r[r.Stopping=4]="Stopping",r[r.Stopped=5]="Stopped"})(ue||(ue={}));var Ms=[f.SymbolKind.File,f.SymbolKind.Module,f.SymbolKind.Namespace,f.SymbolKind.Package,f.SymbolKind.Class,f.SymbolKind.Method,f.SymbolKind.Property,f.SymbolKind.Field,f.SymbolKind.Constructor,f.SymbolKind.Enum,f.SymbolKind.Interface,f.SymbolKind.Function,f.SymbolKind.Variable,f.SymbolKind.Constant,f.SymbolKind.String,f.SymbolKind.Number,f.SymbolKind.Boolean,f.SymbolKind.Array,f.SymbolKind.Object,f.SymbolKind.Key,f.SymbolKind.Null,f.SymbolKind.EnumMember,f.SymbolKind.Struct,f.SymbolKind.Event,f.SymbolKind.Operator,f.SymbolKind.TypeParameter],Yu=[f.CompletionItemKind.Text,f.CompletionItemKind.Method,f.CompletionItemKind.Function,f.CompletionItemKind.Constructor,f.CompletionItemKind.Field,f.CompletionItemKind.Variable,f.CompletionItemKind.Class,f.CompletionItemKind.Interface,f.CompletionItemKind.Module,f.CompletionItemKind.Property,f.CompletionItemKind.Unit,f.CompletionItemKind.Value,f.CompletionItemKind.Enum,f.CompletionItemKind.Keyword,f.CompletionItemKind.Snippet,f.CompletionItemKind.Color,f.CompletionItemKind.File,f.CompletionItemKind.Reference,f.CompletionItemKind.Folder,f.CompletionItemKind.EnumMember,f.CompletionItemKind.Constant,f.CompletionItemKind.Struct,f.CompletionItemKind.Event,f.CompletionItemKind.Operator,f.CompletionItemKind.TypeParameter];function O(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var vi;(function(r){function e(t){let i=t;return i&&ce.func(i.register)&&ce.func(i.unregister)&&ce.func(i.dispose)&&i.messages!==void 0}r.is=e})(vi||(vi={}));var ze=class{constructor(e,t,i,a,o,u){this._client=e,this._event=t,this._type=i,this._middleware=a,this._createParams=o,this._selectorFilter=u,this._selectors=new Map}static textDocumentFilter(e,t){for(let i of e)if(k.languages.match(i,t))return!0;return!1}register(e,t){!t.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,t=>this._client.sendNotification(this._type,this._createParams(t))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},js=class extends ze{constructor(e,t){super(e,k.workspace.onDidOpenTextDocument,f.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,i=>e.code2ProtocolConverter.asOpenTextDocumentParams(i),ze.textDocumentFilter);this._syncedDocuments=t}get messages(){return f.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){O(O(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.openClose&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){if(super.register(e,t),!t.registerOptions.documentSelector)return;let i=t.registerOptions.documentSelector;k.workspace.textDocuments.forEach(a=>{let o=a.uri.toString();if(!this._syncedDocuments.has(o)&&k.languages.match(i,a)){let u=this._client.clientOptions.middleware,c=d=>{this._client.sendNotification(this._type,this._createParams(d))};u.didOpen?u.didOpen(a,c):c(a),this._syncedDocuments.set(o,a)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},As=class extends ze{constructor(e,t){super(e,k.workspace.onDidCloseTextDocument,f.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),ze.textDocumentFilter);this._syncedDocuments=t}get messages(){return f.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){O(O(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.openClose&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let i=this._selectors.values();this._syncedDocuments.forEach(a=>{if(k.languages.match(t,a)&&!this._selectorFilter(i,a)){let o=this._client.clientOptions.middleware,u=c=>{this._client.sendNotification(this._type,this._createParams(c))};this._syncedDocuments.delete(a.uri.toString()),o.didClose?o.didClose(a,u):u(a)}})}},Ws=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return f.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){O(O(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.change!==void 0&&i.change!==f.TextDocumentSyncKind.None&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:i.change})})}register(e,t){!t.registerOptions.documentSelector||(this._listener||(this._listener=k.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let t of this._changeData.values())if(k.languages.match(t.documentSelector,e.document)){let i=this._client.clientOptions.middleware;if(t.syncKind===f.TextDocumentSyncKind.Incremental){let a=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);i.didChange?i.didChange(e,()=>this._client.sendNotification(f.DidChangeTextDocumentNotification.type,a)):this._client.sendNotification(f.DidChangeTextDocumentNotification.type,a)}else if(t.syncKind===f.TextDocumentSyncKind.Full){let a=o=>{this._changeDelayer?(this._changeDelayer.uri!==o.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=o.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(f.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(o.document))})):(this._changeDelayer={uri:o.document.uri.toString(),delayer:new Is.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(f.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(o.document))},-1))};i.didChange?i.didChange(e,a):a(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}},Hs=class extends ze{constructor(e){super(e,k.workspace.onWillSaveTextDocument,f.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(t,i)=>ze.textDocumentFilter(t,i.document))}get messages(){return f.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=O(O(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.willSave&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:t}})}},Ks=class{constructor(e){this._client=e,this._selectors=new Map}get messages(){return f.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=O(O(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.willSaveWaitUntil&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){!t.registerOptions.documentSelector||(this._listener||(this._listener=k.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){if(ze.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,i=a=>this._client.sendRequest(f.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(a)).then(o=>{let u=this._client.protocol2CodeConverter.asTextEdits(o);return u===void 0?[]:u});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,i):i(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},$s=class extends ze{constructor(e){super(e,k.workspace.onDidSaveTextDocument,f.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),ze.textDocumentFilter)}get messages(){return f.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){O(O(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.save&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{includeText:!!i.save.includeText})})}register(e,t){this._includeText=!!t.registerOptions.includeText,super.register(e,t)}},zs=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get messages(){return f.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){O(O(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers))return;let i=[];for(let a of t.registerOptions.watchers){if(!ce.string(a.globPattern))continue;let o=!0,u=!0,c=!0;a.kind!==void 0&&a.kind!==null&&(o=(a.kind&f.WatchKind.Create)!=0,u=(a.kind&f.WatchKind.Change)!=0,c=(a.kind&f.WatchKind.Delete)!=0);let d=k.workspace.createFileSystemWatcher(a.globPattern,!o,!u,!c);this.hookListeners(d,o,u,c),i.push(d)}this._watchers.set(t.id,i)}registerRaw(e,t){let i=[];for(let a of t)this.hookListeners(a,!0,!0,!0,i);this._watchers.set(e,i)}hookListeners(e,t,i,a,o){t&&e.onDidCreate(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:f.FileChangeType.Created}),null,o),i&&e.onDidChange(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:f.FileChangeType.Changed}),null,o),a&&e.onDidDelete(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:f.FileChangeType.Deleted}),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let i of t)i.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}},Ce=class{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!t.registerOptions.documentSelector)return;let i=this.registerLanguageProvider(t.registerOptions);i&&this._providers.set(t.id,i)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}};Re.TextDocumentFeature=Ce;var Us=class{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let i=this.registerLanguageProvider(t.registerOptions);i&&this._providers.set(t.id,i)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}},Gs=class extends Ce{constructor(e){super(e,f.CompletionRequest.type)}fillClientCapabilities(e){let t=O(O(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[f.MarkupKind.Markdown,f.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0},t.completionItemKind={valueSet:Yu}}initialize(e,t){!e.completionProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.completionProvider)})}registerLanguageProvider(e){let t=e.triggerCharacters||[],i=this._client,a=(c,d,y,S)=>i.sendRequest(f.CompletionRequest.type,i.code2ProtocolConverter.asCompletionParams(c,d,y),S).then(i.protocol2CodeConverter.asCompletionResult,q=>(i.logFailedRequest(f.CompletionRequest.type,q),Promise.resolve([]))),o=(c,d)=>i.sendRequest(f.CompletionResolveRequest.type,i.code2ProtocolConverter.asCompletionItem(c),d).then(i.protocol2CodeConverter.asCompletionItem,y=>(i.logFailedRequest(f.CompletionResolveRequest.type,y),Promise.resolve(c))),u=this._client.clientOptions.middleware;return k.languages.registerCompletionItemProvider(e.documentSelector,{provideCompletionItems:(c,d,y,S)=>u.provideCompletionItem?u.provideCompletionItem(c,d,S,y,a):a(c,d,S,y),resolveCompletionItem:e.resolveProvider?(c,d)=>u.resolveCompletionItem?u.resolveCompletionItem(c,d,o):o(c,d):void 0},...t)}},Bs=class extends Ce{constructor(e){super(e,f.HoverRequest.type)}fillClientCapabilities(e){let t=O(O(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[f.MarkupKind.Markdown,f.MarkupKind.PlainText]}initialize(e,t){!e.hoverProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(o,u,c)=>t.sendRequest(f.HoverRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(o,u),c).then(t.protocol2CodeConverter.asHover,d=>(t.logFailedRequest(f.HoverRequest.type,d),Promise.resolve(null))),a=t.clientOptions.middleware;return k.languages.registerHoverProvider(e.documentSelector,{provideHover:(o,u,c)=>a.provideHover?a.provideHover(o,u,c,i):i(o,u,c)})}},Qs=class extends Ce{constructor(e){super(e,f.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=O(O(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[f.MarkupKind.Markdown,f.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0}}initialize(e,t){!e.signatureHelpProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.signatureHelpProvider)})}registerLanguageProvider(e){let t=this._client,i=(u,c,d)=>t.sendRequest(f.SignatureHelpRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(u,c),d).then(t.protocol2CodeConverter.asSignatureHelp,y=>(t.logFailedRequest(f.SignatureHelpRequest.type,y),Promise.resolve(null))),a=t.clientOptions.middleware,o=e.triggerCharacters||[];return k.languages.registerSignatureHelpProvider(e.documentSelector,{provideSignatureHelp:(u,c,d)=>a.provideSignatureHelp?a.provideSignatureHelp(u,c,d,i):i(u,c,d)},...o)}},Js=class extends Ce{constructor(e){super(e,f.DefinitionRequest.type)}fillClientCapabilities(e){let t=O(O(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){!e.definitionProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(o,u,c)=>t.sendRequest(f.DefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(o,u),c).then(t.protocol2CodeConverter.asDefinitionResult,d=>(t.logFailedRequest(f.DefinitionRequest.type,d),Promise.resolve(null))),a=t.clientOptions.middleware;return k.languages.registerDefinitionProvider(e.documentSelector,{provideDefinition:(o,u,c)=>a.provideDefinition?a.provideDefinition(o,u,c,i):i(o,u,c)})}},Xs=class extends Ce{constructor(e){super(e,f.ReferencesRequest.type)}fillClientCapabilities(e){O(O(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){!e.referencesProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(o,u,c,d)=>t.sendRequest(f.ReferencesRequest.type,t.code2ProtocolConverter.asReferenceParams(o,u,c),d).then(t.protocol2CodeConverter.asReferences,y=>(t.logFailedRequest(f.ReferencesRequest.type,y),Promise.resolve([]))),a=t.clientOptions.middleware;return k.languages.registerReferenceProvider(e.documentSelector,{provideReferences:(o,u,c,d)=>a.provideReferences?a.provideReferences(o,u,c,d,i):i(o,u,c,d)})}},Vs=class extends Ce{constructor(e){super(e,f.DocumentHighlightRequest.type)}fillClientCapabilities(e){O(O(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){!e.documentHighlightProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(o,u,c)=>t.sendRequest(f.DocumentHighlightRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(o,u),c).then(t.protocol2CodeConverter.asDocumentHighlights,d=>(t.logFailedRequest(f.DocumentHighlightRequest.type,d),Promise.resolve([]))),a=t.clientOptions.middleware;return k.languages.registerDocumentHighlightProvider(e.documentSelector,{provideDocumentHighlights:(o,u,c)=>a.provideDocumentHighlights?a.provideDocumentHighlights(o,u,c,i):i(o,u,c)})}},Ys=class extends Ce{constructor(e){super(e,f.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=O(O(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Ms},t.hierarchicalDocumentSymbolSupport=!0}initialize(e,t){!e.documentSymbolProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(o,u)=>t.sendRequest(f.DocumentSymbolRequest.type,t.code2ProtocolConverter.asDocumentSymbolParams(o),u).then(c=>{if(c!==null){if(c.length===0)return[];{let d=c[0];return f.DocumentSymbol.is(d)?t.protocol2CodeConverter.asDocumentSymbols(c):t.protocol2CodeConverter.asSymbolInformations(c)}}},c=>(t.logFailedRequest(f.DocumentSymbolRequest.type,c),Promise.resolve([]))),a=t.clientOptions.middleware;return k.languages.registerDocumentSymbolProvider(e.documentSelector,{provideDocumentSymbols:(o,u)=>a.provideDocumentSymbols?a.provideDocumentSymbols(o,u,i):i(o,u)})}},Zs=class extends Us{constructor(e){super(e,f.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=O(O(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Ms}}initialize(e){!e.workspaceSymbolProvider||this.register(this.messages,{id:oe.generateUuid(),registerOptions:void 0})}registerLanguageProvider(e){let t=this._client,i=(o,u)=>t.sendRequest(f.WorkspaceSymbolRequest.type,{query:o},u).then(t.protocol2CodeConverter.asSymbolInformations,c=>(t.logFailedRequest(f.WorkspaceSymbolRequest.type,c),Promise.resolve([]))),a=t.clientOptions.middleware;return k.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:(o,u)=>a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(o,u,i):i(o,u)})}},eo=class extends Ce{constructor(e){super(e,f.CodeActionRequest.type)}fillClientCapabilities(e){let t=O(O(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.codeActionLiteralSupport={codeActionKind:{valueSet:["",f.CodeActionKind.QuickFix,f.CodeActionKind.Refactor,f.CodeActionKind.RefactorExtract,f.CodeActionKind.RefactorInline,f.CodeActionKind.RefactorRewrite,f.CodeActionKind.Source,f.CodeActionKind.SourceOrganizeImports]}}}initialize(e,t){if(!e.codeActionProvider||!t)return;let i;ce.boolean(e.codeActionProvider)||(i=e.codeActionProvider.codeActionKinds),this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:t,codeActionKinds:i}})}registerLanguageProvider(e){let t=this._client,i=(o,u,c,d)=>{let y={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(o),range:t.code2ProtocolConverter.asRange(u),context:t.code2ProtocolConverter.asCodeActionContext(c)};return t.sendRequest(f.CodeActionRequest.type,y,d).then(S=>{if(S===null)return;let q=[];for(let L of S)f.Command.is(L)?q.push(t.protocol2CodeConverter.asCommand(L)):q.push(t.protocol2CodeConverter.asCodeAction(L));return q},S=>(t.logFailedRequest(f.CodeActionRequest.type,S),Promise.resolve([])))},a=t.clientOptions.middleware;return k.languages.registerCodeActionsProvider(e.documentSelector,{provideCodeActions:(o,u,c,d)=>a.provideCodeActions?a.provideCodeActions(o,u,c,d,i):i(o,u,c,d)},e.codeActionKinds?{providedCodeActionKinds:t.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0)}},to=class extends Ce{constructor(e){super(e,f.CodeLensRequest.type)}fillClientCapabilities(e){O(O(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,t){!e.codeLensProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.codeLensProvider)})}registerLanguageProvider(e){let t=this._client,i=(u,c)=>t.sendRequest(f.CodeLensRequest.type,t.code2ProtocolConverter.asCodeLensParams(u),c).then(t.protocol2CodeConverter.asCodeLenses,d=>(t.logFailedRequest(f.CodeLensRequest.type,d),Promise.resolve([]))),a=(u,c)=>t.sendRequest(f.CodeLensResolveRequest.type,t.code2ProtocolConverter.asCodeLens(u),c).then(t.protocol2CodeConverter.asCodeLens,d=>(t.logFailedRequest(f.CodeLensResolveRequest.type,d),u)),o=t.clientOptions.middleware;return k.languages.registerCodeLensProvider(e.documentSelector,{provideCodeLenses:(u,c)=>o.provideCodeLenses?o.provideCodeLenses(u,c,i):i(u,c),resolveCodeLens:e.resolveProvider?(u,c)=>o.resolveCodeLens?o.resolveCodeLens(u,c,a):a(u,c):void 0})}},ro=class extends Ce{constructor(e){super(e,f.DocumentFormattingRequest.type)}fillClientCapabilities(e){O(O(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){!e.documentFormattingProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(o,u,c)=>{let d={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(o),options:t.code2ProtocolConverter.asFormattingOptions(u)};return t.sendRequest(f.DocumentFormattingRequest.type,d,c).then(t.protocol2CodeConverter.asTextEdits,y=>(t.logFailedRequest(f.DocumentFormattingRequest.type,y),Promise.resolve([])))},a=t.clientOptions.middleware;return k.languages.registerDocumentFormattingEditProvider(e.documentSelector,{provideDocumentFormattingEdits:(o,u,c)=>a.provideDocumentFormattingEdits?a.provideDocumentFormattingEdits(o,u,c,i):i(o,u,c)})}},io=class extends Ce{constructor(e){super(e,f.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){O(O(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){!e.documentRangeFormattingProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(o,u,c,d)=>{let y={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(o),range:t.code2ProtocolConverter.asRange(u),options:t.code2ProtocolConverter.asFormattingOptions(c)};return t.sendRequest(f.DocumentRangeFormattingRequest.type,y,d).then(t.protocol2CodeConverter.asTextEdits,S=>(t.logFailedRequest(f.DocumentRangeFormattingRequest.type,S),Promise.resolve([])))},a=t.clientOptions.middleware;return k.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,{provideDocumentRangeFormattingEdits:(o,u,c,d)=>a.provideDocumentRangeFormattingEdits?a.provideDocumentRangeFormattingEdits(o,u,c,d,i):i(o,u,c,d)})}},no=class extends Ce{constructor(e){super(e,f.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){O(O(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){!e.documentOnTypeFormattingProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentOnTypeFormattingProvider)})}registerLanguageProvider(e){let t=this._client,i=e.moreTriggerCharacter||[],a=(u,c,d,y,S)=>{let q={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(u),position:t.code2ProtocolConverter.asPosition(c),ch:d,options:t.code2ProtocolConverter.asFormattingOptions(y)};return t.sendRequest(f.DocumentOnTypeFormattingRequest.type,q,S).then(t.protocol2CodeConverter.asTextEdits,L=>(t.logFailedRequest(f.DocumentOnTypeFormattingRequest.type,L),Promise.resolve([])))},o=t.clientOptions.middleware;return k.languages.registerOnTypeFormattingEditProvider(e.documentSelector,{provideOnTypeFormattingEdits:(u,c,d,y,S)=>o.provideOnTypeFormattingEdits?o.provideOnTypeFormattingEdits(u,c,d,y,S,a):a(u,c,d,y,S)},e.firstTriggerCharacter,...i)}},so=class extends Ce{constructor(e){super(e,f.RenameRequest.type)}fillClientCapabilities(e){let t=O(O(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0}initialize(e,t){if(!e.renameProvider||!t)return;let i=Object.assign({},{documentSelector:t});ce.boolean(e.renameProvider)?i.prepareProvider=!1:i.prepareProvider=e.renameProvider.prepareProvider,this.register(this.messages,{id:oe.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=this._client,i=(u,c,d,y)=>{let S={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(u),position:t.code2ProtocolConverter.asPosition(c),newName:d};return t.sendRequest(f.RenameRequest.type,S,y).then(t.protocol2CodeConverter.asWorkspaceEdit,q=>(t.logFailedRequest(f.RenameRequest.type,q),Promise.reject(new Error(q.message))))},a=(u,c,d)=>{let y={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(u),position:t.code2ProtocolConverter.asPosition(c)};return t.sendRequest(f.PrepareRenameRequest.type,y,d).then(S=>f.Range.is(S)?t.protocol2CodeConverter.asRange(S):S&&S.range?{range:t.protocol2CodeConverter.asRange(S.range),placeholder:S.placeholder}:null,S=>(t.logFailedRequest(f.PrepareRenameRequest.type,S),Promise.reject(new Error(S.message))))},o=t.clientOptions.middleware;return k.languages.registerRenameProvider(e.documentSelector,{provideRenameEdits:(u,c,d,y)=>o.provideRenameEdits?o.provideRenameEdits(u,c,d,y,i):i(u,c,d,y),prepareRename:e.prepareProvider?(u,c,d)=>o.prepareRename?o.prepareRename(u,c,d,a):a(u,c,d):void 0})}},oo=class extends Ce{constructor(e){super(e,f.DocumentLinkRequest.type)}fillClientCapabilities(e){O(O(e,"textDocument"),"documentLink").dynamicRegistration=!0}initialize(e,t){!e.documentLinkProvider||!t||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentLinkProvider)})}registerLanguageProvider(e){let t=this._client,i=(u,c)=>t.sendRequest(f.DocumentLinkRequest.type,t.code2ProtocolConverter.asDocumentLinkParams(u),c).then(t.protocol2CodeConverter.asDocumentLinks,d=>{t.logFailedRequest(f.DocumentLinkRequest.type,d),Promise.resolve(new Error(d.message))}),a=(u,c)=>t.sendRequest(f.DocumentLinkResolveRequest.type,t.code2ProtocolConverter.asDocumentLink(u),c).then(t.protocol2CodeConverter.asDocumentLink,d=>{t.logFailedRequest(f.DocumentLinkResolveRequest.type,d),Promise.resolve(new Error(d.message))}),o=t.clientOptions.middleware;return k.languages.registerDocumentLinkProvider(e.documentSelector,{provideDocumentLinks:(u,c)=>o.provideDocumentLinks?o.provideDocumentLinks(u,c,i):i(u,c),resolveDocumentLink:e.resolveProvider?(u,c)=>o.resolveDocumentLink?o.resolveDocumentLink(u,c,a):a(u,c):void 0})}},ao=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return f.DidChangeConfigurationNotification.type}fillClientCapabilities(e){O(O(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{section:e}})}register(e,t){let i=k.workspace.onDidChangeConfiguration(a=>{this.onDidChangeConfiguration(t.registerOptions.section,a)});this._listeners.set(t.id,i),t.registerOptions.section!==void 0&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let i;if(ce.string(e)?i=[e]:i=e,i!==void 0&&t!==void 0&&!i.some(c=>t.affectsConfiguration(c)))return;let a=u=>{if(u===void 0){this._client.sendNotification(f.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(f.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(u)})},o=this.getMiddleware();o?o(i,a):a(i)}extractSettingsInformation(e){function t(o,u){let c=o;for(let d=0;d<u.length-1;d++){let y=c[u[d]];y||(y=Object.create(null),c[u[d]]=y),c=y}return c}let i=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,a=Object.create(null);for(let o=0;o<e.length;o++){let u=e[o],c=u.indexOf("."),d=null;if(c>=0?d=k.workspace.getConfiguration(u.substr(0,c),i).get(u.substr(c+1)):d=k.workspace.getConfiguration(u,i),d){let y=e[o].split(".");t(a,y)[y[y.length-1]]=d}}return a}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},co=class{constructor(e){this._client=e,this._commands=new Map}get messages(){return f.ExecuteCommandRequest.type}fillClientCapabilities(e){O(O(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){let i=this._client;if(t.registerOptions.commands){let a=[];for(let o of t.registerOptions.commands)a.push(k.commands.registerCommand(o,(...u)=>{let c={command:o,arguments:u};return i.sendRequest(f.ExecuteCommandRequest.type,c).then(void 0,d=>{i.logFailedRequest(f.ExecuteCommandRequest.type,d)})}));this._commands.set(t.id,a)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(i=>i.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}},Zu;(function(r){function e(t){return t&&f.MessageReader.is(t.reader)&&f.MessageWriter.is(t.writer)}r.is=e})(Zu=Re.MessageTransports||(Re.MessageTransports={}));var yi=class{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},uo=class{constructor(e,t,i){this._traceFormat=f.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=t,i=i||{},this._clientOptions={documentSelector:i.documentSelector||[],synchronize:i.synchronize||{},diagnosticCollectionName:i.diagnosticCollectionName,outputChannelName:i.outputChannelName||this._name,revealOutputChannelOn:i.revealOutputChannelOn||nr.Error,stdioEncoding:i.stdioEncoding||"utf8",initializationOptions:i.initializationOptions,initializationFailedHandler:i.initializationFailedHandler,errorHandler:i.errorHandler||new mi(this._name),middleware:i.middleware||{},uriConverters:i.uriConverters,workspaceFolder:i.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=ue.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,i.outputChannel?(this._outputChannel=i.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new Is.Delayer(250),this._onReady=new Promise((a,o)=>{this._onReadyCallbacks=new yi(a,o)}),this._onStop=void 0,this._telemetryEmitter=new f.Emitter,this._stateChangeEmitter=new f.Emitter,this._tracer={log:(a,o)=>{ce.string(a)?this.logTrace(a,o):this.logObjectTrace(a)}},this._c2p=Ju.createConverter(i.uriConverters?i.uriConverters.code2Protocol:void 0),this._p2c=Xu.createConverter(i.uriConverters?i.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let i=this.getPublicState();i!==t&&this._stateChangeEmitter.fire({oldState:t,newState:i})}getPublicState(){return this.state===ue.Running?Ir.Running:this.state===ue.Starting?Ir.Starting:Ir.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(i){throw this.error(`Sending request ${ce.string(e)?e:e.method} failed.`,i),i}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,t)}catch(i){throw this.error(`Registering request handler ${ce.string(e)?e:e.method} failed.`,i),i}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(i){throw this.error(`Sending notification ${ce.string(e)?e:e.method} failed.`,i),i}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,t)}catch(i){throw this.error(`Registering notification handler ${ce.string(e)?e:e.method} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=k.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new mi(this._name)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(t=>{t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof f.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?ce.string(e.stack)?e.stack:e.message:ce.string(e)?e:e.toString()}info(e,t){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=nr.Info&&this.outputChannel.show(!0)}warn(e,t){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=nr.Warn&&this.outputChannel.show(!0)}error(e,t){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=nr.Error&&this.outputChannel.show(!0)}logTrace(e,t){this.outputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.outputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.outputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.outputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===ue.Initial||this.state===ue.Stopping||this.state===ue.Stopped}needsStop(){return this.state===ue.Starting||this.state===ue.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===ue.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new yi(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?k.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):k.languages.createDiagnosticCollection()),this.state=ue.Starting,this.resolveConnection().then(e=>(e.onLogMessage(t=>{switch(t.type){case f.MessageType.Error:this.error(t.message);break;case f.MessageType.Warning:this.warn(t.message);break;case f.MessageType.Info:this.info(t.message);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=>{switch(t.type){case f.MessageType.Error:k.window.showErrorMessage(t.message);break;case f.MessageType.Warning:k.window.showWarningMessage(t.message);break;case f.MessageType.Info:k.window.showInformationMessage(t.message);break;default:k.window.showInformationMessage(t.message)}}),e.onRequest(f.ShowMessageRequest.type,t=>{let i;switch(t.type){case f.MessageType.Error:i=k.window.showErrorMessage;break;case f.MessageType.Warning:i=k.window.showWarningMessage;break;case f.MessageType.Info:i=k.window.showInformationMessage;break;default:i=k.window.showInformationMessage}let a=t.actions||[];return i(t.message,...a)}),e.onTelemetry(t=>{this._telemetryEmitter.fire(t)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=ue.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),k.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new k.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,i=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),a={processId:process.pid,rootPath:i||null,rootUri:i?this._c2p.asUri(k.Uri.file(i)):null,capabilities:this.computeClientCapabilities(),initializationOptions:ce.func(t)?t():t,trace:f.Trace.toString(this._trace),workspaceFolders:null};return this.fillInitializeParams(a),e.initialize(a).then(o=>{this._resolvedConnection=e,this._initializeResult=o,this.state=ue.Running;let u;return ce.number(o.capabilities.textDocumentSync)?o.capabilities.textDocumentSync===f.TextDocumentSyncKind.None?u={openClose:!1,change:f.TextDocumentSyncKind.None,save:void 0}:u={openClose:!0,change:o.capabilities.textDocumentSync,save:{includeText:!1}}:o.capabilities.textDocumentSync!==void 0&&o.capabilities.textDocumentSync!==null&&(u=o.capabilities.textDocumentSync),this._capabilities=Object.assign({},o.capabilities,{resolvedTextDocumentSync:u}),e.onDiagnostics(c=>this.handleDiagnostics(c)),e.onRequest(f.RegistrationRequest.type,c=>this.handleRegistrationRequest(c)),e.onRequest("client/registerFeature",c=>this.handleRegistrationRequest(c)),e.onRequest(f.UnregistrationRequest.type,c=>this.handleUnregistrationRequest(c)),e.onRequest("client/unregisterFeature",c=>this.handleUnregistrationRequest(c)),e.onRequest(f.ApplyWorkspaceEditRequest.type,c=>this.handleApplyWorkspaceEdit(c)),e.sendNotification(f.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),o}).then(void 0,o=>{this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(o)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(o)):o instanceof f.ResponseError&&o.data&&o.data.retry?k.window.showErrorMessage(o.message,{title:"Retry",id:"retry"}).then(u=>{u&&u.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(o))}):(o&&o.message&&k.window.showErrorMessage(o.message),this.error("Server initialization failed.",o),this.stop(),this._onReadyCallbacks.reject(o))})}_clientGetRootPath(){let e=k.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===ue.Stopping&&this._onStop?this._onStop:(this.state=ue.Stopping,this.cleanUp(),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.dispose(),this.state=ue.Stopped,this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=ue.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach(i=>i.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(i=>i.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let i of this._dynamicFeatures.values())i.dispose();e&&this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}notifyFileEvent(e){this._fileEvents.push(e),this._fileEventDelayer.trigger(()=>{this.onReady().then(()=>{this.resolveConnection().then(t=>{this.isConnectionActive()&&t.didChangeWatchedFiles({changes:this._fileEvents}),this._fileEvents=[]})},t=>{this.error("Notify file events failed.",t)})})}forceDocumentSync(){this._dynamicFeatures.get(f.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),i=this._p2c.asDiagnostics(e.diagnostics),a=this.clientOptions.middleware.handleDiagnostics;a?a(t,i,(o,u)=>this.setDiagnostics(o,u)):this.setDiagnostics(t,i)}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}createConnection(){let e=(i,a,o)=>{this.handleConnectionError(i,a,o)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(i=>Vu(i.reader,i.writer,e,t))}handleConnectionClosed(){if(this.state===ue.Stopping||this.state===ue.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(t){}let e=wt.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch(t){}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===wt.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=ue.Stopped,this.cleanUp(!1,!0)):e===wt.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=ue.Initial,this.start())}handleConnectionError(e,t,i){this._clientOptions.errorHandler.error(e,t,i)===Nr.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){k.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let i=k.workspace.getConfiguration(this._id),a=f.Trace.Off,o=f.TraceFormat.Text;if(i){let u=i.get("trace.server","off");typeof u=="string"?a=f.Trace.fromString(u):(a=f.Trace.fromString(i.get("trace.server.verbosity","off")),o=f.TraceFormat.fromString(i.get("trace.server.format","text")))}this._trace=a,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let i;ce.array(t)?i=t:i=[t],!!i&&this._dynamicFeatures.get(f.DidChangeWatchedFilesNotification.type.method).registerRaw(oe.generateUuid(),i)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),vi.is(e)){let t=e.messages;if(Array.isArray(t))for(let i of t)this._method2Message.set(i.method,i),this._dynamicFeatures.set(i.method,e);else this._method2Message.set(t.method,t),this._dynamicFeatures.set(t.method,e)}}registerBuiltinFeatures(){this.registerFeature(new ao(this)),this.registerFeature(new js(this,this._syncedDocuments)),this.registerFeature(new Ws(this)),this.registerFeature(new Hs(this)),this.registerFeature(new Ks(this)),this.registerFeature(new $s(this)),this.registerFeature(new As(this,this._syncedDocuments)),this.registerFeature(new zs(this,e=>this.notifyFileEvent(e))),this.registerFeature(new Gs(this)),this.registerFeature(new Bs(this)),this.registerFeature(new Qs(this)),this.registerFeature(new Js(this)),this.registerFeature(new Xs(this)),this.registerFeature(new Vs(this)),this.registerFeature(new Ys(this)),this.registerFeature(new Zs(this)),this.registerFeature(new eo(this)),this.registerFeature(new to(this)),this.registerFeature(new ro(this)),this.registerFeature(new io(this)),this.registerFeature(new no(this)),this.registerFeature(new so(this)),this.registerFeature(new oo(this)),this.registerFeature(new co(this))}fillInitializeParams(e){for(let t of this._features)ce.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};O(e,"workspace").applyEdit=!0;let t=O(O(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[f.ResourceOperationKind.Create,f.ResourceOperationKind.Rename,f.ResourceOperationKind.Delete],t.failureHandling=f.FailureHandlingKind.TextOnlyTransactional,O(O(e,"textDocument"),"publishDiagnostics").relatedInformation=!0;for(let i of this._features)i.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let i of this._features)i.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,i)=>{for(let a of e.registrations){let o=this._dynamicFeatures.get(a.method);if(!o){i(new Error(`No feature implementation for ${a.method} found. Registration failed.`));return}let u=a.registerOptions||{};u.documentSelector=u.documentSelector||this._clientOptions.documentSelector;let c={id:a.id,registerOptions:u};o.register(this._method2Message.get(a.method),c)}t()})}handleUnregistrationRequest(e){return new Promise((t,i)=>{for(let a of e.unregisterations){let o=this._dynamicFeatures.get(a.method);if(!o){i(new Error(`No feature implementation for ${a.method} found. Unregistration failed.`));return}o.unregister(a.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,i=new Map;k.workspace.textDocuments.forEach(o=>i.set(o.uri.toString(),o));let a=!1;if(t.documentChanges){for(let o of t.documentChanges)if(f.TextDocumentEdit.is(o)&&o.textDocument.version&&o.textDocument.version>=0){let u=i.get(o.textDocument.uri);if(u&&u.version!==o.textDocument.version){a=!0;break}}}return a?Promise.resolve({applied:!1}):k.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(o=>({applied:o}))}logFailedRequest(e,t){t instanceof f.ResponseError&&t.code===f.ErrorCodes.RequestCancelled||this.error(`Request ${e.method} failed.`,t)}};Re.BaseLanguageClient=uo});var ho=H(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});var el=ct(),tl=Ke(),Lr=require("vscode"),sr=Te(),rl=ut();function lo(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var fo=class extends rl.TextDocumentFeature{constructor(e){super(e,sr.DocumentColorRequest.type)}fillClientCapabilities(e){lo(lo(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){if(!e.colorProvider)return;let i=e.colorProvider,a=tl.string(i.id)&&i.id.length>0?i.id:el.generateUuid(),o=i.documentSelector||t;o&&this.register(this.messages,{id:a,registerOptions:Object.assign({},{documentSelector:o})})}registerLanguageProvider(e){let t=this._client,i=(u,c,d)=>{let y={color:u,textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(c.document),range:t.code2ProtocolConverter.asRange(c.range)};return t.sendRequest(sr.ColorPresentationRequest.type,y,d).then(this.asColorPresentations.bind(this),S=>(t.logFailedRequest(sr.ColorPresentationRequest.type,S),Promise.resolve(null)))},a=(u,c)=>{let d={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(u)};return t.sendRequest(sr.DocumentColorRequest.type,d,c).then(this.asColorInformations.bind(this),y=>(t.logFailedRequest(sr.ColorPresentationRequest.type,y),Promise.resolve(null)))},o=t.clientOptions.middleware;return Lr.languages.registerColorProvider(e.documentSelector,{provideColorPresentations:(u,c,d)=>o.provideColorPresentations?o.provideColorPresentations(u,c,d,i):i(u,c,d),provideDocumentColors:(u,c)=>o.provideDocumentColors?o.provideDocumentColors(u,c,a):a(u,c)})}asColor(e){return new Lr.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(t=>new Lr.ColorInformation(this._client.protocol2CodeConverter.asRange(t.range),this.asColor(t.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(t=>{let i=new Lr.ColorPresentation(t.label);return i.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(t.additionalTextEdits),i.textEdit=this._client.protocol2CodeConverter.asTextEdit(t.textEdit),i}):[]}};Ci.ColorProviderFeature=fo});var go=H(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});var Ri=require("vscode"),il=Te(),po=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(il.ConfigurationRequest.type,(t,i)=>{let a=u=>{let c=[];for(let d of u.items){let y=d.scopeUri!==void 0&&d.scopeUri!==null?this._client.protocol2CodeConverter.asUri(d.scopeUri):void 0;c.push(this.getConfiguration(y,d.section!==null?d.section:void 0))}return c},o=e.clientOptions.middleware.workspace;return o&&o.configuration?o.configuration(t,i,a):a(t,i)})}getConfiguration(e,t){let i=null;if(t){let a=t.lastIndexOf(".");if(a===-1)i=Ri.workspace.getConfiguration(void 0,e).get(t);else{let o=Ri.workspace.getConfiguration(t.substr(0,a));o&&(i=o.get(t.substr(a+1)))}}else{let a=Ri.workspace.getConfiguration(void 0,e);i={};for(let o of Object.keys(a))a.has(o)&&(i[o]=a.get(o))}return i||null}};_i.ConfigurationFeature=po});var Co=H(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});var mo=ct(),nl=Ke(),sl=require("vscode"),wi=Te(),ol=ut();function vo(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var yo=class extends ol.TextDocumentFeature{constructor(e){super(e,wi.ImplementationRequest.type)}fillClientCapabilities(e){let t=vo(vo(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(!!e.implementationProvider)if(e.implementationProvider===!0){if(!t)return;this.register(this.messages,{id:mo.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{let i=e.implementationProvider,a=nl.string(i.id)&&i.id.length>0?i.id:mo.generateUuid(),o=i.documentSelector||t;o&&this.register(this.messages,{id:a,registerOptions:Object.assign({},{documentSelector:o})})}}registerLanguageProvider(e){let t=this._client,i=(o,u,c)=>t.sendRequest(wi.ImplementationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(o,u),c).then(t.protocol2CodeConverter.asDefinitionResult,d=>(t.logFailedRequest(wi.ImplementationRequest.type,d),Promise.resolve(null))),a=t.clientOptions.middleware;return sl.languages.registerImplementationProvider(e.documentSelector,{provideImplementation:(o,u,c)=>a.provideImplementation?a.provideImplementation(o,u,c,i):i(o,u,c)})}};Di.ImplementationFeature=yo});var wo=H(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});var Ro=ct(),al=Ke(),cl=require("vscode"),Si=Te(),ul=ut();function Mr(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var _o=class extends ul.TextDocumentFeature{constructor(e){super(e,Si.TypeDefinitionRequest.type)}fillClientCapabilities(e){Mr(Mr(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=Mr(Mr(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(!!e.typeDefinitionProvider)if(e.typeDefinitionProvider===!0){if(!t)return;this.register(this.messages,{id:Ro.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{let i=e.typeDefinitionProvider,a=al.string(i.id)&&i.id.length>0?i.id:Ro.generateUuid(),o=i.documentSelector||t;o&&this.register(this.messages,{id:a,registerOptions:Object.assign({},{documentSelector:o})})}}registerLanguageProvider(e){let t=this._client,i=(o,u,c)=>t.sendRequest(Si.TypeDefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(o,u),c).then(t.protocol2CodeConverter.asDefinitionResult,d=>(t.logFailedRequest(Si.TypeDefinitionRequest.type,d),Promise.resolve(null))),a=t.clientOptions.middleware;return cl.languages.registerTypeDefinitionProvider(e.documentSelector,{provideTypeDefinition:(o,u,c)=>a.provideTypeDefinition?a.provideTypeDefinition(o,u,c,i):i(o,u,c)})}};Ti.TypeDefinitionFeature=_o});var So=H(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});var ll=ct(),bi=require("vscode"),Ei=Te();function xi(r,e){if(r!==void 0)return r[e]}var Do=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return Ei.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=bi.workspace.workspaceFolders;t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(i=>this.asProtocol(i))}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(Ei.WorkspaceFoldersRequest.type,o=>{let u=()=>{let d=bi.workspace.workspaceFolders;return d===void 0?null:d.map(S=>this.asProtocol(S))},c=t.clientOptions.middleware.workspace;return c&&c.workspaceFolders?c.workspaceFolders(o,u):u(o)});let i=xi(xi(xi(e,"workspace"),"workspaceFolders"),"changeNotifications"),a;typeof i=="string"?a=i:i===!0&&(a=ll.generateUuid()),a&&this.register(this.messages,{id:a,registerOptions:void 0})}register(e,t){let i=t.id,a=this._client,o=bi.workspace.onDidChangeWorkspaceFolders(u=>{let c=y=>{let S={event:{added:y.added.map(q=>this.asProtocol(q)),removed:y.removed.map(q=>this.asProtocol(q))}};this._client.sendNotification(Ei.DidChangeWorkspaceFoldersNotification.type,S)},d=a.clientOptions.middleware.workspace;d&&d.didChangeWorkspaceFolders?d.didChangeWorkspaceFolders(u,c):c(u)});this._listeners.set(i,o)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};qi.WorkspaceFoldersFeature=Do});var Eo=H(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});var dl=ct(),fl=Ke(),or=require("vscode"),At=Te(),hl=ut();function To(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var bo=class extends hl.TextDocumentFeature{constructor(e){super(e,At.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=To(To(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){if(!e.foldingRangeProvider)return;let i=e.foldingRangeProvider,a=fl.string(i.id)&&i.id.length>0?i.id:dl.generateUuid(),o=i.documentSelector||t;o&&this.register(this.messages,{id:a,registerOptions:Object.assign({},{documentSelector:o})})}registerLanguageProvider(e){let t=this._client,i=(o,u,c)=>{let d={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(o)};return t.sendRequest(At.FoldingRangeRequest.type,d,c).then(this.asFoldingRanges.bind(this),y=>(t.logFailedRequest(At.FoldingRangeRequest.type,y),Promise.resolve(null)))},a=t.clientOptions.middleware;return or.languages.registerFoldingRangeProvider(e.documentSelector,{provideFoldingRanges(o,u,c){return a.provideFoldingRanges?a.provideFoldingRanges(o,u,c,i):i(o,u,c)}})}asFoldingRangeKind(e){if(e)switch(e){case At.FoldingRangeKind.Comment:return or.FoldingRangeKind.Comment;case At.FoldingRangeKind.Imports:return or.FoldingRangeKind.Imports;case At.FoldingRangeKind.Region:return or.FoldingRangeKind.Region}}asFoldingRanges(e){return Array.isArray(e)?e.map(t=>new or.FoldingRange(t.startLine,t.endLine,this.asFoldingRangeKind(t.kind))):[]}};Pi.FoldingRangeFeature=bo});var ko=H(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});var xo=ct(),pl=Ke(),gl=require("vscode"),ki=Te(),ml=ut();function qo(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var Po=class extends ml.TextDocumentFeature{constructor(e){super(e,ki.DeclarationRequest.type)}fillClientCapabilities(e){let t=qo(qo(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(!!e.declarationProvider)if(e.declarationProvider===!0){if(!t)return;this.register(this.messages,{id:xo.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{let i=e.declarationProvider,a=pl.string(i.id)&&i.id.length>0?i.id:xo.generateUuid(),o=i.documentSelector||t;o&&this.register(this.messages,{id:a,registerOptions:Object.assign({},{documentSelector:o})})}}registerLanguageProvider(e){let t=this._client,i=(o,u,c)=>t.sendRequest(ki.DeclarationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(o,u),c).then(t.protocol2CodeConverter.asDeclarationResult,d=>(t.logFailedRequest(ki.DeclarationRequest.type,d),Promise.resolve(null))),a=t.clientOptions.middleware;return gl.languages.registerDeclarationProvider(e.documentSelector,{provideDeclaration:(o,u,c)=>a.provideDeclaration?a.provideDeclaration(o,u,c,i):i(o,u,c)})}};Oi.DeclarationFeature=Po});var Fo=H(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});var Oo=require("child_process"),vl=require("path"),yl=process.platform==="win32",Cl=process.platform==="darwin",Rl=process.platform==="linux";function _l(r,e){if(yl)try{let a={stdio:["pipe","pipe","ignore"]};return e&&(a.cwd=e),Oo.execFileSync("taskkill",["/T","/F","/PID",r.pid.toString()],a),!0}catch(a){return!1}else if(Rl||Cl)try{var t=vl.join(__dirname,"terminateProcess.sh"),i=Oo.spawnSync(t,[r.pid.toString()]);return!i.error}catch(a){return!1}else return r.kill("SIGKILL"),!0}Fi.terminate=_l});var ji=H(Ue=>{"use strict";function wl(r){for(var e in r)Ue.hasOwnProperty(e)||(Ue[e]=r[e])}Object.defineProperty(Ue,"__esModule",{value:!0});var Dt=require("child_process"),Dl=require("fs"),No=rn(),Io=ut(),lt=require("vscode"),he=Te(),Sl=ho(),Tl=go(),bl=Co(),El=wo(),xl=So(),ql=Eo(),Pl=ko(),pe=Ke(),kl=Fo();wl(ut());var Lo="^1.30",Ni;(function(r){function e(t){return pe.string(t.command)}r.is=e})(Ni||(Ni={}));var ve;(function(r){r[r.stdio=0]="stdio",r[r.ipc=1]="ipc",r[r.pipe=2]="pipe",r[r.socket=3]="socket"})(ve=Ue.TransportKind||(Ue.TransportKind={}));var Wt;(function(r){function e(t){let i=t;return i&&i.kind===ve.socket&&pe.number(i.port)}r.isSocket=e})(Wt||(Wt={}));var Ii;(function(r){function e(t){return pe.string(t.module)}r.is=e})(Ii||(Ii={}));var Li;(function(r){function e(t){let i=t;return i&&i.writer!==void 0&&i.reader!==void 0}r.is=e})(Li||(Li={}));var Mi;(function(r){function e(t){let i=t;return i&&i.process!==void 0&&typeof i.detached=="boolean"}r.is=e})(Mi||(Mi={}));var Mo=class extends Io.BaseLanguageClient{constructor(e,t,i,a,o){let u,c,d,y,S;pe.string(t)?(u=e,c=t,d=i,y=a,S=!!o):(u=e.toLowerCase(),c=e,d=t,y=i,S=a),S===void 0&&(S=!1),super(u,c,y),this._serverOptions=d,this._forceDebug=S;try{this.checkVersion()}catch(q){throw pe.string(q.message)&&this.outputChannel.appendLine(q.message),q}}checkVersion(){let e=No.parse(lt.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${lt.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!No.satisfies(e,Lo))throw new Error(`The language client requires VS Code version ${Lo} but received version ${lt.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),kl.terminate(e)}catch(t){}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(e){function t(c){if(!c)return process.env;let d=Object.create(null);return Object.keys(process.env).forEach(y=>d[y]=process.env[y]),Object.keys(c).forEach(y=>d[y]=c[y]),d}function i(){let c=process.execArgv;return c?c.some(d=>/^--debug=?/.test(d)||/^--debug-brk=?/.test(d)||/^--inspect=?/.test(d)||/^--inspect-brk=?/.test(d)):!1}let a=this._serverOptions;if(pe.func(a))return a().then(c=>{if(Io.MessageTransports.is(c))return this._isDetached=!!c.detached,c;if(Li.is(c))return this._isDetached=!!c.detached,{reader:new he.StreamMessageReader(c.reader),writer:new he.StreamMessageWriter(c.writer)};{let d;return Mi.is(c)?(d=c.process,this._isDetached=c.detached):(d=c,this._isDetached=!1),d.stderr.on("data",y=>this.outputChannel.append(pe.string(y)?y:y.toString(e))),{reader:new he.StreamMessageReader(d.stdout),writer:new he.StreamMessageWriter(d.stdin)}}});let o,u=a;return u.run||u.debug?typeof v8debug=="object"||this._forceDebug||i()?o=u.debug:o=u.run:o=a,this._getServerWorkingDir(o.options).then(c=>{if(Ii.is(o)&&o.module){let d=o,y=d.transport||ve.stdio;if(d.runtime){let S=[],q=d.options||Object.create(null);q.execArgv&&q.execArgv.forEach(j=>S.push(j)),S.push(d.module),d.args&&d.args.forEach(j=>S.push(j));let L=Object.create(null);L.cwd=c,L.env=t(q.env);let A;if(y===ve.ipc?(L.stdio=[null,null,null,"ipc"],S.push("--node-ipc")):y===ve.stdio?S.push("--stdio"):y===ve.pipe?(A=he.generateRandomPipeName(),S.push(`--pipe=${A}`)):Wt.isSocket(y)&&S.push(`--socket=${y.port}`),S.push(`--clientProcessId=${process.pid.toString()}`),y===ve.ipc||y===ve.stdio){let j=Dt.spawn(d.runtime,S,L);return!j||!j.pid?Promise.reject(`Launching server using runtime ${d.runtime} failed.`):(this._serverProcess=j,j.stderr.on("data",I=>this.outputChannel.append(pe.string(I)?I:I.toString(e))),y===ve.ipc?(j.stdout.on("data",I=>this.outputChannel.append(pe.string(I)?I:I.toString(e))),Promise.resolve({reader:new he.IPCMessageReader(j),writer:new he.IPCMessageWriter(j)})):Promise.resolve({reader:new he.StreamMessageReader(j.stdout),writer:new he.StreamMessageWriter(j.stdin)}))}else{if(y==ve.pipe)return he.createClientPipeTransport(A).then(j=>{let I=Dt.spawn(d.runtime,S,L);return!I||!I.pid?Promise.reject(`Launching server using runtime ${d.runtime} failed.`):(this._serverProcess=I,I.stderr.on("data",E=>this.outputChannel.append(pe.string(E)?E:E.toString(e))),I.stdout.on("data",E=>this.outputChannel.append(pe.string(E)?E:E.toString(e))),j.onConnected().then(E=>({reader:E[0],writer:E[1]})))});if(Wt.isSocket(y))return he.createClientSocketTransport(y.port).then(j=>{let I=Dt.spawn(d.runtime,S,L);return!I||!I.pid?Promise.reject(`Launching server using runtime ${d.runtime} failed.`):(this._serverProcess=I,I.stderr.on("data",E=>this.outputChannel.append(pe.string(E)?E:E.toString(e))),I.stdout.on("data",E=>this.outputChannel.append(pe.string(E)?E:E.toString(e))),j.onConnected().then(E=>({reader:E[0],writer:E[1]})))})}}else{let S;return new Promise((q,L)=>{let A=d.args&&d.args.slice()||[];y===ve.ipc?A.push("--node-ipc"):y===ve.stdio?A.push("--stdio"):y===ve.pipe?(S=he.generateRandomPipeName(),A.push(`--pipe=${S}`)):Wt.isSocket(y)&&A.push(`--socket=${y.port}`),A.push(`--clientProcessId=${process.pid.toString()}`);let j=d.options||Object.create(null);if(j.execArgv=j.execArgv||[],j.cwd=c,j.silent=!0,y===ve.ipc||y===ve.stdio){let I=Dt.fork(d.module,A||[],j);this._serverProcess=I,I.stderr.on("data",E=>this.outputChannel.append(pe.string(E)?E:E.toString(e))),y===ve.ipc?(I.stdout.on("data",E=>this.outputChannel.append(pe.string(E)?E:E.toString(e))),q({reader:new he.IPCMessageReader(this._serverProcess),writer:new he.IPCMessageWriter(this._serverProcess)})):q({reader:new he.StreamMessageReader(I.stdout),writer:new he.StreamMessageWriter(I.stdin)})}else y===ve.pipe?he.createClientPipeTransport(S).then(I=>{let E=Dt.fork(d.module,A||[],j);this._serverProcess=E,E.stderr.on("data",W=>this.outputChannel.append(pe.string(W)?W:W.toString(e))),E.stdout.on("data",W=>this.outputChannel.append(pe.string(W)?W:W.toString(e))),I.onConnected().then(W=>{q({reader:W[0],writer:W[1]})})}):Wt.isSocket(y)&&he.createClientSocketTransport(y.port).then(I=>{let E=Dt.fork(d.module,A||[],j);this._serverProcess=E,E.stderr.on("data",W=>this.outputChannel.append(pe.string(W)?W:W.toString(e))),E.stdout.on("data",W=>this.outputChannel.append(pe.string(W)?W:W.toString(e))),I.onConnected().then(W=>{q({reader:W[0],writer:W[1]})})})})}}else if(Ni.is(o)&&o.command){let d=o,y=d.args||[],S=Object.assign({},d.options);S.cwd=S.cwd||c;let q=Dt.spawn(d.command,y,S);return!q||!q.pid?Promise.reject(`Launching server using command ${d.command} failed.`):(q.stderr.on("data",L=>this.outputChannel.append(pe.string(L)?L:L.toString(e))),this._serverProcess=q,this._isDetached=!!S.detached,Promise.resolve({reader:new he.StreamMessageReader(q.stdout),writer:new he.StreamMessageWriter(q.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}registerProposedFeatures(){this.registerFeatures(Ao.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new Tl.ConfigurationFeature(this)),this.registerFeature(new El.TypeDefinitionFeature(this)),this.registerFeature(new bl.ImplementationFeature(this)),this.registerFeature(new Sl.ColorProviderFeature(this)),this.registerFeature(new xl.WorkspaceFoldersFeature(this)),this.registerFeature(new ql.FoldingRangeFeature(this)),this.registerFeature(new Pl.DeclarationFeature(this))}_mainGetRootPath(){let e=lt.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(i=>{Dl.lstat(t,(a,o)=>{i(!a&&o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};Ue.LanguageClient=Mo;var jo=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return lt.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new lt.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,i=e>=0?this._setting.substr(e+1):void 0,a=i?lt.workspace.getConfiguration(t).get(i,!1):lt.workspace.getConfiguration(t);a&&this._client.needsStart()?this._client.start():!a&&this._client.needsStop()&&this._client.stop()}};Ue.SettingMonitor=jo;var Ao;(function(r){function e(t){return[]}r.createAll=e})(Ao=Ue.ProposedFeatures||(Ue.ProposedFeatures={}))});Jo(exports,{activate:()=>Il,deactivate:()=>Ll});var xe=Kt(require("vscode")),Tt=Kt(ji()),$o=Kt(require("path"));var Ge=Kt(require("vscode")),Wo=Kt(ji()),_e;(function(i){i[i.INIT=1]="INIT",i[i.RUNNING=2]="RUNNING",i[i.ERROR=3]="ERROR"})(_e||(_e={}));var Ol={[1]:{icon:"sync",tooltip:"GraphQL language server is initializing"},[2]:{icon:"plug",tooltip:"GraphQL language server is running"},[3]:{icon:"stop",color:new Ge.ThemeColor("list.warningForeground"),tooltip:"GraphQL language server has stopped"}},Fl={[1]:{icon:"graphql-loading",tooltip:"GraphQL language server is starting up, click to show logs"},[2]:{icon:"graphql-logo",tooltip:"GraphQL language server is running, click to show logs"},[3]:{icon:"graphql-error",color:new Ge.ThemeColor("list.warningForeground"),tooltip:"GraphQL language server has stopped, click to show logs"}},St=2,ar=!0,Nl=["graphql","javascript","javascriptreact","typescript","typescriptreact"],Ho=()=>Ge.window.createStatusBarItem(Ge.StatusBarAlignment.Right,0);function Ko(r,e,t){St=1,e.onNotification("init",i=>{St=2,ar=!0,cr(r,t)}),e.onNotification("exit",i=>{St=3,ar=!1,cr(r,t)}),e.onDidChangeState(i=>{i.newState===Wo.State.Running?(St=2,ar=!0):(St=3,e.info("The graphql server has stopped running"),ar=!1),cr(r,t)}),cr(r,t),Ge.window.onDidChangeActiveTextEditor(i=>{cr(r,i)})}function cr(r,e){St=ar?2:3;let[t,i]=Ge.version.split("."),a=Number(t)>1||Number(t)===1&&Number(i)>=65,o=a?Fl:Ol,u=a?"":" GraphQL",c=o[St];r.text=`$(${c.icon})${u}`,r.tooltip=c.tooltip,r.command="vscode-graphql.showOutputChannel","color"in c&&(r.color=c.color),e&&Nl.indexOf(e.document.languageId)>-1?r.show():r.hide()}function Il(r){let e=xe.window.createOutputChannel("GraphQL Language Server"),t=Ml(),{debug:i}=t;i&&console.log('Extension "vscode-graphql" is now active!');let a=$o.join("out","server","index.js"),o=r.asAbsolutePath(a),u={execArgv:["--nolazy","--inspect=localhost:6009"]},c={run:{module:o,transport:Tt.TransportKind.ipc},debug:{module:o,transport:Tt.TransportKind.ipc,options:{...i?u:{}}}},d={documentSelector:[{scheme:"file",language:"graphql"},{scheme:"file",language:"javascript"},{scheme:"file",language:"javascriptreact"},{scheme:"file",language:"typescript"},{scheme:"file",language:"typescriptreact"}],synchronize:{fileEvents:[xe.workspace.createFileSystemWatcher("/{graphql.config.*,.graphqlrc,.graphqlrc.*,package.json}",!1,!0),xe.workspace.createFileSystemWatcher("**/{*.graphql,*.graphqls,*.gql,*.js,*.mjs,*.cjs,*.esm,*.es,*.es6,*.jsx,*.ts,*.tsx}")]},outputChannel:e,outputChannelName:"GraphQL Language Server",revealOutputChannelOn:Tt.RevealOutputChannelOn.Never,initializationFailedHandler:A=>(e.appendLine("Initialization failed"),e.appendLine(A.message),A.stack&&e.appendLine(A.stack),i&&e.show(),!1)},y=new Tt.LanguageClient("vscode-graphql","GraphQL Language Server",c,d,i),S=y.start();r.subscriptions.push(S);let q=xe.commands.registerCommand("vscode-graphql.showOutputChannel",()=>e.show());r.subscriptions.push(q);let L=Ho();r.subscriptions.push(L),y.onReady().then(()=>{Ko(L,y,xe.window.activeTextEditor)}),xe.commands.registerCommand("vscode-graphql.restart",async()=>{e.appendLine("Stopping GraphQL LSP"),await y.stop(),S.dispose(),e.appendLine("Restarting GraphQL LSP"),S=y.start(),r.subscriptions.push(S),e.appendLine("GraphQL LSP restarted")})}function Ll(){console.log('Extension "vscode-graphql" has been de-activated!!')}function Ml(){return xe.workspace.getConfiguration("vscode-graphql",xe.window.activeTextEditor?xe.window.activeTextEditor.document.uri:null)}0&&(module.exports={activate,deactivate});
//# sourceMappingURL=extension.js.map
